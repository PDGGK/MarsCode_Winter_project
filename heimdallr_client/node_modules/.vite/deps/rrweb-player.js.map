{
  "version": 3,
  "sources": ["browser-external:worker_threads", "../../svelte/internal/index.mjs", "../../rrweb/es/rrweb/packages/rrweb-snapshot/es/rrweb-snapshot.js", "../../rrweb/es/rrweb/packages/rrweb/src/utils.js", "../../rrweb/es/rrweb/packages/types/dist/types.js", "../../rrweb/es/rrweb/ext/tslib/tslib.es6.js", "../../rrweb/es/rrweb/ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js", "../../rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__node__WorkerClass.js", "../../rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__node__createBase64WorkerFactory.js", "../../rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__auto__isNodeJS.js", "../../rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__auto__createBase64WorkerFactory.js", "../../rrweb/es/rrweb/packages/rrdom/es/rrdom.js", "../../rrweb/es/rrweb/_virtual/image-bitmap-data-url-worker.js", "../../rrweb/es/rrweb/_virtual/_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js", "../../rrweb/es/rrweb/packages/rrweb/src/record/index.js", "../../rrweb/es/rrweb/ext/fflate/esm/browser.js", "../../rrweb/es/rrweb/packages/rrweb/src/packer/base.js", "../../rrweb/es/rrweb/packages/rrweb/src/packer/unpack.js", "../../rrweb/es/rrweb/ext/mitt/dist/mitt.mjs.js", "../../rrweb/es/rrweb/ext/@xstate/fsm/es/index.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/smoothscroll.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/timer.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/machine.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/styles/inject-style.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/canvas/deserialize-args.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/canvas/webgl.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/canvas/2d.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/canvas/index.js", "../../rrweb/es/rrweb/packages/rrweb/src/replay/index.js", "../../rrweb-player/src/utils.ts", "../../rrweb-player/src/components/Switch.svelte", "../../rrweb-player/src/Controller.svelte", "../../rrweb-player/src/Player.svelte", "../../rrweb-player/src/main.ts", "dep:rrweb-player"],
  "sourcesContent": ["export default new Proxy({}, {\n  get() {\n    throw new Error('Module \"worker_threads\" has been externalized for browser compatibility and cannot be accessed in client code.')\n  }\n})", "function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element.sheet;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes, is_svg) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration(undefined, is_svg);\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes, is_svg);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    if (value === null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, cancelable, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(is_svg = false) {\n        this.is_svg = false;\n        this.is_svg = is_svg;\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            if (this.is_svg)\n                this.e = svg_element(target.nodeName);\n            else\n                this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes, is_svg = false) {\n        super(is_svg);\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\nconst managed_styles = new Map();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_style_information(doc, node) {\n    const info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n    managed_styles.set(doc, info);\n    return info;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n    if (!rules[name]) {\n        rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        managed_styles.forEach(info => {\n            const { stylesheet } = info;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            info.rules = {};\n        });\n        managed_styles.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail, { cancelable = false } = {}) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail, { cancelable });\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n            return !event.defaultPrevented;\n        }\n        return true;\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n    return context;\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (flushidx < dirty_components.length) {\n            const component = dirty_components[flushidx];\n            flushidx++;\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n    else if (callback) {\n        callback();\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro \u2014 we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro \u2014 needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst void_element_names = /^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;\nfunction is_void(name) {\n    return void_element_names.test(name) || name.toLowerCase() === '!doctype';\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, attrs_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (attrs_to_add) {\n        const classes_to_add = attrs_to_add.classes;\n        const styles_to_add = attrs_to_add.styles;\n        if (classes_to_add) {\n            if (attributes.class == null) {\n                attributes.class = classes_to_add;\n            }\n            else {\n                attributes.class += ' ' + classes_to_add;\n            }\n        }\n        if (styles_to_add) {\n            if (attributes.style == null) {\n                attributes.style = style_object_to_string(styles_to_add);\n            }\n            else {\n                attributes.style = style_object_to_string(merge_ssr_styles(attributes.style, styles_to_add));\n            }\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nfunction merge_ssr_styles(style_attribute, style_directive) {\n    const style_object = {};\n    for (const individual_style of style_attribute.split(';')) {\n        const colon_index = individual_style.indexOf(':');\n        const name = individual_style.slice(0, colon_index).trim();\n        const value = individual_style.slice(colon_index + 1).trim();\n        if (!name)\n            continue;\n        style_object[name] = value;\n    }\n    for (const name in style_directive) {\n        const value = style_directive[name];\n        if (value) {\n            style_object[name] = value;\n        }\n        else {\n            delete style_object[name];\n        }\n    }\n    return style_object;\n}\nconst ATTR_REGEX = /[&\"]/g;\nconst CONTENT_REGEX = /[&<]/g;\n/**\n * Note: this method is performance sensitive and has been optimized\n * https://github.com/sveltejs/svelte/pull/5701\n */\nfunction escape(value, is_attr = false) {\n    const str = String(value);\n    const pattern = is_attr ? ATTR_REGEX : CONTENT_REGEX;\n    pattern.lastIndex = 0;\n    let escaped = '';\n    let last = 0;\n    while (pattern.test(str)) {\n        const i = pattern.lastIndex - 1;\n        const ch = str[i];\n        escaped += str.substring(last, i) + (ch === '&' ? '&amp;' : (ch === '\"' ? '&quot;' : '&lt;'));\n        last = i + 1;\n    }\n    return escaped + str.substring(last);\n}\nfunction escape_attribute_value(value) {\n    // keep booleans, null, and undefined for the sake of `spread`\n    const should_escape = typeof value === 'string' || (value && typeof value === 'object');\n    return should_escape ? escape(value, true) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    const assignment = (boolean && value === true) ? '' : `=\"${escape(value, true)}\"`;\n    return ` ${name}${assignment}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\nfunction style_object_to_string(style_object) {\n    return Object.keys(style_object)\n        .filter(key => style_object[key])\n        .map(key => `${key}: ${style_object[key]};`)\n        .join(' ');\n}\nfunction add_styles(style_object) {\n    const styles = style_object_to_string(style_object);\n    return styles ? ` style=\"${styles}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.49.0' }, detail), { bubbles: true }));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nfunction validate_dynamic_element(tag) {\n    const is_string = typeof tag === 'string';\n    if (tag && !is_string) {\n        throw new Error('<svelte:element> expects \"this\" attribute to be a string.');\n    }\n}\nfunction validate_void_dynamic_element(tag) {\n    if (tag && is_void(tag)) {\n        throw new Error(`<svelte:element this=\"${tag}\"> is self-closing and cannot have content.`);\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_styles, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, is_void, listen, listen_dev, loop, loop_guard, merge_ssr_styles, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_dynamic_element, validate_each_argument, validate_each_keys, validate_slots, validate_store, validate_void_dynamic_element, xlink_attr };\n", "var NodeType;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\r\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\r\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\r\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\r\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\r\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\r\n})(NodeType || (NodeType = {}));\n\nfunction isElement(n) {\r\n    return n.nodeType === n.ELEMENT_NODE;\r\n}\r\nfunction isShadowRoot(n) {\r\n    var host = n === null || n === void 0 ? void 0 : n.host;\r\n    return Boolean((host === null || host === void 0 ? void 0 : host.shadowRoot) === n);\r\n}\r\nfunction isNativeShadowDom(shadowRoot) {\r\n    return Object.prototype.toString.call(shadowRoot) === '[object ShadowRoot]';\r\n}\r\nfunction fixBrowserCompatibilityIssuesInCSS(cssText) {\r\n    if (cssText.includes(' background-clip: text;') &&\r\n        !cssText.includes(' -webkit-background-clip: text;')) {\r\n        cssText = cssText.replace(' background-clip: text;', ' -webkit-background-clip: text; background-clip: text;');\r\n    }\r\n    return cssText;\r\n}\r\nfunction getCssRulesString(s) {\r\n    try {\r\n        var rules = s.rules || s.cssRules;\r\n        return rules\r\n            ? fixBrowserCompatibilityIssuesInCSS(Array.from(rules).map(getCssRuleString).join(''))\r\n            : null;\r\n    }\r\n    catch (error) {\r\n        return null;\r\n    }\r\n}\r\nfunction getCssRuleString(rule) {\r\n    var cssStringified = rule.cssText;\r\n    if (isCSSImportRule(rule)) {\r\n        try {\r\n            cssStringified = getCssRulesString(rule.styleSheet) || cssStringified;\r\n        }\r\n        catch (_a) {\r\n        }\r\n    }\r\n    return cssStringified;\r\n}\r\nfunction isCSSImportRule(rule) {\r\n    return 'styleSheet' in rule;\r\n}\r\nvar Mirror = (function () {\r\n    function Mirror() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    Mirror.prototype.getId = function (n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        var id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    };\r\n    Mirror.prototype.getNode = function (id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    };\r\n    Mirror.prototype.getIds = function () {\r\n        return Array.from(this.idNodeMap.keys());\r\n    };\r\n    Mirror.prototype.getMeta = function (n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    };\r\n    Mirror.prototype.removeNodeFromMap = function (n) {\r\n        var _this = this;\r\n        var id = this.getId(n);\r\n        this.idNodeMap[\"delete\"](id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach(function (childNode) {\r\n                return _this.removeNodeFromMap(childNode);\r\n            });\r\n        }\r\n    };\r\n    Mirror.prototype.has = function (id) {\r\n        return this.idNodeMap.has(id);\r\n    };\r\n    Mirror.prototype.hasNode = function (node) {\r\n        return this.nodeMetaMap.has(node);\r\n    };\r\n    Mirror.prototype.add = function (n, meta) {\r\n        var id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    };\r\n    Mirror.prototype.replace = function (id, n) {\r\n        var oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            var meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    };\r\n    Mirror.prototype.reset = function () {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    };\r\n    return Mirror;\r\n}());\r\nfunction createMirror() {\r\n    return new Mirror();\r\n}\r\nfunction maskInputValue(_a) {\r\n    var maskInputOptions = _a.maskInputOptions, tagName = _a.tagName, type = _a.type, value = _a.value, maskInputFn = _a.maskInputFn;\r\n    var text = value || '';\r\n    if (maskInputOptions[tagName.toLowerCase()] ||\r\n        maskInputOptions[type]) {\r\n        if (maskInputFn) {\r\n            text = maskInputFn(text);\r\n        }\r\n        else {\r\n            text = '*'.repeat(text.length);\r\n        }\r\n    }\r\n    return text;\r\n}\r\nvar ORIGINAL_ATTRIBUTE_NAME = '__rrweb_original__';\r\nfunction is2DCanvasBlank(canvas) {\r\n    var ctx = canvas.getContext('2d');\r\n    if (!ctx)\r\n        return true;\r\n    var chunkSize = 50;\r\n    for (var x = 0; x < canvas.width; x += chunkSize) {\r\n        for (var y = 0; y < canvas.height; y += chunkSize) {\r\n            var getImageData = ctx.getImageData;\r\n            var originalGetImageData = ORIGINAL_ATTRIBUTE_NAME in getImageData\r\n                ? getImageData[ORIGINAL_ATTRIBUTE_NAME]\r\n                : getImageData;\r\n            var pixelBuffer = new Uint32Array(originalGetImageData.call(ctx, x, y, Math.min(chunkSize, canvas.width - x), Math.min(chunkSize, canvas.height - y)).data.buffer);\r\n            if (pixelBuffer.some(function (pixel) { return pixel !== 0; }))\r\n                return false;\r\n        }\r\n    }\r\n    return true;\r\n}\n\nvar _id = 1;\r\nvar tagNameRegex = new RegExp('[^a-z0-9-_:]');\r\nvar IGNORED_NODE = -2;\r\nfunction genId() {\r\n    return _id++;\r\n}\r\nfunction getValidTagName(element) {\r\n    if (element instanceof HTMLFormElement) {\r\n        return 'form';\r\n    }\r\n    var processedTagName = element.tagName.toLowerCase().trim();\r\n    if (tagNameRegex.test(processedTagName)) {\r\n        return 'div';\r\n    }\r\n    return processedTagName;\r\n}\r\nfunction stringifyStyleSheet(sheet) {\r\n    return sheet.cssRules\r\n        ? Array.from(sheet.cssRules)\r\n            .map(function (rule) { return rule.cssText || ''; })\r\n            .join('')\r\n        : '';\r\n}\r\nfunction extractOrigin(url) {\r\n    var origin = '';\r\n    if (url.indexOf('//') > -1) {\r\n        origin = url.split('/').slice(0, 3).join('/');\r\n    }\r\n    else {\r\n        origin = url.split('/')[0];\r\n    }\r\n    origin = origin.split('?')[0];\r\n    return origin;\r\n}\r\nvar canvasService;\r\nvar canvasCtx;\r\nvar URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")(.*?)\"|([^)]*))\\)/gm;\r\nvar RELATIVE_PATH = /^(?!www\\.|(?:http|ftp)s?:\\/\\/|[A-Za-z]:\\\\|\\/\\/|#).*/;\r\nvar DATA_URI = /^(data:)([^,]*),(.*)/i;\r\nfunction absoluteToStylesheet(cssText, href) {\r\n    return (cssText || '').replace(URL_IN_CSS_REF, function (origin, quote1, path1, quote2, path2, path3) {\r\n        var filePath = path1 || path2 || path3;\r\n        var maybeQuote = quote1 || quote2 || '';\r\n        if (!filePath) {\r\n            return origin;\r\n        }\r\n        if (!RELATIVE_PATH.test(filePath)) {\r\n            return \"url(\".concat(maybeQuote).concat(filePath).concat(maybeQuote, \")\");\r\n        }\r\n        if (DATA_URI.test(filePath)) {\r\n            return \"url(\".concat(maybeQuote).concat(filePath).concat(maybeQuote, \")\");\r\n        }\r\n        if (filePath[0] === '/') {\r\n            return \"url(\".concat(maybeQuote).concat(extractOrigin(href) + filePath).concat(maybeQuote, \")\");\r\n        }\r\n        var stack = href.split('/');\r\n        var parts = filePath.split('/');\r\n        stack.pop();\r\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\r\n            var part = parts_1[_i];\r\n            if (part === '.') {\r\n                continue;\r\n            }\r\n            else if (part === '..') {\r\n                stack.pop();\r\n            }\r\n            else {\r\n                stack.push(part);\r\n            }\r\n        }\r\n        return \"url(\".concat(maybeQuote).concat(stack.join('/')).concat(maybeQuote, \")\");\r\n    });\r\n}\r\nvar SRCSET_NOT_SPACES = /^[^ \\t\\n\\r\\u000c]+/;\r\nvar SRCSET_COMMAS_OR_SPACES = /^[, \\t\\n\\r\\u000c]+/;\r\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\r\n    if (attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    var pos = 0;\r\n    function collectCharacters(regEx) {\r\n        var chars;\r\n        var match = regEx.exec(attributeValue.substring(pos));\r\n        if (match) {\r\n            chars = match[0];\r\n            pos += chars.length;\r\n            return chars;\r\n        }\r\n        return '';\r\n    }\r\n    var output = [];\r\n    while (true) {\r\n        collectCharacters(SRCSET_COMMAS_OR_SPACES);\r\n        if (pos >= attributeValue.length) {\r\n            break;\r\n        }\r\n        var url = collectCharacters(SRCSET_NOT_SPACES);\r\n        if (url.slice(-1) === ',') {\r\n            url = absoluteToDoc(doc, url.substring(0, url.length - 1));\r\n            output.push(url);\r\n        }\r\n        else {\r\n            var descriptorsStr = '';\r\n            url = absoluteToDoc(doc, url);\r\n            var inParens = false;\r\n            while (true) {\r\n                var c = attributeValue.charAt(pos);\r\n                if (c === '') {\r\n                    output.push((url + descriptorsStr).trim());\r\n                    break;\r\n                }\r\n                else if (!inParens) {\r\n                    if (c === ',') {\r\n                        pos += 1;\r\n                        output.push((url + descriptorsStr).trim());\r\n                        break;\r\n                    }\r\n                    else if (c === '(') {\r\n                        inParens = true;\r\n                    }\r\n                }\r\n                else {\r\n                    if (c === ')') {\r\n                        inParens = false;\r\n                    }\r\n                }\r\n                descriptorsStr += c;\r\n                pos += 1;\r\n            }\r\n        }\r\n    }\r\n    return output.join(', ');\r\n}\r\nfunction absoluteToDoc(doc, attributeValue) {\r\n    if (!attributeValue || attributeValue.trim() === '') {\r\n        return attributeValue;\r\n    }\r\n    var a = doc.createElement('a');\r\n    a.href = attributeValue;\r\n    return a.href;\r\n}\r\nfunction isSVGElement(el) {\r\n    return Boolean(el.tagName === 'svg' || el.ownerSVGElement);\r\n}\r\nfunction getHref() {\r\n    var a = document.createElement('a');\r\n    a.href = '';\r\n    return a.href;\r\n}\r\nfunction transformAttribute(doc, tagName, name, value) {\r\n    if (name === 'src' ||\r\n        (name === 'href' && value && !(tagName === 'use' && value[0] === '#'))) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'xlink:href' && value && value[0] !== '#') {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'background' &&\r\n        value &&\r\n        (tagName === 'table' || tagName === 'td' || tagName === 'th')) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else if (name === 'srcset' && value) {\r\n        return getAbsoluteSrcsetString(doc, value);\r\n    }\r\n    else if (name === 'style' && value) {\r\n        return absoluteToStylesheet(value, getHref());\r\n    }\r\n    else if (tagName === 'object' && name === 'data' && value) {\r\n        return absoluteToDoc(doc, value);\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nfunction _isBlockedElement(element, blockClass, blockSelector) {\r\n    if (typeof blockClass === 'string') {\r\n        if (element.classList.contains(blockClass)) {\r\n            return true;\r\n        }\r\n    }\r\n    else {\r\n        for (var eIndex = element.classList.length; eIndex--;) {\r\n            var className = element.classList[eIndex];\r\n            if (blockClass.test(className)) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    if (blockSelector) {\r\n        return element.matches(blockSelector);\r\n    }\r\n    return false;\r\n}\r\nfunction classMatchesRegex(node, regex, checkAncestors) {\r\n    if (!node)\r\n        return false;\r\n    if (node.nodeType !== node.ELEMENT_NODE) {\r\n        if (!checkAncestors)\r\n            return false;\r\n        return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n    }\r\n    for (var eIndex = node.classList.length; eIndex--;) {\r\n        var className = node.classList[eIndex];\r\n        if (regex.test(className)) {\r\n            return true;\r\n        }\r\n    }\r\n    if (!checkAncestors)\r\n        return false;\r\n    return classMatchesRegex(node.parentNode, regex, checkAncestors);\r\n}\r\nfunction needMaskingText(node, maskTextClass, maskTextSelector) {\r\n    var el = node.nodeType === node.ELEMENT_NODE\r\n        ? node\r\n        : node.parentElement;\r\n    if (el === null)\r\n        return false;\r\n    if (typeof maskTextClass === 'string') {\r\n        if (el.classList.contains(maskTextClass))\r\n            return true;\r\n        if (el.closest(\".\".concat(maskTextClass)))\r\n            return true;\r\n    }\r\n    else {\r\n        if (classMatchesRegex(el, maskTextClass, true))\r\n            return true;\r\n    }\r\n    if (maskTextSelector) {\r\n        if (el.matches(maskTextSelector))\r\n            return true;\r\n        if (el.closest(maskTextSelector))\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nfunction onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {\r\n    var win = iframeEl.contentWindow;\r\n    if (!win) {\r\n        return;\r\n    }\r\n    var fired = false;\r\n    var readyState;\r\n    try {\r\n        readyState = win.document.readyState;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (readyState !== 'complete') {\r\n        var timer_1 = setTimeout(function () {\r\n            if (!fired) {\r\n                listener();\r\n                fired = true;\r\n            }\r\n        }, iframeLoadTimeout);\r\n        iframeEl.addEventListener('load', function () {\r\n            clearTimeout(timer_1);\r\n            fired = true;\r\n            listener();\r\n        });\r\n        return;\r\n    }\r\n    var blankUrl = 'about:blank';\r\n    if (win.location.href !== blankUrl ||\r\n        iframeEl.src === blankUrl ||\r\n        iframeEl.src === '') {\r\n        setTimeout(listener, 0);\r\n        return iframeEl.addEventListener('load', listener);\r\n    }\r\n    iframeEl.addEventListener('load', listener);\r\n}\r\nfunction onceStylesheetLoaded(link, listener, styleSheetLoadTimeout) {\r\n    var fired = false;\r\n    var styleSheetLoaded;\r\n    try {\r\n        styleSheetLoaded = link.sheet;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n    if (styleSheetLoaded)\r\n        return;\r\n    var timer = setTimeout(function () {\r\n        if (!fired) {\r\n            listener();\r\n            fired = true;\r\n        }\r\n    }, styleSheetLoadTimeout);\r\n    link.addEventListener('load', function () {\r\n        clearTimeout(timer);\r\n        fired = true;\r\n        listener();\r\n    });\r\n}\r\nfunction serializeNode(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, _b = options.dataURLOptions, dataURLOptions = _b === void 0 ? {} : _b, inlineImages = options.inlineImages, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn, _c = options.newlyAddedElement, newlyAddedElement = _c === void 0 ? false : _c;\r\n    var rootId = getRootId(doc, mirror);\r\n    switch (n.nodeType) {\r\n        case n.DOCUMENT_NODE:\r\n            if (n.compatMode !== 'CSS1Compat') {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: [],\r\n                    compatMode: n.compatMode\r\n                };\r\n            }\r\n            else {\r\n                return {\r\n                    type: NodeType.Document,\r\n                    childNodes: []\r\n                };\r\n            }\r\n        case n.DOCUMENT_TYPE_NODE:\r\n            return {\r\n                type: NodeType.DocumentType,\r\n                name: n.name,\r\n                publicId: n.publicId,\r\n                systemId: n.systemId,\r\n                rootId: rootId\r\n            };\r\n        case n.ELEMENT_NODE:\r\n            return serializeElementNode(n, {\r\n                doc: doc,\r\n                blockClass: blockClass,\r\n                blockSelector: blockSelector,\r\n                inlineStylesheet: inlineStylesheet,\r\n                maskInputOptions: maskInputOptions,\r\n                maskInputFn: maskInputFn,\r\n                dataURLOptions: dataURLOptions,\r\n                inlineImages: inlineImages,\r\n                recordCanvas: recordCanvas,\r\n                keepIframeSrcFn: keepIframeSrcFn,\r\n                newlyAddedElement: newlyAddedElement,\r\n                rootId: rootId\r\n            });\r\n        case n.TEXT_NODE:\r\n            return serializeTextNode(n, {\r\n                maskTextClass: maskTextClass,\r\n                maskTextSelector: maskTextSelector,\r\n                maskTextFn: maskTextFn,\r\n                rootId: rootId\r\n            });\r\n        case n.CDATA_SECTION_NODE:\r\n            return {\r\n                type: NodeType.CDATA,\r\n                textContent: '',\r\n                rootId: rootId\r\n            };\r\n        case n.COMMENT_NODE:\r\n            return {\r\n                type: NodeType.Comment,\r\n                textContent: n.textContent || '',\r\n                rootId: rootId\r\n            };\r\n        default:\r\n            return false;\r\n    }\r\n}\r\nfunction getRootId(doc, mirror) {\r\n    if (!mirror.hasNode(doc))\r\n        return undefined;\r\n    var docId = mirror.getId(doc);\r\n    return docId === 1 ? undefined : docId;\r\n}\r\nfunction serializeTextNode(n, options) {\r\n    var _a;\r\n    var maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, maskTextFn = options.maskTextFn, rootId = options.rootId;\r\n    var parentTagName = n.parentNode && n.parentNode.tagName;\r\n    var textContent = n.textContent;\r\n    var isStyle = parentTagName === 'STYLE' ? true : undefined;\r\n    var isScript = parentTagName === 'SCRIPT' ? true : undefined;\r\n    if (isStyle && textContent) {\r\n        try {\r\n            if (n.nextSibling || n.previousSibling) {\r\n            }\r\n            else if ((_a = n.parentNode.sheet) === null || _a === void 0 ? void 0 : _a.cssRules) {\r\n                textContent = stringifyStyleSheet(n.parentNode.sheet);\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.warn(\"Cannot get CSS styles from text's parentNode. Error: \".concat(err), n);\r\n        }\r\n        textContent = absoluteToStylesheet(textContent, getHref());\r\n    }\r\n    if (isScript) {\r\n        textContent = 'SCRIPT_PLACEHOLDER';\r\n    }\r\n    if (!isStyle &&\r\n        !isScript &&\r\n        textContent &&\r\n        needMaskingText(n, maskTextClass, maskTextSelector)) {\r\n        textContent = maskTextFn\r\n            ? maskTextFn(textContent)\r\n            : textContent.replace(/[\\S]/g, '*');\r\n    }\r\n    return {\r\n        type: NodeType.Text,\r\n        textContent: textContent || '',\r\n        isStyle: isStyle,\r\n        rootId: rootId\r\n    };\r\n}\r\nfunction serializeElementNode(n, options) {\r\n    var doc = options.doc, blockClass = options.blockClass, blockSelector = options.blockSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, maskInputFn = options.maskInputFn, _b = options.dataURLOptions, dataURLOptions = _b === void 0 ? {} : _b, inlineImages = options.inlineImages, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn, _c = options.newlyAddedElement, newlyAddedElement = _c === void 0 ? false : _c, rootId = options.rootId;\r\n    var needBlock = _isBlockedElement(n, blockClass, blockSelector);\r\n    var tagName = getValidTagName(n);\r\n    var attributes = {};\r\n    var len = n.attributes.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var attr = n.attributes[i];\r\n        attributes[attr.name] = transformAttribute(doc, tagName, attr.name, attr.value);\r\n    }\r\n    if (tagName === 'link' && inlineStylesheet) {\r\n        var stylesheet = Array.from(doc.styleSheets).find(function (s) {\r\n            return s.href === n.href;\r\n        });\r\n        var cssText = null;\r\n        if (stylesheet) {\r\n            cssText = getCssRulesString(stylesheet);\r\n        }\r\n        if (cssText) {\r\n            delete attributes.rel;\r\n            delete attributes.href;\r\n            attributes._cssText = absoluteToStylesheet(cssText, stylesheet.href);\r\n        }\r\n    }\r\n    if (tagName === 'style' &&\r\n        n.sheet &&\r\n        !(n.innerText || n.textContent || '').trim().length) {\r\n        var cssText = getCssRulesString(n.sheet);\r\n        if (cssText) {\r\n            attributes._cssText = absoluteToStylesheet(cssText, getHref());\r\n        }\r\n    }\r\n    if (tagName === 'input' || tagName === 'textarea' || tagName === 'select') {\r\n        var value = n.value;\r\n        var checked = n.checked;\r\n        if (attributes.type !== 'radio' &&\r\n            attributes.type !== 'checkbox' &&\r\n            attributes.type !== 'submit' &&\r\n            attributes.type !== 'button' &&\r\n            value) {\r\n            attributes.value = maskInputValue({\r\n                type: attributes.type,\r\n                tagName: tagName,\r\n                value: value,\r\n                maskInputOptions: maskInputOptions,\r\n                maskInputFn: maskInputFn\r\n            });\r\n        }\r\n        else if (checked) {\r\n            attributes.checked = checked;\r\n        }\r\n    }\r\n    if (tagName === 'option') {\r\n        if (n.selected && !maskInputOptions['select']) {\r\n            attributes.selected = true;\r\n        }\r\n        else {\r\n            delete attributes.selected;\r\n        }\r\n    }\r\n    if (tagName === 'canvas' && recordCanvas) {\r\n        if (n.__context === '2d') {\r\n            if (!is2DCanvasBlank(n)) {\r\n                attributes.rr_dataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n        }\r\n        else if (!('__context' in n)) {\r\n            var canvasDataURL = n.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            var blankCanvas = document.createElement('canvas');\r\n            blankCanvas.width = n.width;\r\n            blankCanvas.height = n.height;\r\n            var blankCanvasDataURL = blankCanvas.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            if (canvasDataURL !== blankCanvasDataURL) {\r\n                attributes.rr_dataURL = canvasDataURL;\r\n            }\r\n        }\r\n    }\r\n    if (tagName === 'img' && inlineImages) {\r\n        if (!canvasService) {\r\n            canvasService = doc.createElement('canvas');\r\n            canvasCtx = canvasService.getContext('2d');\r\n        }\r\n        var image_1 = n;\r\n        var oldValue_1 = image_1.crossOrigin;\r\n        image_1.crossOrigin = 'anonymous';\r\n        var recordInlineImage = function () {\r\n            try {\r\n                canvasService.width = image_1.naturalWidth;\r\n                canvasService.height = image_1.naturalHeight;\r\n                canvasCtx.drawImage(image_1, 0, 0);\r\n                attributes.rr_dataURL = canvasService.toDataURL(dataURLOptions.type, dataURLOptions.quality);\r\n            }\r\n            catch (err) {\r\n                console.warn(\"Cannot inline img src=\".concat(image_1.currentSrc, \"! Error: \").concat(err));\r\n            }\r\n            oldValue_1\r\n                ? (attributes.crossOrigin = oldValue_1)\r\n                : image_1.removeAttribute('crossorigin');\r\n        };\r\n        if (image_1.complete && image_1.naturalWidth !== 0)\r\n            recordInlineImage();\r\n        else\r\n            image_1.onload = recordInlineImage;\r\n    }\r\n    if (tagName === 'audio' || tagName === 'video') {\r\n        attributes.rr_mediaState = n.paused\r\n            ? 'paused'\r\n            : 'played';\r\n        attributes.rr_mediaCurrentTime = n.currentTime;\r\n    }\r\n    if (!newlyAddedElement) {\r\n        if (n.scrollLeft) {\r\n            attributes.rr_scrollLeft = n.scrollLeft;\r\n        }\r\n        if (n.scrollTop) {\r\n            attributes.rr_scrollTop = n.scrollTop;\r\n        }\r\n    }\r\n    if (needBlock) {\r\n        var _d = n.getBoundingClientRect(), width = _d.width, height = _d.height;\r\n        attributes = {\r\n            \"class\": attributes[\"class\"],\r\n            rr_width: \"\".concat(width, \"px\"),\r\n            rr_height: \"\".concat(height, \"px\")\r\n        };\r\n    }\r\n    if (tagName === 'iframe' && !keepIframeSrcFn(attributes.src)) {\r\n        if (!n.contentDocument) {\r\n            attributes.rr_src = attributes.src;\r\n        }\r\n        delete attributes.src;\r\n    }\r\n    return {\r\n        type: NodeType.Element,\r\n        tagName: tagName,\r\n        attributes: attributes,\r\n        childNodes: [],\r\n        isSVG: isSVGElement(n) || undefined,\r\n        needBlock: needBlock,\r\n        rootId: rootId\r\n    };\r\n}\r\nfunction lowerIfExists(maybeAttr) {\r\n    if (maybeAttr === undefined) {\r\n        return '';\r\n    }\r\n    else {\r\n        return maybeAttr.toLowerCase();\r\n    }\r\n}\r\nfunction slimDOMExcluded(sn, slimDOMOptions) {\r\n    if (slimDOMOptions.comment && sn.type === NodeType.Comment) {\r\n        return true;\r\n    }\r\n    else if (sn.type === NodeType.Element) {\r\n        if (slimDOMOptions.script &&\r\n            (sn.tagName === 'script' ||\r\n                (sn.tagName === 'link' &&\r\n                    sn.attributes.rel === 'preload' &&\r\n                    sn.attributes.as === 'script') ||\r\n                (sn.tagName === 'link' &&\r\n                    sn.attributes.rel === 'prefetch' &&\r\n                    typeof sn.attributes.href === 'string' &&\r\n                    sn.attributes.href.endsWith('.js')))) {\r\n            return true;\r\n        }\r\n        else if (slimDOMOptions.headFavicon &&\r\n            ((sn.tagName === 'link' && sn.attributes.rel === 'shortcut icon') ||\r\n                (sn.tagName === 'meta' &&\r\n                    (lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/) ||\r\n                        lowerIfExists(sn.attributes.name) === 'application-name' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'apple-touch-icon' ||\r\n                        lowerIfExists(sn.attributes.rel) === 'shortcut icon')))) {\r\n            return true;\r\n        }\r\n        else if (sn.tagName === 'meta') {\r\n            if (slimDOMOptions.headMetaDescKeywords &&\r\n                lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaSocial &&\r\n                (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) ||\r\n                    lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) ||\r\n                    lowerIfExists(sn.attributes.name) === 'pinterest')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaRobots &&\r\n                (lowerIfExists(sn.attributes.name) === 'robots' ||\r\n                    lowerIfExists(sn.attributes.name) === 'googlebot' ||\r\n                    lowerIfExists(sn.attributes.name) === 'bingbot')) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaHttpEquiv &&\r\n                sn.attributes['http-equiv'] !== undefined) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaAuthorship &&\r\n                (lowerIfExists(sn.attributes.name) === 'author' ||\r\n                    lowerIfExists(sn.attributes.name) === 'generator' ||\r\n                    lowerIfExists(sn.attributes.name) === 'framework' ||\r\n                    lowerIfExists(sn.attributes.name) === 'publisher' ||\r\n                    lowerIfExists(sn.attributes.name) === 'progid' ||\r\n                    lowerIfExists(sn.attributes.property).match(/^article:/) ||\r\n                    lowerIfExists(sn.attributes.property).match(/^product:/))) {\r\n                return true;\r\n            }\r\n            else if (slimDOMOptions.headMetaVerification &&\r\n                (lowerIfExists(sn.attributes.name) === 'google-site-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'yandex-verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'csrf-token' ||\r\n                    lowerIfExists(sn.attributes.name) === 'p:domain_verify' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verify-v1' ||\r\n                    lowerIfExists(sn.attributes.name) === 'verification' ||\r\n                    lowerIfExists(sn.attributes.name) === 'shopify-checkout-api-token')) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction serializeNodeWithId(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.inlineStylesheet, inlineStylesheet = _b === void 0 ? true : _b, _c = options.maskInputOptions, maskInputOptions = _c === void 0 ? {} : _c, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, slimDOMOptions = options.slimDOMOptions, _d = options.dataURLOptions, dataURLOptions = _d === void 0 ? {} : _d, _e = options.inlineImages, inlineImages = _e === void 0 ? false : _e, _f = options.recordCanvas, recordCanvas = _f === void 0 ? false : _f, onSerialize = options.onSerialize, onIframeLoad = options.onIframeLoad, _g = options.iframeLoadTimeout, iframeLoadTimeout = _g === void 0 ? 5000 : _g, onStylesheetLoad = options.onStylesheetLoad, _h = options.stylesheetLoadTimeout, stylesheetLoadTimeout = _h === void 0 ? 5000 : _h, _j = options.keepIframeSrcFn, keepIframeSrcFn = _j === void 0 ? function () { return false; } : _j, _k = options.newlyAddedElement, newlyAddedElement = _k === void 0 ? false : _k;\r\n    var _l = options.preserveWhiteSpace, preserveWhiteSpace = _l === void 0 ? true : _l;\r\n    var _serializedNode = serializeNode(n, {\r\n        doc: doc,\r\n        mirror: mirror,\r\n        blockClass: blockClass,\r\n        blockSelector: blockSelector,\r\n        maskTextClass: maskTextClass,\r\n        maskTextSelector: maskTextSelector,\r\n        inlineStylesheet: inlineStylesheet,\r\n        maskInputOptions: maskInputOptions,\r\n        maskTextFn: maskTextFn,\r\n        maskInputFn: maskInputFn,\r\n        dataURLOptions: dataURLOptions,\r\n        inlineImages: inlineImages,\r\n        recordCanvas: recordCanvas,\r\n        keepIframeSrcFn: keepIframeSrcFn,\r\n        newlyAddedElement: newlyAddedElement\r\n    });\r\n    if (!_serializedNode) {\r\n        console.warn(n, 'not serialized');\r\n        return null;\r\n    }\r\n    var id;\r\n    if (mirror.hasNode(n)) {\r\n        id = mirror.getId(n);\r\n    }\r\n    else if (slimDOMExcluded(_serializedNode, slimDOMOptions) ||\r\n        (!preserveWhiteSpace &&\r\n            _serializedNode.type === NodeType.Text &&\r\n            !_serializedNode.isStyle &&\r\n            !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, '').length)) {\r\n        id = IGNORED_NODE;\r\n    }\r\n    else {\r\n        id = genId();\r\n    }\r\n    var serializedNode = Object.assign(_serializedNode, { id: id });\r\n    mirror.add(n, serializedNode);\r\n    if (id === IGNORED_NODE) {\r\n        return null;\r\n    }\r\n    if (onSerialize) {\r\n        onSerialize(n);\r\n    }\r\n    var recordChild = !skipChild;\r\n    if (serializedNode.type === NodeType.Element) {\r\n        recordChild = recordChild && !serializedNode.needBlock;\r\n        delete serializedNode.needBlock;\r\n        var shadowRoot = n.shadowRoot;\r\n        if (shadowRoot && isNativeShadowDom(shadowRoot))\r\n            serializedNode.isShadowHost = true;\r\n    }\r\n    if ((serializedNode.type === NodeType.Document ||\r\n        serializedNode.type === NodeType.Element) &&\r\n        recordChild) {\r\n        if (slimDOMOptions.headWhitespace &&\r\n            serializedNode.type === NodeType.Element &&\r\n            serializedNode.tagName === 'head') {\r\n            preserveWhiteSpace = false;\r\n        }\r\n        var bypassOptions = {\r\n            doc: doc,\r\n            mirror: mirror,\r\n            blockClass: blockClass,\r\n            blockSelector: blockSelector,\r\n            maskTextClass: maskTextClass,\r\n            maskTextSelector: maskTextSelector,\r\n            skipChild: skipChild,\r\n            inlineStylesheet: inlineStylesheet,\r\n            maskInputOptions: maskInputOptions,\r\n            maskTextFn: maskTextFn,\r\n            maskInputFn: maskInputFn,\r\n            slimDOMOptions: slimDOMOptions,\r\n            dataURLOptions: dataURLOptions,\r\n            inlineImages: inlineImages,\r\n            recordCanvas: recordCanvas,\r\n            preserveWhiteSpace: preserveWhiteSpace,\r\n            onSerialize: onSerialize,\r\n            onIframeLoad: onIframeLoad,\r\n            iframeLoadTimeout: iframeLoadTimeout,\r\n            onStylesheetLoad: onStylesheetLoad,\r\n            stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n            keepIframeSrcFn: keepIframeSrcFn\r\n        };\r\n        for (var _i = 0, _m = Array.from(n.childNodes); _i < _m.length; _i++) {\r\n            var childN = _m[_i];\r\n            var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n            if (serializedChildNode) {\r\n                serializedNode.childNodes.push(serializedChildNode);\r\n            }\r\n        }\r\n        if (isElement(n) && n.shadowRoot) {\r\n            for (var _o = 0, _p = Array.from(n.shadowRoot.childNodes); _o < _p.length; _o++) {\r\n                var childN = _p[_o];\r\n                var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\r\n                if (serializedChildNode) {\r\n                    isNativeShadowDom(n.shadowRoot) &&\r\n                        (serializedChildNode.isShadow = true);\r\n                    serializedNode.childNodes.push(serializedChildNode);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (n.parentNode &&\r\n        isShadowRoot(n.parentNode) &&\r\n        isNativeShadowDom(n.parentNode)) {\r\n        serializedNode.isShadow = true;\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'iframe') {\r\n        onceIframeLoaded(n, function () {\r\n            var iframeDoc = n.contentDocument;\r\n            if (iframeDoc && onIframeLoad) {\r\n                var serializedIframeNode = serializeNodeWithId(iframeDoc, {\r\n                    doc: iframeDoc,\r\n                    mirror: mirror,\r\n                    blockClass: blockClass,\r\n                    blockSelector: blockSelector,\r\n                    maskTextClass: maskTextClass,\r\n                    maskTextSelector: maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet: inlineStylesheet,\r\n                    maskInputOptions: maskInputOptions,\r\n                    maskTextFn: maskTextFn,\r\n                    maskInputFn: maskInputFn,\r\n                    slimDOMOptions: slimDOMOptions,\r\n                    dataURLOptions: dataURLOptions,\r\n                    inlineImages: inlineImages,\r\n                    recordCanvas: recordCanvas,\r\n                    preserveWhiteSpace: preserveWhiteSpace,\r\n                    onSerialize: onSerialize,\r\n                    onIframeLoad: onIframeLoad,\r\n                    iframeLoadTimeout: iframeLoadTimeout,\r\n                    onStylesheetLoad: onStylesheetLoad,\r\n                    stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n                    keepIframeSrcFn: keepIframeSrcFn\r\n                });\r\n                if (serializedIframeNode) {\r\n                    onIframeLoad(n, serializedIframeNode);\r\n                }\r\n            }\r\n        }, iframeLoadTimeout);\r\n    }\r\n    if (serializedNode.type === NodeType.Element &&\r\n        serializedNode.tagName === 'link' &&\r\n        serializedNode.attributes.rel === 'stylesheet') {\r\n        onceStylesheetLoaded(n, function () {\r\n            if (onStylesheetLoad) {\r\n                var serializedLinkNode = serializeNodeWithId(n, {\r\n                    doc: doc,\r\n                    mirror: mirror,\r\n                    blockClass: blockClass,\r\n                    blockSelector: blockSelector,\r\n                    maskTextClass: maskTextClass,\r\n                    maskTextSelector: maskTextSelector,\r\n                    skipChild: false,\r\n                    inlineStylesheet: inlineStylesheet,\r\n                    maskInputOptions: maskInputOptions,\r\n                    maskTextFn: maskTextFn,\r\n                    maskInputFn: maskInputFn,\r\n                    slimDOMOptions: slimDOMOptions,\r\n                    dataURLOptions: dataURLOptions,\r\n                    inlineImages: inlineImages,\r\n                    recordCanvas: recordCanvas,\r\n                    preserveWhiteSpace: preserveWhiteSpace,\r\n                    onSerialize: onSerialize,\r\n                    onIframeLoad: onIframeLoad,\r\n                    iframeLoadTimeout: iframeLoadTimeout,\r\n                    onStylesheetLoad: onStylesheetLoad,\r\n                    stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n                    keepIframeSrcFn: keepIframeSrcFn\r\n                });\r\n                if (serializedLinkNode) {\r\n                    onStylesheetLoad(n, serializedLinkNode);\r\n                }\r\n            }\r\n        }, stylesheetLoadTimeout);\r\n    }\r\n    return serializedNode;\r\n}\r\nfunction snapshot(n, options) {\r\n    var _a = options || {}, _b = _a.mirror, mirror = _b === void 0 ? new Mirror() : _b, _c = _a.blockClass, blockClass = _c === void 0 ? 'rr-block' : _c, _d = _a.blockSelector, blockSelector = _d === void 0 ? null : _d, _e = _a.maskTextClass, maskTextClass = _e === void 0 ? 'rr-mask' : _e, _f = _a.maskTextSelector, maskTextSelector = _f === void 0 ? null : _f, _g = _a.inlineStylesheet, inlineStylesheet = _g === void 0 ? true : _g, _h = _a.inlineImages, inlineImages = _h === void 0 ? false : _h, _j = _a.recordCanvas, recordCanvas = _j === void 0 ? false : _j, _k = _a.maskAllInputs, maskAllInputs = _k === void 0 ? false : _k, maskTextFn = _a.maskTextFn, maskInputFn = _a.maskInputFn, _l = _a.slimDOM, slimDOM = _l === void 0 ? false : _l, dataURLOptions = _a.dataURLOptions, preserveWhiteSpace = _a.preserveWhiteSpace, onSerialize = _a.onSerialize, onIframeLoad = _a.onIframeLoad, iframeLoadTimeout = _a.iframeLoadTimeout, onStylesheetLoad = _a.onStylesheetLoad, stylesheetLoadTimeout = _a.stylesheetLoadTimeout, _m = _a.keepIframeSrcFn, keepIframeSrcFn = _m === void 0 ? function () { return false; } : _m;\r\n    var maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true\r\n        }\r\n        : maskAllInputs === false\r\n            ? {\r\n                password: true\r\n            }\r\n            : maskAllInputs;\r\n    var slimDOMOptions = slimDOM === true || slimDOM === 'all'\r\n        ?\r\n            {\r\n                script: true,\r\n                comment: true,\r\n                headFavicon: true,\r\n                headWhitespace: true,\r\n                headMetaDescKeywords: slimDOM === 'all',\r\n                headMetaSocial: true,\r\n                headMetaRobots: true,\r\n                headMetaHttpEquiv: true,\r\n                headMetaAuthorship: true,\r\n                headMetaVerification: true\r\n            }\r\n        : slimDOM === false\r\n            ? {}\r\n            : slimDOM;\r\n    return serializeNodeWithId(n, {\r\n        doc: n,\r\n        mirror: mirror,\r\n        blockClass: blockClass,\r\n        blockSelector: blockSelector,\r\n        maskTextClass: maskTextClass,\r\n        maskTextSelector: maskTextSelector,\r\n        skipChild: false,\r\n        inlineStylesheet: inlineStylesheet,\r\n        maskInputOptions: maskInputOptions,\r\n        maskTextFn: maskTextFn,\r\n        maskInputFn: maskInputFn,\r\n        slimDOMOptions: slimDOMOptions,\r\n        dataURLOptions: dataURLOptions,\r\n        inlineImages: inlineImages,\r\n        recordCanvas: recordCanvas,\r\n        preserveWhiteSpace: preserveWhiteSpace,\r\n        onSerialize: onSerialize,\r\n        onIframeLoad: onIframeLoad,\r\n        iframeLoadTimeout: iframeLoadTimeout,\r\n        onStylesheetLoad: onStylesheetLoad,\r\n        stylesheetLoadTimeout: stylesheetLoadTimeout,\r\n        keepIframeSrcFn: keepIframeSrcFn,\r\n        newlyAddedElement: false\r\n    });\r\n}\r\n\nvar commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\r\nfunction parse(css, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var lineno = 1;\r\n    var column = 1;\r\n    function updatePosition(str) {\r\n        var lines = str.match(/\\n/g);\r\n        if (lines) {\r\n            lineno += lines.length;\r\n        }\r\n        var i = str.lastIndexOf('\\n');\r\n        column = i === -1 ? column + str.length : str.length - i;\r\n    }\r\n    function position() {\r\n        var start = { line: lineno, column: column };\r\n        return function (node) {\r\n            node.position = new Position(start);\r\n            whitespace();\r\n            return node;\r\n        };\r\n    }\r\n    var Position = (function () {\r\n        function Position(start) {\r\n            this.start = start;\r\n            this.end = { line: lineno, column: column };\r\n            this.source = options.source;\r\n        }\r\n        return Position;\r\n    }());\r\n    Position.prototype.content = css;\r\n    var errorsList = [];\r\n    function error(msg) {\r\n        var err = new Error(\"\".concat(options.source || '', \":\").concat(lineno, \":\").concat(column, \": \").concat(msg));\r\n        err.reason = msg;\r\n        err.filename = options.source;\r\n        err.line = lineno;\r\n        err.column = column;\r\n        err.source = css;\r\n        if (options.silent) {\r\n            errorsList.push(err);\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    function stylesheet() {\r\n        var rulesList = rules();\r\n        return {\r\n            type: 'stylesheet',\r\n            stylesheet: {\r\n                source: options.source,\r\n                rules: rulesList,\r\n                parsingErrors: errorsList\r\n            }\r\n        };\r\n    }\r\n    function open() {\r\n        return match(/^{\\s*/);\r\n    }\r\n    function close() {\r\n        return match(/^}/);\r\n    }\r\n    function rules() {\r\n        var node;\r\n        var rules = [];\r\n        whitespace();\r\n        comments(rules);\r\n        while (css.length && css.charAt(0) !== '}' && (node = atrule() || rule())) {\r\n            if (node !== false) {\r\n                rules.push(node);\r\n                comments(rules);\r\n            }\r\n        }\r\n        return rules;\r\n    }\r\n    function match(re) {\r\n        var m = re.exec(css);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var str = m[0];\r\n        updatePosition(str);\r\n        css = css.slice(str.length);\r\n        return m;\r\n    }\r\n    function whitespace() {\r\n        match(/^\\s*/);\r\n    }\r\n    function comments(rules) {\r\n        if (rules === void 0) { rules = []; }\r\n        var c;\r\n        while ((c = comment())) {\r\n            if (c !== false) {\r\n                rules.push(c);\r\n            }\r\n            c = comment();\r\n        }\r\n        return rules;\r\n    }\r\n    function comment() {\r\n        var pos = position();\r\n        if ('/' !== css.charAt(0) || '*' !== css.charAt(1)) {\r\n            return;\r\n        }\r\n        var i = 2;\r\n        while ('' !== css.charAt(i) &&\r\n            ('*' !== css.charAt(i) || '/' !== css.charAt(i + 1))) {\r\n            ++i;\r\n        }\r\n        i += 2;\r\n        if ('' === css.charAt(i - 1)) {\r\n            return error('End of comment missing');\r\n        }\r\n        var str = css.slice(2, i - 2);\r\n        column += 2;\r\n        updatePosition(str);\r\n        css = css.slice(i);\r\n        column += 2;\r\n        return pos({\r\n            type: 'comment',\r\n            comment: str\r\n        });\r\n    }\r\n    function selector() {\r\n        var m = match(/^([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        return trim(m[0])\r\n            .replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '')\r\n            .replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function (m) {\r\n            return m.replace(/,/g, '\\u200C');\r\n        })\r\n            .split(/\\s*(?![^(]*\\)),\\s*/)\r\n            .map(function (s) {\r\n            return s.replace(/\\u200C/g, ',');\r\n        });\r\n    }\r\n    function declaration() {\r\n        var pos = position();\r\n        var propMatch = match(/^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\r\n        if (!propMatch) {\r\n            return;\r\n        }\r\n        var prop = trim(propMatch[0]);\r\n        if (!match(/^:\\s*/)) {\r\n            return error(\"property missing ':'\");\r\n        }\r\n        var val = match(/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/);\r\n        var ret = pos({\r\n            type: 'declaration',\r\n            property: prop.replace(commentre, ''),\r\n            value: val ? trim(val[0]).replace(commentre, '') : ''\r\n        });\r\n        match(/^[;\\s]*/);\r\n        return ret;\r\n    }\r\n    function declarations() {\r\n        var decls = [];\r\n        if (!open()) {\r\n            return error(\"missing '{'\");\r\n        }\r\n        comments(decls);\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            if (decl !== false) {\r\n                decls.push(decl);\r\n                comments(decls);\r\n            }\r\n            decl = declaration();\r\n        }\r\n        if (!close()) {\r\n            return error(\"missing '}'\");\r\n        }\r\n        return decls;\r\n    }\r\n    function keyframe() {\r\n        var m;\r\n        var vals = [];\r\n        var pos = position();\r\n        while ((m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/))) {\r\n            vals.push(m[1]);\r\n            match(/^,\\s*/);\r\n        }\r\n        if (!vals.length) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'keyframe',\r\n            values: vals,\r\n            declarations: declarations()\r\n        });\r\n    }\r\n    function atkeyframes() {\r\n        var pos = position();\r\n        var m = match(/^@([-\\w]+)?keyframes\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var vendor = m[1];\r\n        m = match(/^([-\\w]+)\\s*/);\r\n        if (!m) {\r\n            return error('@keyframes missing name');\r\n        }\r\n        var name = m[1];\r\n        if (!open()) {\r\n            return error(\"@keyframes missing '{'\");\r\n        }\r\n        var frame;\r\n        var frames = comments();\r\n        while ((frame = keyframe())) {\r\n            frames.push(frame);\r\n            frames = frames.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@keyframes missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'keyframes',\r\n            name: name,\r\n            vendor: vendor,\r\n            keyframes: frames\r\n        });\r\n    }\r\n    function atsupports() {\r\n        var pos = position();\r\n        var m = match(/^@supports *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var supports = trim(m[1]);\r\n        if (!open()) {\r\n            return error(\"@supports missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@supports missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'supports',\r\n            supports: supports,\r\n            rules: style\r\n        });\r\n    }\r\n    function athost() {\r\n        var pos = position();\r\n        var m = match(/^@host\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(\"@host missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@host missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'host',\r\n            rules: style\r\n        });\r\n    }\r\n    function atmedia() {\r\n        var pos = position();\r\n        var m = match(/^@media *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var media = trim(m[1]);\r\n        if (!open()) {\r\n            return error(\"@media missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@media missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'media',\r\n            media: media,\r\n            rules: style\r\n        });\r\n    }\r\n    function atcustommedia() {\r\n        var pos = position();\r\n        var m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        return pos({\r\n            type: 'custom-media',\r\n            name: trim(m[1]),\r\n            media: trim(m[2])\r\n        });\r\n    }\r\n    function atpage() {\r\n        var pos = position();\r\n        var m = match(/^@page */);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var sel = selector() || [];\r\n        if (!open()) {\r\n            return error(\"@page missing '{'\");\r\n        }\r\n        var decls = comments();\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@page missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'page',\r\n            selectors: sel,\r\n            declarations: decls\r\n        });\r\n    }\r\n    function atdocument() {\r\n        var pos = position();\r\n        var m = match(/^@([-\\w]+)?document *([^{]+)/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        var vendor = trim(m[1]);\r\n        var doc = trim(m[2]);\r\n        if (!open()) {\r\n            return error(\"@document missing '{'\");\r\n        }\r\n        var style = comments().concat(rules());\r\n        if (!close()) {\r\n            return error(\"@document missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'document',\r\n            document: doc,\r\n            vendor: vendor,\r\n            rules: style\r\n        });\r\n    }\r\n    function atfontface() {\r\n        var pos = position();\r\n        var m = match(/^@font-face\\s*/);\r\n        if (!m) {\r\n            return;\r\n        }\r\n        if (!open()) {\r\n            return error(\"@font-face missing '{'\");\r\n        }\r\n        var decls = comments();\r\n        var decl;\r\n        while ((decl = declaration())) {\r\n            decls.push(decl);\r\n            decls = decls.concat(comments());\r\n        }\r\n        if (!close()) {\r\n            return error(\"@font-face missing '}'\");\r\n        }\r\n        return pos({\r\n            type: 'font-face',\r\n            declarations: decls\r\n        });\r\n    }\r\n    var atimport = _compileAtrule('import');\r\n    var atcharset = _compileAtrule('charset');\r\n    var atnamespace = _compileAtrule('namespace');\r\n    function _compileAtrule(name) {\r\n        var re = new RegExp('^@' + name + '\\\\s*([^;]+);');\r\n        return function () {\r\n            var pos = position();\r\n            var m = match(re);\r\n            if (!m) {\r\n                return;\r\n            }\r\n            var ret = { type: name };\r\n            ret[name] = m[1].trim();\r\n            return pos(ret);\r\n        };\r\n    }\r\n    function atrule() {\r\n        if (css[0] !== '@') {\r\n            return;\r\n        }\r\n        return (atkeyframes() ||\r\n            atmedia() ||\r\n            atcustommedia() ||\r\n            atsupports() ||\r\n            atimport() ||\r\n            atcharset() ||\r\n            atnamespace() ||\r\n            atdocument() ||\r\n            atpage() ||\r\n            athost() ||\r\n            atfontface());\r\n    }\r\n    function rule() {\r\n        var pos = position();\r\n        var sel = selector();\r\n        if (!sel) {\r\n            return error('selector missing');\r\n        }\r\n        comments();\r\n        return pos({\r\n            type: 'rule',\r\n            selectors: sel,\r\n            declarations: declarations()\r\n        });\r\n    }\r\n    return addParent(stylesheet());\r\n}\r\nfunction trim(str) {\r\n    return str ? str.replace(/^\\s+|\\s+$/g, '') : '';\r\n}\r\nfunction addParent(obj, parent) {\r\n    var isNode = obj && typeof obj.type === 'string';\r\n    var childParent = isNode ? obj : parent;\r\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\r\n        var k = _a[_i];\r\n        var value = obj[k];\r\n        if (Array.isArray(value)) {\r\n            value.forEach(function (v) {\r\n                addParent(v, childParent);\r\n            });\r\n        }\r\n        else if (value && typeof value === 'object') {\r\n            addParent(value, childParent);\r\n        }\r\n    }\r\n    if (isNode) {\r\n        Object.defineProperty(obj, 'parent', {\r\n            configurable: true,\r\n            writable: true,\r\n            enumerable: false,\r\n            value: parent || null\r\n        });\r\n    }\r\n    return obj;\r\n}\n\nvar tagMap = {\r\n    script: 'noscript',\r\n    altglyph: 'altGlyph',\r\n    altglyphdef: 'altGlyphDef',\r\n    altglyphitem: 'altGlyphItem',\r\n    animatecolor: 'animateColor',\r\n    animatemotion: 'animateMotion',\r\n    animatetransform: 'animateTransform',\r\n    clippath: 'clipPath',\r\n    feblend: 'feBlend',\r\n    fecolormatrix: 'feColorMatrix',\r\n    fecomponenttransfer: 'feComponentTransfer',\r\n    fecomposite: 'feComposite',\r\n    feconvolvematrix: 'feConvolveMatrix',\r\n    fediffuselighting: 'feDiffuseLighting',\r\n    fedisplacementmap: 'feDisplacementMap',\r\n    fedistantlight: 'feDistantLight',\r\n    fedropshadow: 'feDropShadow',\r\n    feflood: 'feFlood',\r\n    fefunca: 'feFuncA',\r\n    fefuncb: 'feFuncB',\r\n    fefuncg: 'feFuncG',\r\n    fefuncr: 'feFuncR',\r\n    fegaussianblur: 'feGaussianBlur',\r\n    feimage: 'feImage',\r\n    femerge: 'feMerge',\r\n    femergenode: 'feMergeNode',\r\n    femorphology: 'feMorphology',\r\n    feoffset: 'feOffset',\r\n    fepointlight: 'fePointLight',\r\n    fespecularlighting: 'feSpecularLighting',\r\n    fespotlight: 'feSpotLight',\r\n    fetile: 'feTile',\r\n    feturbulence: 'feTurbulence',\r\n    foreignobject: 'foreignObject',\r\n    glyphref: 'glyphRef',\r\n    lineargradient: 'linearGradient',\r\n    radialgradient: 'radialGradient'\r\n};\r\nfunction getTagName(n) {\r\n    var tagName = tagMap[n.tagName] ? tagMap[n.tagName] : n.tagName;\r\n    if (tagName === 'link' && n.attributes._cssText) {\r\n        tagName = 'style';\r\n    }\r\n    return tagName;\r\n}\r\nfunction escapeRegExp(str) {\r\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n}\r\nvar HOVER_SELECTOR = /([^\\\\]):hover/;\r\nvar HOVER_SELECTOR_GLOBAL = new RegExp(HOVER_SELECTOR.source, 'g');\r\nfunction addHoverClass(cssText, cache) {\r\n    var cachedStyle = cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.get(cssText);\r\n    if (cachedStyle)\r\n        return cachedStyle;\r\n    var ast = parse(cssText, {\r\n        silent: true\r\n    });\r\n    if (!ast.stylesheet) {\r\n        return cssText;\r\n    }\r\n    var selectors = [];\r\n    ast.stylesheet.rules.forEach(function (rule) {\r\n        if ('selectors' in rule) {\r\n            (rule.selectors || []).forEach(function (selector) {\r\n                if (HOVER_SELECTOR.test(selector)) {\r\n                    selectors.push(selector);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    if (selectors.length === 0) {\r\n        return cssText;\r\n    }\r\n    var selectorMatcher = new RegExp(selectors\r\n        .filter(function (selector, index) { return selectors.indexOf(selector) === index; })\r\n        .sort(function (a, b) { return b.length - a.length; })\r\n        .map(function (selector) {\r\n        return escapeRegExp(selector);\r\n    })\r\n        .join('|'), 'g');\r\n    var result = cssText.replace(selectorMatcher, function (selector) {\r\n        var newSelector = selector.replace(HOVER_SELECTOR_GLOBAL, '$1.\\\\:hover');\r\n        return \"\".concat(selector, \", \").concat(newSelector);\r\n    });\r\n    cache === null || cache === void 0 ? void 0 : cache.stylesWithHoverClass.set(cssText, result);\r\n    return result;\r\n}\r\nfunction createCache() {\r\n    var stylesWithHoverClass = new Map();\r\n    return {\r\n        stylesWithHoverClass: stylesWithHoverClass\r\n    };\r\n}\r\nfunction buildNode(n, options) {\r\n    var doc = options.doc, hackCss = options.hackCss, cache = options.cache;\r\n    switch (n.type) {\r\n        case NodeType.Document:\r\n            return doc.implementation.createDocument(null, '', null);\r\n        case NodeType.DocumentType:\r\n            return doc.implementation.createDocumentType(n.name || 'html', n.publicId, n.systemId);\r\n        case NodeType.Element: {\r\n            var tagName = getTagName(n);\r\n            var node_1;\r\n            if (n.isSVG) {\r\n                node_1 = doc.createElementNS('http://www.w3.org/2000/svg', tagName);\r\n            }\r\n            else {\r\n                node_1 = doc.createElement(tagName);\r\n            }\r\n            var specialAttributes = {};\r\n            for (var name_1 in n.attributes) {\r\n                if (!Object.prototype.hasOwnProperty.call(n.attributes, name_1)) {\r\n                    continue;\r\n                }\r\n                var value = n.attributes[name_1];\r\n                if (tagName === 'option' &&\r\n                    name_1 === 'selected' &&\r\n                    value === false) {\r\n                    continue;\r\n                }\r\n                if (value === true)\r\n                    value = '';\r\n                if (name_1.startsWith('rr_')) {\r\n                    specialAttributes[name_1] = value;\r\n                    continue;\r\n                }\r\n                var isTextarea = tagName === 'textarea' && name_1 === 'value';\r\n                var isRemoteOrDynamicCss = tagName === 'style' && name_1 === '_cssText';\r\n                if (isRemoteOrDynamicCss && hackCss && typeof value === 'string') {\r\n                    value = addHoverClass(value, cache);\r\n                }\r\n                if ((isTextarea || isRemoteOrDynamicCss) && typeof value === 'string') {\r\n                    var child = doc.createTextNode(value);\r\n                    for (var _i = 0, _a = Array.from(node_1.childNodes); _i < _a.length; _i++) {\r\n                        var c = _a[_i];\r\n                        if (c.nodeType === node_1.TEXT_NODE) {\r\n                            node_1.removeChild(c);\r\n                        }\r\n                    }\r\n                    node_1.appendChild(child);\r\n                    continue;\r\n                }\r\n                try {\r\n                    if (n.isSVG && name_1 === 'xlink:href') {\r\n                        node_1.setAttributeNS('http://www.w3.org/1999/xlink', name_1, value.toString());\r\n                    }\r\n                    else if (name_1 === 'onload' ||\r\n                        name_1 === 'onclick' ||\r\n                        name_1.substring(0, 7) === 'onmouse') {\r\n                        node_1.setAttribute('_' + name_1, value.toString());\r\n                    }\r\n                    else if (tagName === 'meta' &&\r\n                        n.attributes['http-equiv'] === 'Content-Security-Policy' &&\r\n                        name_1 === 'content') {\r\n                        node_1.setAttribute('csp-content', value.toString());\r\n                        continue;\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        n.attributes.rel === 'preload' &&\r\n                        n.attributes.as === 'script') {\r\n                    }\r\n                    else if (tagName === 'link' &&\r\n                        n.attributes.rel === 'prefetch' &&\r\n                        typeof n.attributes.href === 'string' &&\r\n                        n.attributes.href.endsWith('.js')) {\r\n                    }\r\n                    else if (tagName === 'img' &&\r\n                        n.attributes.srcset &&\r\n                        n.attributes.rr_dataURL) {\r\n                        node_1.setAttribute('rrweb-original-srcset', n.attributes.srcset);\r\n                    }\r\n                    else {\r\n                        node_1.setAttribute(name_1, value.toString());\r\n                    }\r\n                }\r\n                catch (error) {\r\n                }\r\n            }\r\n            var _loop_1 = function (name_2) {\r\n                var value = specialAttributes[name_2];\r\n                if (tagName === 'canvas' && name_2 === 'rr_dataURL') {\r\n                    var image_1 = document.createElement('img');\r\n                    image_1.onload = function () {\r\n                        var ctx = node_1.getContext('2d');\r\n                        if (ctx) {\r\n                            ctx.drawImage(image_1, 0, 0, image_1.width, image_1.height);\r\n                        }\r\n                    };\r\n                    image_1.src = value.toString();\r\n                    if (node_1.RRNodeType)\r\n                        node_1.rr_dataURL = value.toString();\r\n                }\r\n                else if (tagName === 'img' && name_2 === 'rr_dataURL') {\r\n                    var image = node_1;\r\n                    if (!image.currentSrc.startsWith('data:')) {\r\n                        image.setAttribute('rrweb-original-src', n.attributes.src);\r\n                        image.src = value.toString();\r\n                    }\r\n                }\r\n                if (name_2 === 'rr_width') {\r\n                    node_1.style.width = value.toString();\r\n                }\r\n                else if (name_2 === 'rr_height') {\r\n                    node_1.style.height = value.toString();\r\n                }\r\n                else if (name_2 === 'rr_mediaCurrentTime' &&\r\n                    typeof value === 'number') {\r\n                    node_1.currentTime = value;\r\n                }\r\n                else if (name_2 === 'rr_mediaState') {\r\n                    switch (value) {\r\n                        case 'played':\r\n                            node_1\r\n                                .play()[\"catch\"](function (e) { return console.warn('media playback error', e); });\r\n                            break;\r\n                        case 'paused':\r\n                            node_1.pause();\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n            for (var name_2 in specialAttributes) {\r\n                _loop_1(name_2);\r\n            }\r\n            if (n.isShadowHost) {\r\n                if (!node_1.shadowRoot) {\r\n                    node_1.attachShadow({ mode: 'open' });\r\n                }\r\n                else {\r\n                    while (node_1.shadowRoot.firstChild) {\r\n                        node_1.shadowRoot.removeChild(node_1.shadowRoot.firstChild);\r\n                    }\r\n                }\r\n            }\r\n            return node_1;\r\n        }\r\n        case NodeType.Text:\r\n            return doc.createTextNode(n.isStyle && hackCss\r\n                ? addHoverClass(n.textContent, cache)\r\n                : n.textContent);\r\n        case NodeType.CDATA:\r\n            return doc.createCDATASection(n.textContent);\r\n        case NodeType.Comment:\r\n            return doc.createComment(n.textContent);\r\n        default:\r\n            return null;\r\n    }\r\n}\r\nfunction buildNodeWithSN(n, options) {\r\n    var doc = options.doc, mirror = options.mirror, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.hackCss, hackCss = _b === void 0 ? true : _b, afterAppend = options.afterAppend, cache = options.cache;\r\n    var node = buildNode(n, { doc: doc, hackCss: hackCss, cache: cache });\r\n    if (!node) {\r\n        return null;\r\n    }\r\n    if (n.rootId && mirror.getNode(n.rootId) !== doc) {\r\n        mirror.replace(n.rootId, doc);\r\n    }\r\n    if (n.type === NodeType.Document) {\r\n        doc.close();\r\n        doc.open();\r\n        if (n.compatMode === 'BackCompat' &&\r\n            n.childNodes &&\r\n            n.childNodes[0].type !== NodeType.DocumentType) {\r\n            if (n.childNodes[0].type === NodeType.Element &&\r\n                'xmlns' in n.childNodes[0].attributes &&\r\n                n.childNodes[0].attributes.xmlns === 'http://www.w3.org/1999/xhtml') {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"\">');\r\n            }\r\n            else {\r\n                doc.write('<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"\">');\r\n            }\r\n        }\r\n        node = doc;\r\n    }\r\n    mirror.add(node, n);\r\n    if ((n.type === NodeType.Document || n.type === NodeType.Element) &&\r\n        !skipChild) {\r\n        for (var _i = 0, _c = n.childNodes; _i < _c.length; _i++) {\r\n            var childN = _c[_i];\r\n            var childNode = buildNodeWithSN(childN, {\r\n                doc: doc,\r\n                mirror: mirror,\r\n                skipChild: false,\r\n                hackCss: hackCss,\r\n                afterAppend: afterAppend,\r\n                cache: cache\r\n            });\r\n            if (!childNode) {\r\n                console.warn('Failed to rebuild', childN);\r\n                continue;\r\n            }\r\n            if (childN.isShadow && isElement(node) && node.shadowRoot) {\r\n                node.shadowRoot.appendChild(childNode);\r\n            }\r\n            else {\r\n                node.appendChild(childNode);\r\n            }\r\n            if (afterAppend) {\r\n                afterAppend(childNode, childN.id);\r\n            }\r\n        }\r\n    }\r\n    return node;\r\n}\r\nfunction visit(mirror, onVisit) {\r\n    function walk(node) {\r\n        onVisit(node);\r\n    }\r\n    for (var _i = 0, _a = mirror.getIds(); _i < _a.length; _i++) {\r\n        var id = _a[_i];\r\n        if (mirror.has(id)) {\r\n            walk(mirror.getNode(id));\r\n        }\r\n    }\r\n}\r\nfunction handleScroll(node, mirror) {\r\n    var n = mirror.getMeta(node);\r\n    if ((n === null || n === void 0 ? void 0 : n.type) !== NodeType.Element) {\r\n        return;\r\n    }\r\n    var el = node;\r\n    for (var name_3 in n.attributes) {\r\n        if (!(Object.prototype.hasOwnProperty.call(n.attributes, name_3) &&\r\n            name_3.startsWith('rr_'))) {\r\n            continue;\r\n        }\r\n        var value = n.attributes[name_3];\r\n        if (name_3 === 'rr_scrollLeft') {\r\n            el.scrollLeft = value;\r\n        }\r\n        if (name_3 === 'rr_scrollTop') {\r\n            el.scrollTop = value;\r\n        }\r\n    }\r\n}\r\nfunction rebuild(n, options) {\r\n    var doc = options.doc, onVisit = options.onVisit, _a = options.hackCss, hackCss = _a === void 0 ? true : _a, afterAppend = options.afterAppend, cache = options.cache, _b = options.mirror, mirror = _b === void 0 ? new Mirror() : _b;\r\n    var node = buildNodeWithSN(n, {\r\n        doc: doc,\r\n        mirror: mirror,\r\n        skipChild: false,\r\n        hackCss: hackCss,\r\n        afterAppend: afterAppend,\r\n        cache: cache\r\n    });\r\n    visit(mirror, function (visitedNode) {\r\n        if (onVisit) {\r\n            onVisit(visitedNode);\r\n        }\r\n        handleScroll(visitedNode, mirror);\r\n    });\r\n    return node;\r\n}\n\nexport { IGNORED_NODE, Mirror, NodeType, addHoverClass, buildNodeWithSN, classMatchesRegex, createCache, createMirror, genId, getCssRuleString, getCssRulesString, is2DCanvasBlank, isCSSImportRule, isElement, isNativeShadowDom, isShadowRoot, maskInputValue, needMaskingText, rebuild, serializeNodeWithId, snapshot, transformAttribute };\n", "import { classMatchesRegex, IGNORED_NODE, isShadowRoot } from '../../rrweb-snapshot/es/rrweb-snapshot.js';\n\nfunction on(type, fn, target = document) {\r\n    const options = { capture: true, passive: true };\r\n    target.addEventListener(type, fn, options);\r\n    return () => target.removeEventListener(type, fn, options);\r\n}\r\nconst DEPARTED_MIRROR_ACCESS_WARNING = 'Please stop import mirror directly. Instead of that,' +\r\n    '\\r\\n' +\r\n    'now you can use replayer.getMirror() to access the mirror instance of a replayer,' +\r\n    '\\r\\n' +\r\n    'or you can use record.mirror to access the mirror instance during recording.';\r\nlet _mirror = {\r\n    map: {},\r\n    getId() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return -1;\r\n    },\r\n    getNode() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return null;\r\n    },\r\n    removeNodeFromMap() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n    has() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n        return false;\r\n    },\r\n    reset() {\r\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n    },\r\n};\r\nif (typeof window !== 'undefined' && window.Proxy && window.Reflect) {\r\n    _mirror = new Proxy(_mirror, {\r\n        get(target, prop, receiver) {\r\n            if (prop === 'map') {\r\n                console.error(DEPARTED_MIRROR_ACCESS_WARNING);\r\n            }\r\n            return Reflect.get(target, prop, receiver);\r\n        },\r\n    });\r\n}\r\nfunction throttle(func, wait, options = {}) {\r\n    let timeout = null;\r\n    let previous = 0;\r\n    return function (...args) {\r\n        const now = Date.now();\r\n        if (!previous && options.leading === false) {\r\n            previous = now;\r\n        }\r\n        const remaining = wait - (now - previous);\r\n        const context = this;\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous = now;\r\n            func.apply(context, args);\r\n        }\r\n        else if (!timeout && options.trailing !== false) {\r\n            timeout = setTimeout(() => {\r\n                previous = options.leading === false ? 0 : Date.now();\r\n                timeout = null;\r\n                func.apply(context, args);\r\n            }, remaining);\r\n        }\r\n    };\r\n}\r\nfunction hookSetter(target, key, d, isRevoked, win = window) {\r\n    const original = win.Object.getOwnPropertyDescriptor(target, key);\r\n    win.Object.defineProperty(target, key, isRevoked\r\n        ? d\r\n        : {\r\n            set(value) {\r\n                setTimeout(() => {\r\n                    d.set.call(this, value);\r\n                }, 0);\r\n                if (original && original.set) {\r\n                    original.set.call(this, value);\r\n                }\r\n            },\r\n        });\r\n    return () => hookSetter(target, key, original || {}, true);\r\n}\r\nfunction patch(source, name, replacement) {\r\n    try {\r\n        if (!(name in source)) {\r\n            return () => {\r\n            };\r\n        }\r\n        const original = source[name];\r\n        const wrapped = replacement(original);\r\n        if (typeof wrapped === 'function') {\r\n            wrapped.prototype = wrapped.prototype || {};\r\n            Object.defineProperties(wrapped, {\r\n                __rrweb_original__: {\r\n                    enumerable: false,\r\n                    value: original,\r\n                },\r\n            });\r\n        }\r\n        source[name] = wrapped;\r\n        return () => {\r\n            source[name] = original;\r\n        };\r\n    }\r\n    catch (_a) {\r\n        return () => {\r\n        };\r\n    }\r\n}\r\nfunction getWindowHeight() {\r\n    return (window.innerHeight ||\r\n        (document.documentElement && document.documentElement.clientHeight) ||\r\n        (document.body && document.body.clientHeight));\r\n}\r\nfunction getWindowWidth() {\r\n    return (window.innerWidth ||\r\n        (document.documentElement && document.documentElement.clientWidth) ||\r\n        (document.body && document.body.clientWidth));\r\n}\r\nfunction isBlocked(node, blockClass, blockSelector, checkAncestors) {\r\n    if (!node) {\r\n        return false;\r\n    }\r\n    const el = node.nodeType === node.ELEMENT_NODE\r\n        ? node\r\n        : node.parentElement;\r\n    if (!el)\r\n        return false;\r\n    if (typeof blockClass === 'string') {\r\n        if (el.classList.contains(blockClass))\r\n            return true;\r\n        if (checkAncestors && el.closest('.' + blockClass) !== null)\r\n            return true;\r\n    }\r\n    else {\r\n        if (classMatchesRegex(el, blockClass, checkAncestors))\r\n            return true;\r\n    }\r\n    if (blockSelector) {\r\n        if (node.matches(blockSelector))\r\n            return true;\r\n        if (checkAncestors && el.closest(blockSelector) !== null)\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSerialized(n, mirror) {\r\n    return mirror.getId(n) !== -1;\r\n}\r\nfunction isIgnored(n, mirror) {\r\n    return mirror.getId(n) === IGNORED_NODE;\r\n}\r\nfunction isAncestorRemoved(target, mirror) {\r\n    if (isShadowRoot(target)) {\r\n        return false;\r\n    }\r\n    const id = mirror.getId(target);\r\n    if (!mirror.has(id)) {\r\n        return true;\r\n    }\r\n    if (target.parentNode &&\r\n        target.parentNode.nodeType === target.DOCUMENT_NODE) {\r\n        return false;\r\n    }\r\n    if (!target.parentNode) {\r\n        return true;\r\n    }\r\n    return isAncestorRemoved(target.parentNode, mirror);\r\n}\r\nfunction isTouchEvent(event) {\r\n    return Boolean(event.changedTouches);\r\n}\r\nfunction polyfill(win = window) {\r\n    if ('NodeList' in win && !win.NodeList.prototype.forEach) {\r\n        win.NodeList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if ('DOMTokenList' in win && !win.DOMTokenList.prototype.forEach) {\r\n        win.DOMTokenList.prototype.forEach = Array.prototype\r\n            .forEach;\r\n    }\r\n    if (!Node.prototype.contains) {\r\n        Node.prototype.contains = (...args) => {\r\n            let node = args[0];\r\n            if (!(0 in args)) {\r\n                throw new TypeError('1 argument is required');\r\n            }\r\n            do {\r\n                if (this === node) {\r\n                    return true;\r\n                }\r\n            } while ((node = node && node.parentNode));\r\n            return false;\r\n        };\r\n    }\r\n}\r\nfunction queueToResolveTrees(queue) {\r\n    const queueNodeMap = {};\r\n    const putIntoMap = (m, parent) => {\r\n        const nodeInTree = {\r\n            value: m,\r\n            parent,\r\n            children: [],\r\n        };\r\n        queueNodeMap[m.node.id] = nodeInTree;\r\n        return nodeInTree;\r\n    };\r\n    const queueNodeTrees = [];\r\n    for (const mutation of queue) {\r\n        const { nextId, parentId } = mutation;\r\n        if (nextId && nextId in queueNodeMap) {\r\n            const nextInTree = queueNodeMap[nextId];\r\n            if (nextInTree.parent) {\r\n                const idx = nextInTree.parent.children.indexOf(nextInTree);\r\n                nextInTree.parent.children.splice(idx, 0, putIntoMap(mutation, nextInTree.parent));\r\n            }\r\n            else {\r\n                const idx = queueNodeTrees.indexOf(nextInTree);\r\n                queueNodeTrees.splice(idx, 0, putIntoMap(mutation, null));\r\n            }\r\n            continue;\r\n        }\r\n        if (parentId in queueNodeMap) {\r\n            const parentInTree = queueNodeMap[parentId];\r\n            parentInTree.children.push(putIntoMap(mutation, parentInTree));\r\n            continue;\r\n        }\r\n        queueNodeTrees.push(putIntoMap(mutation, null));\r\n    }\r\n    return queueNodeTrees;\r\n}\r\nfunction iterateResolveTree(tree, cb) {\r\n    cb(tree.value);\r\n    for (let i = tree.children.length - 1; i >= 0; i--) {\r\n        iterateResolveTree(tree.children[i], cb);\r\n    }\r\n}\r\nfunction isSerializedIframe(n, mirror) {\r\n    return Boolean(n.nodeName === 'IFRAME' && mirror.getMeta(n));\r\n}\r\nfunction isSerializedStylesheet(n, mirror) {\r\n    return Boolean(n.nodeName === 'LINK' &&\r\n        n.nodeType === n.ELEMENT_NODE &&\r\n        n.getAttribute &&\r\n        n.getAttribute('rel') === 'stylesheet' &&\r\n        mirror.getMeta(n));\r\n}\r\nfunction getBaseDimension(node, rootIframe) {\r\n    var _a, _b;\r\n    const frameElement = (_b = (_a = node.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) === null || _b === void 0 ? void 0 : _b.frameElement;\r\n    if (!frameElement || frameElement === rootIframe) {\r\n        return {\r\n            x: 0,\r\n            y: 0,\r\n            relativeScale: 1,\r\n            absoluteScale: 1,\r\n        };\r\n    }\r\n    const frameDimension = frameElement.getBoundingClientRect();\r\n    const frameBaseDimension = getBaseDimension(frameElement, rootIframe);\r\n    const relativeScale = frameDimension.height / frameElement.clientHeight;\r\n    return {\r\n        x: frameDimension.x * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.x,\r\n        y: frameDimension.y * frameBaseDimension.relativeScale +\r\n            frameBaseDimension.y,\r\n        relativeScale,\r\n        absoluteScale: frameBaseDimension.absoluteScale * relativeScale,\r\n    };\r\n}\r\nfunction hasShadowRoot(n) {\r\n    return Boolean(n === null || n === void 0 ? void 0 : n.shadowRoot);\r\n}\r\nfunction getNestedRule(rules, position) {\r\n    const rule = rules[position[0]];\r\n    if (position.length === 1) {\r\n        return rule;\r\n    }\r\n    else {\r\n        return getNestedRule(rule.cssRules[position[1]].cssRules, position.slice(2));\r\n    }\r\n}\r\nfunction getPositionsAndIndex(nestedIndex) {\r\n    const positions = [...nestedIndex];\r\n    const index = positions.pop();\r\n    return { positions, index };\r\n}\r\nfunction uniqueTextMutations(mutations) {\r\n    const idSet = new Set();\r\n    const uniqueMutations = [];\r\n    for (let i = mutations.length; i--;) {\r\n        const mutation = mutations[i];\r\n        if (!idSet.has(mutation.id)) {\r\n            uniqueMutations.push(mutation);\r\n            idSet.add(mutation.id);\r\n        }\r\n    }\r\n    return uniqueMutations;\r\n}\r\nclass StyleSheetMirror {\r\n    constructor() {\r\n        this.id = 1;\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n    }\r\n    getId(stylesheet) {\r\n        var _a;\r\n        return (_a = this.styleIDMap.get(stylesheet)) !== null && _a !== void 0 ? _a : -1;\r\n    }\r\n    has(stylesheet) {\r\n        return this.styleIDMap.has(stylesheet);\r\n    }\r\n    add(stylesheet, id) {\r\n        if (this.has(stylesheet))\r\n            return this.getId(stylesheet);\r\n        let newId;\r\n        if (id === undefined) {\r\n            newId = this.id++;\r\n        }\r\n        else\r\n            newId = id;\r\n        this.styleIDMap.set(stylesheet, newId);\r\n        this.idStyleMap.set(newId, stylesheet);\r\n        return newId;\r\n    }\r\n    getStyle(id) {\r\n        return this.idStyleMap.get(id) || null;\r\n    }\r\n    reset() {\r\n        this.styleIDMap = new WeakMap();\r\n        this.idStyleMap = new Map();\r\n        this.id = 1;\r\n    }\r\n    generateId() {\r\n        return this.id++;\r\n    }\r\n}\n\nexport { StyleSheetMirror, _mirror, getBaseDimension, getNestedRule, getPositionsAndIndex, getWindowHeight, getWindowWidth, hasShadowRoot, hookSetter, isAncestorRemoved, isBlocked, isIgnored, isSerialized, isSerializedIframe, isSerializedStylesheet, isTouchEvent, iterateResolveTree, on, patch, polyfill, queueToResolveTrees, throttle, uniqueTextMutations };\n", "var EventType = /* @__PURE__ */ ((EventType2) => {\n  EventType2[EventType2[\"DomContentLoaded\"] = 0] = \"DomContentLoaded\";\n  EventType2[EventType2[\"Load\"] = 1] = \"Load\";\n  EventType2[EventType2[\"FullSnapshot\"] = 2] = \"FullSnapshot\";\n  EventType2[EventType2[\"IncrementalSnapshot\"] = 3] = \"IncrementalSnapshot\";\n  EventType2[EventType2[\"Meta\"] = 4] = \"Meta\";\n  EventType2[EventType2[\"Custom\"] = 5] = \"Custom\";\n  EventType2[EventType2[\"Plugin\"] = 6] = \"Plugin\";\n  return EventType2;\n})(EventType || {});\nvar IncrementalSource = /* @__PURE__ */ ((IncrementalSource2) => {\n  IncrementalSource2[IncrementalSource2[\"Mutation\"] = 0] = \"Mutation\";\n  IncrementalSource2[IncrementalSource2[\"MouseMove\"] = 1] = \"MouseMove\";\n  IncrementalSource2[IncrementalSource2[\"MouseInteraction\"] = 2] = \"MouseInteraction\";\n  IncrementalSource2[IncrementalSource2[\"Scroll\"] = 3] = \"Scroll\";\n  IncrementalSource2[IncrementalSource2[\"ViewportResize\"] = 4] = \"ViewportResize\";\n  IncrementalSource2[IncrementalSource2[\"Input\"] = 5] = \"Input\";\n  IncrementalSource2[IncrementalSource2[\"TouchMove\"] = 6] = \"TouchMove\";\n  IncrementalSource2[IncrementalSource2[\"MediaInteraction\"] = 7] = \"MediaInteraction\";\n  IncrementalSource2[IncrementalSource2[\"StyleSheetRule\"] = 8] = \"StyleSheetRule\";\n  IncrementalSource2[IncrementalSource2[\"CanvasMutation\"] = 9] = \"CanvasMutation\";\n  IncrementalSource2[IncrementalSource2[\"Font\"] = 10] = \"Font\";\n  IncrementalSource2[IncrementalSource2[\"Log\"] = 11] = \"Log\";\n  IncrementalSource2[IncrementalSource2[\"Drag\"] = 12] = \"Drag\";\n  IncrementalSource2[IncrementalSource2[\"StyleDeclaration\"] = 13] = \"StyleDeclaration\";\n  IncrementalSource2[IncrementalSource2[\"Selection\"] = 14] = \"Selection\";\n  IncrementalSource2[IncrementalSource2[\"AdoptedStyleSheet\"] = 15] = \"AdoptedStyleSheet\";\n  return IncrementalSource2;\n})(IncrementalSource || {});\nvar MouseInteractions = /* @__PURE__ */ ((MouseInteractions2) => {\n  MouseInteractions2[MouseInteractions2[\"MouseUp\"] = 0] = \"MouseUp\";\n  MouseInteractions2[MouseInteractions2[\"MouseDown\"] = 1] = \"MouseDown\";\n  MouseInteractions2[MouseInteractions2[\"Click\"] = 2] = \"Click\";\n  MouseInteractions2[MouseInteractions2[\"ContextMenu\"] = 3] = \"ContextMenu\";\n  MouseInteractions2[MouseInteractions2[\"DblClick\"] = 4] = \"DblClick\";\n  MouseInteractions2[MouseInteractions2[\"Focus\"] = 5] = \"Focus\";\n  MouseInteractions2[MouseInteractions2[\"Blur\"] = 6] = \"Blur\";\n  MouseInteractions2[MouseInteractions2[\"TouchStart\"] = 7] = \"TouchStart\";\n  MouseInteractions2[MouseInteractions2[\"TouchMove_Departed\"] = 8] = \"TouchMove_Departed\";\n  MouseInteractions2[MouseInteractions2[\"TouchEnd\"] = 9] = \"TouchEnd\";\n  MouseInteractions2[MouseInteractions2[\"TouchCancel\"] = 10] = \"TouchCancel\";\n  return MouseInteractions2;\n})(MouseInteractions || {});\nvar CanvasContext = /* @__PURE__ */ ((CanvasContext2) => {\n  CanvasContext2[CanvasContext2[\"2D\"] = 0] = \"2D\";\n  CanvasContext2[CanvasContext2[\"WebGL\"] = 1] = \"WebGL\";\n  CanvasContext2[CanvasContext2[\"WebGL2\"] = 2] = \"WebGL2\";\n  return CanvasContext2;\n})(CanvasContext || {});\nvar ReplayerEvents = /* @__PURE__ */ ((ReplayerEvents2) => {\n  ReplayerEvents2[\"Start\"] = \"start\";\n  ReplayerEvents2[\"Pause\"] = \"pause\";\n  ReplayerEvents2[\"Resume\"] = \"resume\";\n  ReplayerEvents2[\"Resize\"] = \"resize\";\n  ReplayerEvents2[\"Finish\"] = \"finish\";\n  ReplayerEvents2[\"FullsnapshotRebuilded\"] = \"fullsnapshot-rebuilded\";\n  ReplayerEvents2[\"LoadStylesheetStart\"] = \"load-stylesheet-start\";\n  ReplayerEvents2[\"LoadStylesheetEnd\"] = \"load-stylesheet-end\";\n  ReplayerEvents2[\"SkipStart\"] = \"skip-start\";\n  ReplayerEvents2[\"SkipEnd\"] = \"skip-end\";\n  ReplayerEvents2[\"MouseInteraction\"] = \"mouse-interaction\";\n  ReplayerEvents2[\"EventCast\"] = \"event-cast\";\n  ReplayerEvents2[\"CustomEvent\"] = \"custom-event\";\n  ReplayerEvents2[\"Flush\"] = \"flush\";\n  ReplayerEvents2[\"StateChange\"] = \"state-change\";\n  ReplayerEvents2[\"PlayBack\"] = \"play-back\";\n  ReplayerEvents2[\"Destroy\"] = \"destroy\";\n  return ReplayerEvents2;\n})(ReplayerEvents || {});\n\nexport { CanvasContext, EventType, IncrementalSource, MouseInteractions, ReplayerEvents };\n", "/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nexport { __awaiter, __rest };\n", "/*\n * base64-arraybuffer 1.0.1 <https://github.com/niklasvh/base64-arraybuffer>\n * Copyright (c) 2021 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nvar encode = function (arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nvar decode = function (base64) {\n    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n\nexport { decode, encode };\n", "var WorkerClass = null;\n\ntry {\n    var WorkerThreads =\n        typeof module !== 'undefined' && typeof module.require === 'function' && module.require('worker_threads') ||\n        typeof __non_webpack_require__ === 'function' && __non_webpack_require__('worker_threads') ||\n        typeof require === 'function' && require('worker_threads');\n    WorkerClass = WorkerThreads.Worker;\n} catch(e) {} // eslint-disable-line\n\nexport { WorkerClass };\n", "import { WorkerClass } from './_rollup-plugin-web-worker-loader__helper__node__WorkerClass.js';\n\nfunction decodeBase64(base64, enableUnicode) {\n    return Buffer.from(base64, 'base64').toString(enableUnicode ? 'utf16' : 'utf8');\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    return function WorkerFactory(options) {\n        return new WorkerClass(body, Object.assign({}, options, { eval: true }));\n    };\n}\n\nexport { createBase64WorkerFactory };\n", "var kIsNodeJS = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n\nfunction isNodeJS() {\n    return kIsNodeJS;\n}\n\nexport { isNodeJS };\n", "import { createBase64WorkerFactory as createBase64WorkerFactory$1 } from './_rollup-plugin-web-worker-loader__helper__node__createBase64WorkerFactory.js';\nimport { createBase64WorkerFactory as createBase64WorkerFactory$2 } from './_rollup-plugin-web-worker-loader__helper__browser__createBase64WorkerFactory.js';\nimport { isNodeJS } from './_rollup-plugin-web-worker-loader__helper__auto__isNodeJS.js';\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    if (isNodeJS()) {\n        return createBase64WorkerFactory$1(base64, sourcemapArg, enableUnicodeArg);\n    }\n    return createBase64WorkerFactory$2(base64, sourcemapArg, enableUnicodeArg);\n}\n\nexport { createBase64WorkerFactory };\n", "var NodeType$1;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\r\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\r\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\r\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\r\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\r\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\r\n})(NodeType$1 || (NodeType$1 = {}));\nvar Mirror$1 = (function () {\r\n    function Mirror() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    Mirror.prototype.getId = function (n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        var id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    };\r\n    Mirror.prototype.getNode = function (id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    };\r\n    Mirror.prototype.getIds = function () {\r\n        return Array.from(this.idNodeMap.keys());\r\n    };\r\n    Mirror.prototype.getMeta = function (n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    };\r\n    Mirror.prototype.removeNodeFromMap = function (n) {\r\n        var _this = this;\r\n        var id = this.getId(n);\r\n        this.idNodeMap[\"delete\"](id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach(function (childNode) {\r\n                return _this.removeNodeFromMap(childNode);\r\n            });\r\n        }\r\n    };\r\n    Mirror.prototype.has = function (id) {\r\n        return this.idNodeMap.has(id);\r\n    };\r\n    Mirror.prototype.hasNode = function (node) {\r\n        return this.nodeMetaMap.has(node);\r\n    };\r\n    Mirror.prototype.add = function (n, meta) {\r\n        var id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    };\r\n    Mirror.prototype.replace = function (id, n) {\r\n        var oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            var meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    };\r\n    Mirror.prototype.reset = function () {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    };\r\n    return Mirror;\r\n}());\r\nfunction createMirror$1() {\r\n    return new Mirror$1();\r\n}\n\nfunction parseCSSText(cssText) {\r\n    const res = {};\r\n    const listDelimiter = /;(?![^(]*\\))/g;\r\n    const propertyDelimiter = /:(.+)/;\r\n    const comment = /\\/\\*.*?\\*\\//g;\r\n    cssText\r\n        .replace(comment, '')\r\n        .split(listDelimiter)\r\n        .forEach(function (item) {\r\n        if (item) {\r\n            const tmp = item.split(propertyDelimiter);\r\n            tmp.length > 1 && (res[camelize(tmp[0].trim())] = tmp[1].trim());\r\n        }\r\n    });\r\n    return res;\r\n}\r\nfunction toCSSText(style) {\r\n    const properties = [];\r\n    for (const name in style) {\r\n        const value = style[name];\r\n        if (typeof value !== 'string')\r\n            continue;\r\n        const normalizedName = hyphenate(name);\r\n        properties.push(`${normalizedName}: ${value};`);\r\n    }\r\n    return properties.join(' ');\r\n}\r\nconst camelizeRE = /-([a-z])/g;\r\nconst CUSTOM_PROPERTY_REGEX = /^--[a-zA-Z0-9-]+$/;\r\nconst camelize = (str) => {\r\n    if (CUSTOM_PROPERTY_REGEX.test(str))\r\n        return str;\r\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''));\r\n};\r\nconst hyphenateRE = /\\B([A-Z])/g;\r\nconst hyphenate = (str) => {\r\n    return str.replace(hyphenateRE, '-$1').toLowerCase();\r\n};\n\nclass BaseRRNode {\r\n    constructor(..._args) {\r\n        this.childNodes = [];\r\n        this.parentElement = null;\r\n        this.parentNode = null;\r\n        this.ELEMENT_NODE = NodeType.ELEMENT_NODE;\r\n        this.TEXT_NODE = NodeType.TEXT_NODE;\r\n    }\r\n    get firstChild() {\r\n        return this.childNodes[0] || null;\r\n    }\r\n    get lastChild() {\r\n        return this.childNodes[this.childNodes.length - 1] || null;\r\n    }\r\n    get nextSibling() {\r\n        const parentNode = this.parentNode;\r\n        if (!parentNode)\r\n            return null;\r\n        const siblings = parentNode.childNodes;\r\n        const index = siblings.indexOf(this);\r\n        return siblings[index + 1] || null;\r\n    }\r\n    contains(node) {\r\n        if (node === this)\r\n            return true;\r\n        for (const child of this.childNodes) {\r\n            if (child.contains(node))\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n    appendChild(_newChild) {\r\n        throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.`);\r\n    }\r\n    insertBefore(_newChild, _refChild) {\r\n        throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.`);\r\n    }\r\n    removeChild(_node) {\r\n        throw new Error(`RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.`);\r\n    }\r\n    toString() {\r\n        return 'RRNode';\r\n    }\r\n}\r\nfunction BaseRRDocumentImpl(RRNodeClass) {\r\n    return class BaseRRDocument extends RRNodeClass {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.nodeType = NodeType.DOCUMENT_NODE;\r\n            this.nodeName = '#document';\r\n            this.compatMode = 'CSS1Compat';\r\n            this.RRNodeType = NodeType$1.Document;\r\n            this.textContent = null;\r\n        }\r\n        get documentElement() {\r\n            return (this.childNodes.find((node) => node.RRNodeType === NodeType$1.Element &&\r\n                node.tagName === 'HTML') || null);\r\n        }\r\n        get body() {\r\n            var _a;\r\n            return (((_a = this.documentElement) === null || _a === void 0 ? void 0 : _a.childNodes.find((node) => node.RRNodeType === NodeType$1.Element &&\r\n                node.tagName === 'BODY')) || null);\r\n        }\r\n        get head() {\r\n            var _a;\r\n            return (((_a = this.documentElement) === null || _a === void 0 ? void 0 : _a.childNodes.find((node) => node.RRNodeType === NodeType$1.Element &&\r\n                node.tagName === 'HEAD')) || null);\r\n        }\r\n        get implementation() {\r\n            return this;\r\n        }\r\n        get firstElementChild() {\r\n            return this.documentElement;\r\n        }\r\n        appendChild(childNode) {\r\n            const nodeType = childNode.RRNodeType;\r\n            if (nodeType === NodeType$1.Element ||\r\n                nodeType === NodeType$1.DocumentType) {\r\n                if (this.childNodes.some((s) => s.RRNodeType === nodeType)) {\r\n                    throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${nodeType === NodeType$1.Element ? 'RRElement' : 'RRDoctype'} on RRDocument allowed.`);\r\n                }\r\n            }\r\n            childNode.parentElement = null;\r\n            childNode.parentNode = this;\r\n            this.childNodes.push(childNode);\r\n            return childNode;\r\n        }\r\n        insertBefore(newChild, refChild) {\r\n            const nodeType = newChild.RRNodeType;\r\n            if (nodeType === NodeType$1.Element ||\r\n                nodeType === NodeType$1.DocumentType) {\r\n                if (this.childNodes.some((s) => s.RRNodeType === nodeType)) {\r\n                    throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${nodeType === NodeType$1.Element ? 'RRElement' : 'RRDoctype'} on RRDocument allowed.`);\r\n                }\r\n            }\r\n            if (refChild === null)\r\n                return this.appendChild(newChild);\r\n            const childIndex = this.childNodes.indexOf(refChild);\r\n            if (childIndex == -1)\r\n                throw new Error(\"Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.\");\r\n            this.childNodes.splice(childIndex, 0, newChild);\r\n            newChild.parentElement = null;\r\n            newChild.parentNode = this;\r\n            return newChild;\r\n        }\r\n        removeChild(node) {\r\n            const indexOfChild = this.childNodes.indexOf(node);\r\n            if (indexOfChild === -1)\r\n                throw new Error(\"Failed to execute 'removeChild' on 'RRDocument': The RRNode to be removed is not a child of this RRNode.\");\r\n            this.childNodes.splice(indexOfChild, 1);\r\n            node.parentElement = null;\r\n            node.parentNode = null;\r\n            return node;\r\n        }\r\n        open() {\r\n            this.childNodes = [];\r\n        }\r\n        close() {\r\n        }\r\n        write(content) {\r\n            let publicId;\r\n            if (content ===\r\n                '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"\">')\r\n                publicId = '-//W3C//DTD XHTML 1.0 Transitional//EN';\r\n            else if (content ===\r\n                '<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"\">')\r\n                publicId = '-//W3C//DTD HTML 4.0 Transitional//EN';\r\n            if (publicId) {\r\n                const doctype = this.createDocumentType('html', publicId, '');\r\n                this.open();\r\n                this.appendChild(doctype);\r\n            }\r\n        }\r\n        createDocument(_namespace, _qualifiedName, _doctype) {\r\n            return new BaseRRDocument();\r\n        }\r\n        createDocumentType(qualifiedName, publicId, systemId) {\r\n            const doctype = new (BaseRRDocumentTypeImpl(BaseRRNode))(qualifiedName, publicId, systemId);\r\n            doctype.ownerDocument = this;\r\n            return doctype;\r\n        }\r\n        createElement(tagName) {\r\n            const element = new (BaseRRElementImpl(BaseRRNode))(tagName);\r\n            element.ownerDocument = this;\r\n            return element;\r\n        }\r\n        createElementNS(_namespaceURI, qualifiedName) {\r\n            return this.createElement(qualifiedName);\r\n        }\r\n        createTextNode(data) {\r\n            const text = new (BaseRRTextImpl(BaseRRNode))(data);\r\n            text.ownerDocument = this;\r\n            return text;\r\n        }\r\n        createComment(data) {\r\n            const comment = new (BaseRRCommentImpl(BaseRRNode))(data);\r\n            comment.ownerDocument = this;\r\n            return comment;\r\n        }\r\n        createCDATASection(data) {\r\n            const CDATASection = new (BaseRRCDATASectionImpl(BaseRRNode))(data);\r\n            CDATASection.ownerDocument = this;\r\n            return CDATASection;\r\n        }\r\n        toString() {\r\n            return 'RRDocument';\r\n        }\r\n    };\r\n}\r\nfunction BaseRRDocumentTypeImpl(RRNodeClass) {\r\n    return class BaseRRDocumentType extends RRNodeClass {\r\n        constructor(qualifiedName, publicId, systemId) {\r\n            super();\r\n            this.nodeType = NodeType.DOCUMENT_TYPE_NODE;\r\n            this.RRNodeType = NodeType$1.DocumentType;\r\n            this.textContent = null;\r\n            this.name = qualifiedName;\r\n            this.publicId = publicId;\r\n            this.systemId = systemId;\r\n            this.nodeName = qualifiedName;\r\n        }\r\n        toString() {\r\n            return 'RRDocumentType';\r\n        }\r\n    };\r\n}\r\nfunction BaseRRElementImpl(RRNodeClass) {\r\n    return class BaseRRElement extends RRNodeClass {\r\n        constructor(tagName) {\r\n            super();\r\n            this.nodeType = NodeType.ELEMENT_NODE;\r\n            this.RRNodeType = NodeType$1.Element;\r\n            this.attributes = {};\r\n            this.shadowRoot = null;\r\n            this.tagName = tagName.toUpperCase();\r\n            this.nodeName = tagName.toUpperCase();\r\n        }\r\n        get textContent() {\r\n            let result = '';\r\n            this.childNodes.forEach((node) => (result += node.textContent));\r\n            return result;\r\n        }\r\n        set textContent(textContent) {\r\n            this.childNodes = [this.ownerDocument.createTextNode(textContent)];\r\n        }\r\n        get classList() {\r\n            return new ClassList(this.attributes.class, (newClassName) => {\r\n                this.attributes.class = newClassName;\r\n            });\r\n        }\r\n        get id() {\r\n            return this.attributes.id || '';\r\n        }\r\n        get className() {\r\n            return this.attributes.class || '';\r\n        }\r\n        get style() {\r\n            const style = (this.attributes.style\r\n                ? parseCSSText(this.attributes.style)\r\n                : {});\r\n            const hyphenateRE = /\\B([A-Z])/g;\r\n            style.setProperty = (name, value, priority) => {\r\n                if (hyphenateRE.test(name))\r\n                    return;\r\n                const normalizedName = camelize(name);\r\n                if (!value)\r\n                    delete style[normalizedName];\r\n                else\r\n                    style[normalizedName] = value;\r\n                if (priority === 'important')\r\n                    style[normalizedName] += ' !important';\r\n                this.attributes.style = toCSSText(style);\r\n            };\r\n            style.removeProperty = (name) => {\r\n                if (hyphenateRE.test(name))\r\n                    return '';\r\n                const normalizedName = camelize(name);\r\n                const value = style[normalizedName] || '';\r\n                delete style[normalizedName];\r\n                this.attributes.style = toCSSText(style);\r\n                return value;\r\n            };\r\n            return style;\r\n        }\r\n        getAttribute(name) {\r\n            return this.attributes[name] || null;\r\n        }\r\n        setAttribute(name, attribute) {\r\n            this.attributes[name] = attribute;\r\n        }\r\n        setAttributeNS(_namespace, qualifiedName, value) {\r\n            this.setAttribute(qualifiedName, value);\r\n        }\r\n        removeAttribute(name) {\r\n            delete this.attributes[name];\r\n        }\r\n        appendChild(newChild) {\r\n            this.childNodes.push(newChild);\r\n            newChild.parentNode = this;\r\n            newChild.parentElement = this;\r\n            return newChild;\r\n        }\r\n        insertBefore(newChild, refChild) {\r\n            if (refChild === null)\r\n                return this.appendChild(newChild);\r\n            const childIndex = this.childNodes.indexOf(refChild);\r\n            if (childIndex == -1)\r\n                throw new Error(\"Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.\");\r\n            this.childNodes.splice(childIndex, 0, newChild);\r\n            newChild.parentElement = this;\r\n            newChild.parentNode = this;\r\n            return newChild;\r\n        }\r\n        removeChild(node) {\r\n            const indexOfChild = this.childNodes.indexOf(node);\r\n            if (indexOfChild === -1)\r\n                throw new Error(\"Failed to execute 'removeChild' on 'RRElement': The RRNode to be removed is not a child of this RRNode.\");\r\n            this.childNodes.splice(indexOfChild, 1);\r\n            node.parentElement = null;\r\n            node.parentNode = null;\r\n            return node;\r\n        }\r\n        attachShadow(_init) {\r\n            const shadowRoot = this.ownerDocument.createElement('SHADOWROOT');\r\n            this.shadowRoot = shadowRoot;\r\n            return shadowRoot;\r\n        }\r\n        dispatchEvent(_event) {\r\n            return true;\r\n        }\r\n        toString() {\r\n            let attributeString = '';\r\n            for (const attribute in this.attributes) {\r\n                attributeString += `${attribute}=\"${this.attributes[attribute]}\" `;\r\n            }\r\n            return `${this.tagName} ${attributeString}`;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRMediaElementImpl(RRElementClass) {\r\n    return class BaseRRMediaElement extends RRElementClass {\r\n        attachShadow(_init) {\r\n            throw new Error(`RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow`);\r\n        }\r\n        play() {\r\n            this.paused = false;\r\n        }\r\n        pause() {\r\n            this.paused = true;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRTextImpl(RRNodeClass) {\r\n    return class BaseRRText extends RRNodeClass {\r\n        constructor(data) {\r\n            super();\r\n            this.nodeType = NodeType.TEXT_NODE;\r\n            this.nodeName = '#text';\r\n            this.RRNodeType = NodeType$1.Text;\r\n            this.data = data;\r\n        }\r\n        get textContent() {\r\n            return this.data;\r\n        }\r\n        set textContent(textContent) {\r\n            this.data = textContent;\r\n        }\r\n        toString() {\r\n            return `RRText text=${JSON.stringify(this.data)}`;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRCommentImpl(RRNodeClass) {\r\n    return class BaseRRComment extends RRNodeClass {\r\n        constructor(data) {\r\n            super();\r\n            this.nodeType = NodeType.COMMENT_NODE;\r\n            this.nodeName = '#comment';\r\n            this.RRNodeType = NodeType$1.Comment;\r\n            this.data = data;\r\n        }\r\n        get textContent() {\r\n            return this.data;\r\n        }\r\n        set textContent(textContent) {\r\n            this.data = textContent;\r\n        }\r\n        toString() {\r\n            return `RRComment text=${JSON.stringify(this.data)}`;\r\n        }\r\n    };\r\n}\r\nfunction BaseRRCDATASectionImpl(RRNodeClass) {\r\n    return class BaseRRCDATASection extends RRNodeClass {\r\n        constructor(data) {\r\n            super();\r\n            this.nodeName = '#cdata-section';\r\n            this.nodeType = NodeType.CDATA_SECTION_NODE;\r\n            this.RRNodeType = NodeType$1.CDATA;\r\n            this.data = data;\r\n        }\r\n        get textContent() {\r\n            return this.data;\r\n        }\r\n        set textContent(textContent) {\r\n            this.data = textContent;\r\n        }\r\n        toString() {\r\n            return `RRCDATASection data=${JSON.stringify(this.data)}`;\r\n        }\r\n    };\r\n}\r\nclass ClassList {\r\n    constructor(classText, onChange) {\r\n        this.classes = [];\r\n        this.add = (...classNames) => {\r\n            for (const item of classNames) {\r\n                const className = String(item);\r\n                if (this.classes.indexOf(className) >= 0)\r\n                    continue;\r\n                this.classes.push(className);\r\n            }\r\n            this.onChange && this.onChange(this.classes.join(' '));\r\n        };\r\n        this.remove = (...classNames) => {\r\n            this.classes = this.classes.filter((item) => classNames.indexOf(item) === -1);\r\n            this.onChange && this.onChange(this.classes.join(' '));\r\n        };\r\n        if (classText) {\r\n            const classes = classText.trim().split(/\\s+/);\r\n            this.classes.push(...classes);\r\n        }\r\n        this.onChange = onChange;\r\n    }\r\n}\r\nvar NodeType;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"PLACEHOLDER\"] = 0] = \"PLACEHOLDER\";\r\n    NodeType[NodeType[\"ELEMENT_NODE\"] = 1] = \"ELEMENT_NODE\";\r\n    NodeType[NodeType[\"ATTRIBUTE_NODE\"] = 2] = \"ATTRIBUTE_NODE\";\r\n    NodeType[NodeType[\"TEXT_NODE\"] = 3] = \"TEXT_NODE\";\r\n    NodeType[NodeType[\"CDATA_SECTION_NODE\"] = 4] = \"CDATA_SECTION_NODE\";\r\n    NodeType[NodeType[\"ENTITY_REFERENCE_NODE\"] = 5] = \"ENTITY_REFERENCE_NODE\";\r\n    NodeType[NodeType[\"ENTITY_NODE\"] = 6] = \"ENTITY_NODE\";\r\n    NodeType[NodeType[\"PROCESSING_INSTRUCTION_NODE\"] = 7] = \"PROCESSING_INSTRUCTION_NODE\";\r\n    NodeType[NodeType[\"COMMENT_NODE\"] = 8] = \"COMMENT_NODE\";\r\n    NodeType[NodeType[\"DOCUMENT_NODE\"] = 9] = \"DOCUMENT_NODE\";\r\n    NodeType[NodeType[\"DOCUMENT_TYPE_NODE\"] = 10] = \"DOCUMENT_TYPE_NODE\";\r\n    NodeType[NodeType[\"DOCUMENT_FRAGMENT_NODE\"] = 11] = \"DOCUMENT_FRAGMENT_NODE\";\r\n})(NodeType || (NodeType = {}));\n\nconst NAMESPACES = {\r\n    svg: 'http://www.w3.org/2000/svg',\r\n    'xlink:href': 'http://www.w3.org/1999/xlink',\r\n    xmlns: 'http://www.w3.org/2000/xmlns/',\r\n};\r\nconst SVGTagMap = {\r\n    altglyph: 'altGlyph',\r\n    altglyphdef: 'altGlyphDef',\r\n    altglyphitem: 'altGlyphItem',\r\n    animatecolor: 'animateColor',\r\n    animatemotion: 'animateMotion',\r\n    animatetransform: 'animateTransform',\r\n    clippath: 'clipPath',\r\n    feblend: 'feBlend',\r\n    fecolormatrix: 'feColorMatrix',\r\n    fecomponenttransfer: 'feComponentTransfer',\r\n    fecomposite: 'feComposite',\r\n    feconvolvematrix: 'feConvolveMatrix',\r\n    fediffuselighting: 'feDiffuseLighting',\r\n    fedisplacementmap: 'feDisplacementMap',\r\n    fedistantlight: 'feDistantLight',\r\n    fedropshadow: 'feDropShadow',\r\n    feflood: 'feFlood',\r\n    fefunca: 'feFuncA',\r\n    fefuncb: 'feFuncB',\r\n    fefuncg: 'feFuncG',\r\n    fefuncr: 'feFuncR',\r\n    fegaussianblur: 'feGaussianBlur',\r\n    feimage: 'feImage',\r\n    femerge: 'feMerge',\r\n    femergenode: 'feMergeNode',\r\n    femorphology: 'feMorphology',\r\n    feoffset: 'feOffset',\r\n    fepointlight: 'fePointLight',\r\n    fespecularlighting: 'feSpecularLighting',\r\n    fespotlight: 'feSpotLight',\r\n    fetile: 'feTile',\r\n    feturbulence: 'feTurbulence',\r\n    foreignobject: 'foreignObject',\r\n    glyphref: 'glyphRef',\r\n    lineargradient: 'linearGradient',\r\n    radialgradient: 'radialGradient',\r\n};\r\nfunction diff(oldTree, newTree, replayer, rrnodeMirror) {\r\n    const oldChildren = oldTree.childNodes;\r\n    const newChildren = newTree.childNodes;\r\n    rrnodeMirror =\r\n        rrnodeMirror ||\r\n            newTree.mirror ||\r\n            newTree.ownerDocument.mirror;\r\n    if (oldChildren.length > 0 || newChildren.length > 0) {\r\n        diffChildren(Array.from(oldChildren), newChildren, oldTree, replayer, rrnodeMirror);\r\n    }\r\n    let inputDataToApply = null, scrollDataToApply = null;\r\n    switch (newTree.RRNodeType) {\r\n        case NodeType$1.Document: {\r\n            const newRRDocument = newTree;\r\n            scrollDataToApply = newRRDocument.scrollData;\r\n            break;\r\n        }\r\n        case NodeType$1.Element: {\r\n            const oldElement = oldTree;\r\n            const newRRElement = newTree;\r\n            diffProps(oldElement, newRRElement, rrnodeMirror);\r\n            scrollDataToApply = newRRElement.scrollData;\r\n            inputDataToApply = newRRElement.inputData;\r\n            switch (newRRElement.tagName) {\r\n                case 'AUDIO':\r\n                case 'VIDEO': {\r\n                    const oldMediaElement = oldTree;\r\n                    const newMediaRRElement = newRRElement;\r\n                    if (newMediaRRElement.paused !== undefined)\r\n                        newMediaRRElement.paused\r\n                            ? void oldMediaElement.pause()\r\n                            : void oldMediaElement.play();\r\n                    if (newMediaRRElement.muted !== undefined)\r\n                        oldMediaElement.muted = newMediaRRElement.muted;\r\n                    if (newMediaRRElement.volume !== undefined)\r\n                        oldMediaElement.volume = newMediaRRElement.volume;\r\n                    if (newMediaRRElement.currentTime !== undefined)\r\n                        oldMediaElement.currentTime = newMediaRRElement.currentTime;\r\n                    if (newMediaRRElement.playbackRate !== undefined)\r\n                        oldMediaElement.playbackRate = newMediaRRElement.playbackRate;\r\n                    break;\r\n                }\r\n                case 'CANVAS':\r\n                    {\r\n                        const rrCanvasElement = newTree;\r\n                        if (rrCanvasElement.rr_dataURL !== null) {\r\n                            const image = document.createElement('img');\r\n                            image.onload = () => {\r\n                                const ctx = oldElement.getContext('2d');\r\n                                if (ctx) {\r\n                                    ctx.drawImage(image, 0, 0, image.width, image.height);\r\n                                }\r\n                            };\r\n                            image.src = rrCanvasElement.rr_dataURL;\r\n                        }\r\n                        rrCanvasElement.canvasMutations.forEach((canvasMutation) => replayer.applyCanvas(canvasMutation.event, canvasMutation.mutation, oldTree));\r\n                    }\r\n                    break;\r\n                case 'STYLE':\r\n                    {\r\n                        const styleSheet = oldElement.sheet;\r\n                        styleSheet &&\r\n                            newTree.rules.forEach((data) => replayer.applyStyleSheetMutation(data, styleSheet));\r\n                    }\r\n                    break;\r\n            }\r\n            if (newRRElement.shadowRoot) {\r\n                if (!oldElement.shadowRoot)\r\n                    oldElement.attachShadow({ mode: 'open' });\r\n                const oldChildren = oldElement.shadowRoot.childNodes;\r\n                const newChildren = newRRElement.shadowRoot.childNodes;\r\n                if (oldChildren.length > 0 || newChildren.length > 0)\r\n                    diffChildren(Array.from(oldChildren), newChildren, oldElement.shadowRoot, replayer, rrnodeMirror);\r\n            }\r\n            break;\r\n        }\r\n        case NodeType$1.Text:\r\n        case NodeType$1.Comment:\r\n        case NodeType$1.CDATA:\r\n            if (oldTree.textContent !==\r\n                newTree.data)\r\n                oldTree.textContent = newTree.data;\r\n            break;\r\n    }\r\n    scrollDataToApply && replayer.applyScroll(scrollDataToApply, true);\r\n    inputDataToApply && replayer.applyInput(inputDataToApply);\r\n    if (newTree.nodeName === 'IFRAME') {\r\n        const oldContentDocument = oldTree.contentDocument;\r\n        const newIFrameElement = newTree;\r\n        if (oldContentDocument) {\r\n            const sn = rrnodeMirror.getMeta(newIFrameElement.contentDocument);\r\n            if (sn) {\r\n                replayer.mirror.add(oldContentDocument, Object.assign({}, sn));\r\n            }\r\n            diff(oldContentDocument, newIFrameElement.contentDocument, replayer, rrnodeMirror);\r\n        }\r\n    }\r\n}\r\nfunction diffProps(oldTree, newTree, rrnodeMirror) {\r\n    const oldAttributes = oldTree.attributes;\r\n    const newAttributes = newTree.attributes;\r\n    for (const name in newAttributes) {\r\n        const newValue = newAttributes[name];\r\n        const sn = rrnodeMirror.getMeta(newTree);\r\n        if (sn && 'isSVG' in sn && sn.isSVG && NAMESPACES[name])\r\n            oldTree.setAttributeNS(NAMESPACES[name], name, newValue);\r\n        else if (newTree.tagName === 'CANVAS' && name === 'rr_dataURL') {\r\n            const image = document.createElement('img');\r\n            image.src = newValue;\r\n            image.onload = () => {\r\n                const ctx = oldTree.getContext('2d');\r\n                if (ctx) {\r\n                    ctx.drawImage(image, 0, 0, image.width, image.height);\r\n                }\r\n            };\r\n        }\r\n        else\r\n            oldTree.setAttribute(name, newValue);\r\n    }\r\n    for (const { name } of Array.from(oldAttributes))\r\n        if (!(name in newAttributes))\r\n            oldTree.removeAttribute(name);\r\n    newTree.scrollLeft && (oldTree.scrollLeft = newTree.scrollLeft);\r\n    newTree.scrollTop && (oldTree.scrollTop = newTree.scrollTop);\r\n}\r\nfunction diffChildren(oldChildren, newChildren, parentNode, replayer, rrnodeMirror) {\r\n    var _a;\r\n    let oldStartIndex = 0, oldEndIndex = oldChildren.length - 1, newStartIndex = 0, newEndIndex = newChildren.length - 1;\r\n    let oldStartNode = oldChildren[oldStartIndex], oldEndNode = oldChildren[oldEndIndex], newStartNode = newChildren[newStartIndex], newEndNode = newChildren[newEndIndex];\r\n    let oldIdToIndex = undefined, indexInOld;\r\n    while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n        const oldStartId = replayer.mirror.getId(oldStartNode);\r\n        const oldEndId = replayer.mirror.getId(oldEndNode);\r\n        const newStartId = rrnodeMirror.getId(newStartNode);\r\n        const newEndId = rrnodeMirror.getId(newEndNode);\r\n        if (oldStartNode === undefined) {\r\n            oldStartNode = oldChildren[++oldStartIndex];\r\n        }\r\n        else if (oldEndNode === undefined) {\r\n            oldEndNode = oldChildren[--oldEndIndex];\r\n        }\r\n        else if (oldStartId !== -1 &&\r\n            oldStartId === newStartId) {\r\n            diff(oldStartNode, newStartNode, replayer, rrnodeMirror);\r\n            oldStartNode = oldChildren[++oldStartIndex];\r\n            newStartNode = newChildren[++newStartIndex];\r\n        }\r\n        else if (oldEndId !== -1 &&\r\n            oldEndId === newEndId) {\r\n            diff(oldEndNode, newEndNode, replayer, rrnodeMirror);\r\n            oldEndNode = oldChildren[--oldEndIndex];\r\n            newEndNode = newChildren[--newEndIndex];\r\n        }\r\n        else if (oldStartId !== -1 &&\r\n            oldStartId === newEndId) {\r\n            parentNode.insertBefore(oldStartNode, oldEndNode.nextSibling);\r\n            diff(oldStartNode, newEndNode, replayer, rrnodeMirror);\r\n            oldStartNode = oldChildren[++oldStartIndex];\r\n            newEndNode = newChildren[--newEndIndex];\r\n        }\r\n        else if (oldEndId !== -1 &&\r\n            oldEndId === newStartId) {\r\n            parentNode.insertBefore(oldEndNode, oldStartNode);\r\n            diff(oldEndNode, newStartNode, replayer, rrnodeMirror);\r\n            oldEndNode = oldChildren[--oldEndIndex];\r\n            newStartNode = newChildren[++newStartIndex];\r\n        }\r\n        else {\r\n            if (!oldIdToIndex) {\r\n                oldIdToIndex = {};\r\n                for (let i = oldStartIndex; i <= oldEndIndex; i++) {\r\n                    const oldChild = oldChildren[i];\r\n                    if (oldChild && replayer.mirror.hasNode(oldChild))\r\n                        oldIdToIndex[replayer.mirror.getId(oldChild)] = i;\r\n                }\r\n            }\r\n            indexInOld = oldIdToIndex[rrnodeMirror.getId(newStartNode)];\r\n            if (indexInOld) {\r\n                const nodeToMove = oldChildren[indexInOld];\r\n                parentNode.insertBefore(nodeToMove, oldStartNode);\r\n                diff(nodeToMove, newStartNode, replayer, rrnodeMirror);\r\n                oldChildren[indexInOld] = undefined;\r\n            }\r\n            else {\r\n                const newNode = createOrGetNode(newStartNode, replayer.mirror, rrnodeMirror);\r\n                if (parentNode.nodeName === '#document' &&\r\n                    ((_a = replayer.mirror.getMeta(newNode)) === null || _a === void 0 ? void 0 : _a.type) === NodeType$1.Element &&\r\n                    parentNode.documentElement) {\r\n                    parentNode.removeChild(parentNode.documentElement);\r\n                    oldChildren[oldStartIndex] = undefined;\r\n                    oldStartNode = undefined;\r\n                }\r\n                parentNode.insertBefore(newNode, oldStartNode || null);\r\n                diff(newNode, newStartNode, replayer, rrnodeMirror);\r\n            }\r\n            newStartNode = newChildren[++newStartIndex];\r\n        }\r\n    }\r\n    if (oldStartIndex > oldEndIndex) {\r\n        const referenceRRNode = newChildren[newEndIndex + 1];\r\n        let referenceNode = null;\r\n        if (referenceRRNode)\r\n            parentNode.childNodes.forEach((child) => {\r\n                if (replayer.mirror.getId(child) === rrnodeMirror.getId(referenceRRNode))\r\n                    referenceNode = child;\r\n            });\r\n        for (; newStartIndex <= newEndIndex; ++newStartIndex) {\r\n            const newNode = createOrGetNode(newChildren[newStartIndex], replayer.mirror, rrnodeMirror);\r\n            parentNode.insertBefore(newNode, referenceNode);\r\n            diff(newNode, newChildren[newStartIndex], replayer, rrnodeMirror);\r\n        }\r\n    }\r\n    else if (newStartIndex > newEndIndex) {\r\n        for (; oldStartIndex <= oldEndIndex; oldStartIndex++) {\r\n            const node = oldChildren[oldStartIndex];\r\n            if (node) {\r\n                parentNode.removeChild(node);\r\n                replayer.mirror.removeNodeFromMap(node);\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction createOrGetNode(rrNode, domMirror, rrnodeMirror) {\r\n    const nodeId = rrnodeMirror.getId(rrNode);\r\n    const sn = rrnodeMirror.getMeta(rrNode);\r\n    let node = null;\r\n    if (nodeId > -1)\r\n        node = domMirror.getNode(nodeId);\r\n    if (node !== null)\r\n        return node;\r\n    switch (rrNode.RRNodeType) {\r\n        case NodeType$1.Document:\r\n            node = new Document();\r\n            break;\r\n        case NodeType$1.DocumentType:\r\n            node = document.implementation.createDocumentType(rrNode.name, rrNode.publicId, rrNode.systemId);\r\n            break;\r\n        case NodeType$1.Element: {\r\n            let tagName = rrNode.tagName.toLowerCase();\r\n            tagName = SVGTagMap[tagName] || tagName;\r\n            if (sn && 'isSVG' in sn && (sn === null || sn === void 0 ? void 0 : sn.isSVG)) {\r\n                node = document.createElementNS(NAMESPACES['svg'], tagName);\r\n            }\r\n            else\r\n                node = document.createElement(rrNode.tagName);\r\n            break;\r\n        }\r\n        case NodeType$1.Text:\r\n            node = document.createTextNode(rrNode.data);\r\n            break;\r\n        case NodeType$1.Comment:\r\n            node = document.createComment(rrNode.data);\r\n            break;\r\n        case NodeType$1.CDATA:\r\n            node = document.createCDATASection(rrNode.data);\r\n            break;\r\n    }\r\n    if (sn)\r\n        domMirror.add(node, Object.assign({}, sn));\r\n    return node;\r\n}\n\nclass RRDocument extends BaseRRDocumentImpl(BaseRRNode) {\r\n    constructor(mirror) {\r\n        super();\r\n        this.UNSERIALIZED_STARTING_ID = -2;\r\n        this._unserializedId = this.UNSERIALIZED_STARTING_ID;\r\n        this.mirror = createMirror();\r\n        this.scrollData = null;\r\n        if (mirror) {\r\n            this.mirror = mirror;\r\n        }\r\n    }\r\n    get unserializedId() {\r\n        return this._unserializedId--;\r\n    }\r\n    createDocument(_namespace, _qualifiedName, _doctype) {\r\n        return new RRDocument();\r\n    }\r\n    createDocumentType(qualifiedName, publicId, systemId) {\r\n        const documentTypeNode = new RRDocumentType(qualifiedName, publicId, systemId);\r\n        documentTypeNode.ownerDocument = this;\r\n        return documentTypeNode;\r\n    }\r\n    createElement(tagName) {\r\n        const upperTagName = tagName.toUpperCase();\r\n        let element;\r\n        switch (upperTagName) {\r\n            case 'AUDIO':\r\n            case 'VIDEO':\r\n                element = new RRMediaElement(upperTagName);\r\n                break;\r\n            case 'IFRAME':\r\n                element = new RRIFrameElement(upperTagName, this.mirror);\r\n                break;\r\n            case 'CANVAS':\r\n                element = new RRCanvasElement(upperTagName);\r\n                break;\r\n            case 'STYLE':\r\n                element = new RRStyleElement(upperTagName);\r\n                break;\r\n            default:\r\n                element = new RRElement(upperTagName);\r\n                break;\r\n        }\r\n        element.ownerDocument = this;\r\n        return element;\r\n    }\r\n    createComment(data) {\r\n        const commentNode = new RRComment(data);\r\n        commentNode.ownerDocument = this;\r\n        return commentNode;\r\n    }\r\n    createCDATASection(data) {\r\n        const sectionNode = new RRCDATASection(data);\r\n        sectionNode.ownerDocument = this;\r\n        return sectionNode;\r\n    }\r\n    createTextNode(data) {\r\n        const textNode = new RRText(data);\r\n        textNode.ownerDocument = this;\r\n        return textNode;\r\n    }\r\n    destroyTree() {\r\n        this.childNodes = [];\r\n        this.mirror.reset();\r\n    }\r\n    open() {\r\n        super.open();\r\n        this._unserializedId = this.UNSERIALIZED_STARTING_ID;\r\n    }\r\n}\r\nconst RRDocumentType = BaseRRDocumentTypeImpl(BaseRRNode);\r\nclass RRElement extends BaseRRElementImpl(BaseRRNode) {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.inputData = null;\r\n        this.scrollData = null;\r\n    }\r\n}\r\nclass RRMediaElement extends BaseRRMediaElementImpl(RRElement) {\r\n}\r\nclass RRCanvasElement extends RRElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.rr_dataURL = null;\r\n        this.canvasMutations = [];\r\n    }\r\n    getContext() {\r\n        return null;\r\n    }\r\n}\r\nclass RRStyleElement extends RRElement {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.rules = [];\r\n    }\r\n}\r\nclass RRIFrameElement extends RRElement {\r\n    constructor(upperTagName, mirror) {\r\n        super(upperTagName);\r\n        this.contentDocument = new RRDocument();\r\n        this.contentDocument.mirror = mirror;\r\n    }\r\n}\r\nconst RRText = BaseRRTextImpl(BaseRRNode);\r\nconst RRComment = BaseRRCommentImpl(BaseRRNode);\r\nconst RRCDATASection = BaseRRCDATASectionImpl(BaseRRNode);\r\nfunction getValidTagName(element) {\r\n    if (element instanceof HTMLFormElement) {\r\n        return 'FORM';\r\n    }\r\n    return element.tagName.toUpperCase();\r\n}\r\nfunction buildFromNode(node, rrdom, domMirror, parentRRNode) {\r\n    let rrNode;\r\n    switch (node.nodeType) {\r\n        case NodeType.DOCUMENT_NODE:\r\n            if (parentRRNode && parentRRNode.nodeName === 'IFRAME')\r\n                rrNode = parentRRNode.contentDocument;\r\n            else {\r\n                rrNode = rrdom;\r\n                rrNode.compatMode = node.compatMode;\r\n            }\r\n            break;\r\n        case NodeType.DOCUMENT_TYPE_NODE: {\r\n            const documentType = node;\r\n            rrNode = rrdom.createDocumentType(documentType.name, documentType.publicId, documentType.systemId);\r\n            break;\r\n        }\r\n        case NodeType.ELEMENT_NODE: {\r\n            const elementNode = node;\r\n            const tagName = getValidTagName(elementNode);\r\n            rrNode = rrdom.createElement(tagName);\r\n            const rrElement = rrNode;\r\n            for (const { name, value } of Array.from(elementNode.attributes)) {\r\n                rrElement.attributes[name] = value;\r\n            }\r\n            elementNode.scrollLeft && (rrElement.scrollLeft = elementNode.scrollLeft);\r\n            elementNode.scrollTop && (rrElement.scrollTop = elementNode.scrollTop);\r\n            break;\r\n        }\r\n        case NodeType.TEXT_NODE:\r\n            rrNode = rrdom.createTextNode(node.textContent || '');\r\n            break;\r\n        case NodeType.CDATA_SECTION_NODE:\r\n            rrNode = rrdom.createCDATASection(node.data);\r\n            break;\r\n        case NodeType.COMMENT_NODE:\r\n            rrNode = rrdom.createComment(node.textContent || '');\r\n            break;\r\n        case NodeType.DOCUMENT_FRAGMENT_NODE:\r\n            rrNode = parentRRNode.attachShadow({ mode: 'open' });\r\n            break;\r\n        default:\r\n            return null;\r\n    }\r\n    let sn = domMirror.getMeta(node);\r\n    if (rrdom instanceof RRDocument) {\r\n        if (!sn) {\r\n            sn = getDefaultSN(rrNode, rrdom.unserializedId);\r\n            domMirror.add(node, sn);\r\n        }\r\n        rrdom.mirror.add(rrNode, Object.assign({}, sn));\r\n    }\r\n    return rrNode;\r\n}\r\nfunction buildFromDom(dom, domMirror = createMirror$1(), rrdom = new RRDocument()) {\r\n    function walk(node, parentRRNode) {\r\n        const rrNode = buildFromNode(node, rrdom, domMirror, parentRRNode);\r\n        if (rrNode === null)\r\n            return;\r\n        if ((parentRRNode === null || parentRRNode === void 0 ? void 0 : parentRRNode.nodeName) !== 'IFRAME' &&\r\n            node.nodeType !== NodeType.DOCUMENT_FRAGMENT_NODE) {\r\n            parentRRNode === null || parentRRNode === void 0 ? void 0 : parentRRNode.appendChild(rrNode);\r\n            rrNode.parentNode = parentRRNode;\r\n            rrNode.parentElement = parentRRNode;\r\n        }\r\n        if (node.nodeName === 'IFRAME') {\r\n            const iframeDoc = node.contentDocument;\r\n            iframeDoc && walk(iframeDoc, rrNode);\r\n        }\r\n        else if (node.nodeType === NodeType.DOCUMENT_NODE ||\r\n            node.nodeType === NodeType.ELEMENT_NODE ||\r\n            node.nodeType === NodeType.DOCUMENT_FRAGMENT_NODE) {\r\n            if (node.nodeType === NodeType.ELEMENT_NODE &&\r\n                node.shadowRoot)\r\n                walk(node.shadowRoot, rrNode);\r\n            node.childNodes.forEach((childNode) => walk(childNode, rrNode));\r\n        }\r\n    }\r\n    walk(dom, null);\r\n    return rrdom;\r\n}\r\nfunction createMirror() {\r\n    return new Mirror();\r\n}\r\nclass Mirror {\r\n    constructor() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n    getId(n) {\r\n        var _a;\r\n        if (!n)\r\n            return -1;\r\n        const id = (_a = this.getMeta(n)) === null || _a === void 0 ? void 0 : _a.id;\r\n        return id !== null && id !== void 0 ? id : -1;\r\n    }\r\n    getNode(id) {\r\n        return this.idNodeMap.get(id) || null;\r\n    }\r\n    getIds() {\r\n        return Array.from(this.idNodeMap.keys());\r\n    }\r\n    getMeta(n) {\r\n        return this.nodeMetaMap.get(n) || null;\r\n    }\r\n    removeNodeFromMap(n) {\r\n        const id = this.getId(n);\r\n        this.idNodeMap.delete(id);\r\n        if (n.childNodes) {\r\n            n.childNodes.forEach((childNode) => this.removeNodeFromMap(childNode));\r\n        }\r\n    }\r\n    has(id) {\r\n        return this.idNodeMap.has(id);\r\n    }\r\n    hasNode(node) {\r\n        return this.nodeMetaMap.has(node);\r\n    }\r\n    add(n, meta) {\r\n        const id = meta.id;\r\n        this.idNodeMap.set(id, n);\r\n        this.nodeMetaMap.set(n, meta);\r\n    }\r\n    replace(id, n) {\r\n        const oldNode = this.getNode(id);\r\n        if (oldNode) {\r\n            const meta = this.nodeMetaMap.get(oldNode);\r\n            if (meta)\r\n                this.nodeMetaMap.set(n, meta);\r\n        }\r\n        this.idNodeMap.set(id, n);\r\n    }\r\n    reset() {\r\n        this.idNodeMap = new Map();\r\n        this.nodeMetaMap = new WeakMap();\r\n    }\r\n}\r\nfunction getDefaultSN(node, id) {\r\n    switch (node.RRNodeType) {\r\n        case NodeType$1.Document:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                childNodes: [],\r\n            };\r\n        case NodeType$1.DocumentType: {\r\n            const doctype = node;\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                name: doctype.name,\r\n                publicId: doctype.publicId,\r\n                systemId: doctype.systemId,\r\n            };\r\n        }\r\n        case NodeType$1.Element:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                tagName: node.tagName.toLowerCase(),\r\n                attributes: {},\r\n                childNodes: [],\r\n            };\r\n        case NodeType$1.Text:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                textContent: node.textContent || '',\r\n            };\r\n        case NodeType$1.Comment:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                textContent: node.textContent || '',\r\n            };\r\n        case NodeType$1.CDATA:\r\n            return {\r\n                id,\r\n                type: node.RRNodeType,\r\n                textContent: '',\r\n            };\r\n    }\r\n}\n\nexport { BaseRRCDATASectionImpl, BaseRRCommentImpl, BaseRRDocumentImpl, BaseRRDocumentTypeImpl, BaseRRElementImpl, BaseRRMediaElementImpl, BaseRRNode, BaseRRTextImpl, ClassList, Mirror, NodeType, RRCDATASection, RRCanvasElement, RRComment, RRDocument, RRDocumentType, RRElement, RRIFrameElement, RRMediaElement, BaseRRNode as RRNode, RRStyleElement, RRText, buildFromDom, buildFromNode, createMirror, createOrGetNode, diff, getDefaultSN };\n", "import { createBase64WorkerFactory } from './_rollup-plugin-web-worker-loader__helper__auto__createBase64WorkerFactory.js';\n\nvar WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=', null, false);\n/* eslint-enable */\n\nexport { WorkerFactory as default };\n", "function decodeBase64(base64, enableUnicode) {\n    var binaryString = atob(base64);\n    if (enableUnicode) {\n        var binaryView = new Uint8Array(binaryString.length);\n        for (var i = 0, n = binaryString.length; i < n; ++i) {\n            binaryView[i] = binaryString.charCodeAt(i);\n        }\n        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));\n    }\n    return binaryString;\n}\n\nfunction createURL(base64, sourcemapArg, enableUnicodeArg) {\n    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;\n    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;\n    var source = decodeBase64(base64, enableUnicode);\n    var start = source.indexOf('\\n', 10) + 1;\n    var body = source.substring(start) + (sourcemap ? '\\/\\/# sourceMappingURL=' + sourcemap : '');\n    var blob = new Blob([body], { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\n\nfunction createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {\n    var url;\n    return function WorkerFactory(options) {\n        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);\n        return new Worker(url, options);\n    };\n}\n\nexport { createBase64WorkerFactory };\n", "import { createMirror, snapshot } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { initObservers, mutationBuffers } from './observer.js';\nimport { polyfill, on, getWindowWidth, getWindowHeight, isSerializedIframe, isSerializedStylesheet, hasShadowRoot } from '../utils.js';\nimport { EventType, IncrementalSource } from '../../../types/dist/types.js';\nimport { IframeManager } from './iframe-manager.js';\nimport { ShadowDomManager } from './shadow-dom-manager.js';\nimport { CanvasManager } from './observers/canvas/canvas-manager.js';\nimport { StylesheetManager } from './stylesheet-manager.js';\n\nfunction wrapEvent(e) {\r\n    return Object.assign(Object.assign({}, e), { timestamp: Date.now() });\r\n}\r\nlet wrappedEmit;\r\nlet takeFullSnapshot;\r\nlet canvasManager;\r\nlet recording = false;\r\nconst mirror = createMirror();\r\nfunction record(options = {}) {\r\n    const { emit, checkoutEveryNms, checkoutEveryNth, blockClass = 'rr-block', blockSelector = null, ignoreClass = 'rr-ignore', maskTextClass = 'rr-mask', maskTextSelector = null, inlineStylesheet = true, maskAllInputs, maskInputOptions: _maskInputOptions, slimDOMOptions: _slimDOMOptions, maskInputFn, maskTextFn, hooks, packFn, sampling = {}, dataURLOptions = {}, mousemoveWait, recordCanvas = false, recordCrossOriginIframes = false, userTriggeredOnInput = false, collectFonts = false, inlineImages = false, plugins, keepIframeSrcFn = () => false, ignoreCSSAttributes = new Set([]), } = options;\r\n    const inEmittingFrame = recordCrossOriginIframes\r\n        ? window.parent === window\r\n        : true;\r\n    let passEmitsToParent = false;\r\n    if (!inEmittingFrame) {\r\n        try {\r\n            window.parent.document;\r\n            passEmitsToParent = false;\r\n        }\r\n        catch (e) {\r\n            passEmitsToParent = true;\r\n        }\r\n    }\r\n    if (inEmittingFrame && !emit) {\r\n        throw new Error('emit function is required');\r\n    }\r\n    if (mousemoveWait !== undefined && sampling.mousemove === undefined) {\r\n        sampling.mousemove = mousemoveWait;\r\n    }\r\n    mirror.reset();\r\n    const maskInputOptions = maskAllInputs === true\r\n        ? {\r\n            color: true,\r\n            date: true,\r\n            'datetime-local': true,\r\n            email: true,\r\n            month: true,\r\n            number: true,\r\n            range: true,\r\n            search: true,\r\n            tel: true,\r\n            text: true,\r\n            time: true,\r\n            url: true,\r\n            week: true,\r\n            textarea: true,\r\n            select: true,\r\n            password: true,\r\n        }\r\n        : _maskInputOptions !== undefined\r\n            ? _maskInputOptions\r\n            : { password: true };\r\n    const slimDOMOptions = _slimDOMOptions === true || _slimDOMOptions === 'all'\r\n        ? {\r\n            script: true,\r\n            comment: true,\r\n            headFavicon: true,\r\n            headWhitespace: true,\r\n            headMetaSocial: true,\r\n            headMetaRobots: true,\r\n            headMetaHttpEquiv: true,\r\n            headMetaVerification: true,\r\n            headMetaAuthorship: _slimDOMOptions === 'all',\r\n            headMetaDescKeywords: _slimDOMOptions === 'all',\r\n        }\r\n        : _slimDOMOptions\r\n            ? _slimDOMOptions\r\n            : {};\r\n    polyfill();\r\n    let lastFullSnapshotEvent;\r\n    let incrementalSnapshotCount = 0;\r\n    const eventProcessor = (e) => {\r\n        for (const plugin of plugins || []) {\r\n            if (plugin.eventProcessor) {\r\n                e = plugin.eventProcessor(e);\r\n            }\r\n        }\r\n        if (packFn) {\r\n            e = packFn(e);\r\n        }\r\n        return e;\r\n    };\r\n    wrappedEmit = (e, isCheckout) => {\r\n        var _a;\r\n        if (((_a = mutationBuffers[0]) === null || _a === void 0 ? void 0 : _a.isFrozen()) &&\r\n            e.type !== EventType.FullSnapshot &&\r\n            !(e.type === EventType.IncrementalSnapshot &&\r\n                e.data.source === IncrementalSource.Mutation)) {\r\n            mutationBuffers.forEach((buf) => buf.unfreeze());\r\n        }\r\n        if (inEmittingFrame) {\r\n            emit === null || emit === void 0 ? void 0 : emit(eventProcessor(e), isCheckout);\r\n        }\r\n        else if (passEmitsToParent) {\r\n            const message = {\r\n                type: 'rrweb',\r\n                event: eventProcessor(e),\r\n                isCheckout,\r\n            };\r\n            window.parent.postMessage(message, '*');\r\n        }\r\n        if (e.type === EventType.FullSnapshot) {\r\n            lastFullSnapshotEvent = e;\r\n            incrementalSnapshotCount = 0;\r\n        }\r\n        else if (e.type === EventType.IncrementalSnapshot) {\r\n            if (e.data.source === IncrementalSource.Mutation &&\r\n                e.data.isAttachIframe) {\r\n                return;\r\n            }\r\n            incrementalSnapshotCount++;\r\n            const exceedCount = checkoutEveryNth && incrementalSnapshotCount >= checkoutEveryNth;\r\n            const exceedTime = checkoutEveryNms &&\r\n                e.timestamp - lastFullSnapshotEvent.timestamp > checkoutEveryNms;\r\n            if (exceedCount || exceedTime) {\r\n                takeFullSnapshot(true);\r\n            }\r\n        }\r\n    };\r\n    const wrappedMutationEmit = (m) => {\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.IncrementalSnapshot,\r\n            data: Object.assign({ source: IncrementalSource.Mutation }, m),\r\n        }));\r\n    };\r\n    const wrappedScrollEmit = (p) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.Scroll }, p),\r\n    }));\r\n    const wrappedCanvasMutationEmit = (p) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.CanvasMutation }, p),\r\n    }));\r\n    const wrappedAdoptedStyleSheetEmit = (a) => wrappedEmit(wrapEvent({\r\n        type: EventType.IncrementalSnapshot,\r\n        data: Object.assign({ source: IncrementalSource.AdoptedStyleSheet }, a),\r\n    }));\r\n    const stylesheetManager = new StylesheetManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        adoptedStyleSheetCb: wrappedAdoptedStyleSheetEmit,\r\n    });\r\n    const iframeManager = new IframeManager({\r\n        mirror,\r\n        mutationCb: wrappedMutationEmit,\r\n        stylesheetManager: stylesheetManager,\r\n        recordCrossOriginIframes,\r\n        wrappedEmit,\r\n    });\r\n    for (const plugin of plugins || []) {\r\n        if (plugin.getMirror)\r\n            plugin.getMirror({\r\n                nodeMirror: mirror,\r\n                crossOriginIframeMirror: iframeManager.crossOriginIframeMirror,\r\n                crossOriginIframeStyleMirror: iframeManager.crossOriginIframeStyleMirror,\r\n            });\r\n    }\r\n    canvasManager = new CanvasManager({\r\n        recordCanvas,\r\n        mutationCb: wrappedCanvasMutationEmit,\r\n        win: window,\r\n        blockClass,\r\n        blockSelector,\r\n        mirror,\r\n        sampling: sampling.canvas,\r\n        dataURLOptions,\r\n    });\r\n    const shadowDomManager = new ShadowDomManager({\r\n        mutationCb: wrappedMutationEmit,\r\n        scrollCb: wrappedScrollEmit,\r\n        bypassOptions: {\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskInputOptions,\r\n            dataURLOptions,\r\n            maskTextFn,\r\n            maskInputFn,\r\n            recordCanvas,\r\n            inlineImages,\r\n            sampling,\r\n            slimDOMOptions,\r\n            iframeManager,\r\n            stylesheetManager,\r\n            canvasManager,\r\n            keepIframeSrcFn,\r\n        },\r\n        mirror,\r\n    });\r\n    takeFullSnapshot = (isCheckout = false) => {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.Meta,\r\n            data: {\r\n                href: window.location.href,\r\n                width: getWindowWidth(),\r\n                height: getWindowHeight(),\r\n            },\r\n        }), isCheckout);\r\n        stylesheetManager.reset();\r\n        mutationBuffers.forEach((buf) => buf.lock());\r\n        const node = snapshot(document, {\r\n            mirror,\r\n            blockClass,\r\n            blockSelector,\r\n            maskTextClass,\r\n            maskTextSelector,\r\n            inlineStylesheet,\r\n            maskAllInputs: maskInputOptions,\r\n            maskTextFn,\r\n            slimDOM: slimDOMOptions,\r\n            dataURLOptions,\r\n            recordCanvas,\r\n            inlineImages,\r\n            onSerialize: (n) => {\r\n                if (isSerializedIframe(n, mirror)) {\r\n                    iframeManager.addIframe(n);\r\n                }\r\n                if (isSerializedStylesheet(n, mirror)) {\r\n                    stylesheetManager.trackLinkElement(n);\r\n                }\r\n                if (hasShadowRoot(n)) {\r\n                    shadowDomManager.addShadowRoot(n.shadowRoot, document);\r\n                }\r\n            },\r\n            onIframeLoad: (iframe, childSn) => {\r\n                iframeManager.attachIframe(iframe, childSn);\r\n                shadowDomManager.observeAttachShadow(iframe);\r\n            },\r\n            onStylesheetLoad: (linkEl, childSn) => {\r\n                stylesheetManager.attachLinkElement(linkEl, childSn);\r\n            },\r\n            keepIframeSrcFn,\r\n        });\r\n        if (!node) {\r\n            return console.warn('Failed to snapshot the document');\r\n        }\r\n        wrappedEmit(wrapEvent({\r\n            type: EventType.FullSnapshot,\r\n            data: {\r\n                node,\r\n                initialOffset: {\r\n                    left: window.pageXOffset !== undefined\r\n                        ? window.pageXOffset\r\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollLeft) ||\r\n                            ((_b = (_a = document === null || document === void 0 ? void 0 : document.body) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.scrollLeft) ||\r\n                            ((_c = document === null || document === void 0 ? void 0 : document.body) === null || _c === void 0 ? void 0 : _c.scrollLeft) ||\r\n                            0,\r\n                    top: window.pageYOffset !== undefined\r\n                        ? window.pageYOffset\r\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollTop) ||\r\n                            ((_e = (_d = document === null || document === void 0 ? void 0 : document.body) === null || _d === void 0 ? void 0 : _d.parentElement) === null || _e === void 0 ? void 0 : _e.scrollTop) ||\r\n                            ((_f = document === null || document === void 0 ? void 0 : document.body) === null || _f === void 0 ? void 0 : _f.scrollTop) ||\r\n                            0,\r\n                },\r\n            },\r\n        }));\r\n        mutationBuffers.forEach((buf) => buf.unlock());\r\n        if (document.adoptedStyleSheets && document.adoptedStyleSheets.length > 0)\r\n            stylesheetManager.adoptStyleSheets(document.adoptedStyleSheets, mirror.getId(document));\r\n    };\r\n    try {\r\n        const handlers = [];\r\n        handlers.push(on('DOMContentLoaded', () => {\r\n            wrappedEmit(wrapEvent({\r\n                type: EventType.DomContentLoaded,\r\n                data: {},\r\n            }));\r\n        }));\r\n        const observe = (doc) => {\r\n            var _a;\r\n            return initObservers({\r\n                mutationCb: wrappedMutationEmit,\r\n                mousemoveCb: (positions, source) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: {\r\n                        source,\r\n                        positions,\r\n                    },\r\n                })),\r\n                mouseInteractionCb: (d) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MouseInteraction }, d),\r\n                })),\r\n                scrollCb: wrappedScrollEmit,\r\n                viewportResizeCb: (d) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.ViewportResize }, d),\r\n                })),\r\n                inputCb: (v) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Input }, v),\r\n                })),\r\n                mediaInteractionCb: (p) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.MediaInteraction }, p),\r\n                })),\r\n                styleSheetRuleCb: (r) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleSheetRule }, r),\r\n                })),\r\n                styleDeclarationCb: (r) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.StyleDeclaration }, r),\r\n                })),\r\n                canvasMutationCb: wrappedCanvasMutationEmit,\r\n                fontCb: (p) => wrappedEmit(wrapEvent({\r\n                    type: EventType.IncrementalSnapshot,\r\n                    data: Object.assign({ source: IncrementalSource.Font }, p),\r\n                })),\r\n                selectionCb: (p) => {\r\n                    wrappedEmit(wrapEvent({\r\n                        type: EventType.IncrementalSnapshot,\r\n                        data: Object.assign({ source: IncrementalSource.Selection }, p),\r\n                    }));\r\n                },\r\n                blockClass,\r\n                ignoreClass,\r\n                maskTextClass,\r\n                maskTextSelector,\r\n                maskInputOptions,\r\n                inlineStylesheet,\r\n                sampling,\r\n                recordCanvas,\r\n                inlineImages,\r\n                userTriggeredOnInput,\r\n                collectFonts,\r\n                doc,\r\n                maskInputFn,\r\n                maskTextFn,\r\n                keepIframeSrcFn,\r\n                blockSelector,\r\n                slimDOMOptions,\r\n                dataURLOptions,\r\n                mirror,\r\n                iframeManager,\r\n                stylesheetManager,\r\n                shadowDomManager,\r\n                canvasManager,\r\n                ignoreCSSAttributes,\r\n                plugins: ((_a = plugins === null || plugins === void 0 ? void 0 : plugins.filter((p) => p.observer)) === null || _a === void 0 ? void 0 : _a.map((p) => ({\r\n                    observer: p.observer,\r\n                    options: p.options,\r\n                    callback: (payload) => wrappedEmit(wrapEvent({\r\n                        type: EventType.Plugin,\r\n                        data: {\r\n                            plugin: p.name,\r\n                            payload,\r\n                        },\r\n                    })),\r\n                }))) || [],\r\n            }, hooks);\r\n        };\r\n        iframeManager.addLoadListener((iframeEl) => {\r\n            handlers.push(observe(iframeEl.contentDocument));\r\n        });\r\n        const init = () => {\r\n            takeFullSnapshot();\r\n            handlers.push(observe(document));\r\n            recording = true;\r\n        };\r\n        if (document.readyState === 'interactive' ||\r\n            document.readyState === 'complete') {\r\n            init();\r\n        }\r\n        else {\r\n            handlers.push(on('load', () => {\r\n                wrappedEmit(wrapEvent({\r\n                    type: EventType.Load,\r\n                    data: {},\r\n                }));\r\n                init();\r\n            }, window));\r\n        }\r\n        return () => {\r\n            handlers.forEach((h) => h());\r\n            recording = false;\r\n        };\r\n    }\r\n    catch (error) {\r\n        console.warn(error);\r\n    }\r\n}\r\nrecord.addCustomEvent = (tag, payload) => {\r\n    if (!recording) {\r\n        throw new Error('please add custom event after start recording');\r\n    }\r\n    wrappedEmit(wrapEvent({\r\n        type: EventType.Custom,\r\n        data: {\r\n            tag,\r\n            payload,\r\n        },\r\n    }));\r\n};\r\nrecord.freezePage = () => {\r\n    mutationBuffers.forEach((buf) => buf.freeze());\r\n};\r\nrecord.takeFullSnapshot = (isCheckout) => {\r\n    if (!recording) {\r\n        throw new Error('please take full snapshot after start recording');\r\n    }\r\n    takeFullSnapshot(isCheckout);\r\n};\r\nrecord.mirror = mirror;\n\nexport { record as default };\n", "// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i)\n            co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8)) >>> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >>> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) >> 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                if (!noSt && pos + tl * (clb + 7) > tbts)\n                    break;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts)\n                throw 'unexpected EOF';\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var mxa = lbt + dbt + 18;\n        while (noSt || pos + mxa < tbts) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts)\n                throw 'unexpected EOF';\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts)\n                    throw 'unexpected EOF';\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = pos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [new u8(0), 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.floor(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768\n            var imod = i & 32767;\n            // previous index with this value\n            var pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst)\n            pos = wfblk(w, pos, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 5552, l);\n                for (; i < e; ++i)\n                    n += d[i], m += n;\n                n %= 65521, m %= 65521;\n            }\n            a = n, b = m;\n        },\n        d: function () { return ((a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8)) + ((a & 255) << 23) * 2; }\n    };\n};\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nfunction zlibSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nfunction unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nfunction strToU8(str, latin1) {\n    var l = str.length;\n    if (!latin1 && typeof TextEncoder != 'undefined')\n        return new TextEncoder().encode(str);\n    var ar = new u8(str.length + (str.length >>> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >>> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >>> 18)), w(128 | ((c >>> 12) & 63)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >>> 12)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nfunction strFromU8(dat, latin1) {\n    var r = '';\n    if (!latin1 && typeof TextDecoder != 'undefined')\n        return new TextDecoder().decode(dat);\n    for (var i = 0; i < dat.length;) {\n        var c = dat[i++];\n        if (c < 128 || latin1)\n            r += String.fromCharCode(c);\n        else if (c < 224)\n            r += String.fromCharCode((c & 31) << 6 | (dat[i++] & 63));\n        else if (c < 240)\n            r += String.fromCharCode((c & 15) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63));\n        else\n            c = ((c & 15) << 18 | (dat[i++] & 63) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n    }\n    return r;\n}\n\nexport { strFromU8, strToU8, unzlibSync, zlibSync };\n", "const MARK = 'v1';\n\nexport { MARK };\n", "import { strFromU8, unzlibSync, strToU8 } from './../../../../ext/fflate/esm/browser.js';\nimport { MARK } from './base.js';\n\nconst unpack = (raw) => {\r\n    if (typeof raw !== 'string') {\r\n        return raw;\r\n    }\r\n    try {\r\n        const e = JSON.parse(raw);\r\n        if (e.timestamp) {\r\n            return e;\r\n        }\r\n    }\r\n    catch (error) {\r\n    }\r\n    try {\r\n        const e = JSON.parse(strFromU8(unzlibSync(strToU8(raw, true))));\r\n        if (e.v === MARK) {\r\n            return e;\r\n        }\r\n        throw new Error(`These events were packed with packer ${e.v} which is incompatible with current packer ${MARK}.`);\r\n    }\r\n    catch (error) {\r\n        console.error(error);\r\n        throw new Error('Unknown data format.');\r\n    }\r\n};\n\nexport { unpack };\n", "function mitt(n){return {all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e]);},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]));},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e);}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e);});}}}\n\nexport { mitt as default };\n", "/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nfunction t(t,n){var e=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,o,i=e.call(t),a=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)a.push(r.value);}catch(t){o={error:t};}finally{try{r&&!r.done&&(e=i.return)&&e.call(i);}finally{if(o)throw o.error}}return a}var n;!function(t){t[t.NotStarted=0]=\"NotStarted\",t[t.Running=1]=\"Running\",t[t.Stopped=2]=\"Stopped\";}(n||(n={}));var e={type:\"xstate.init\"};function r(t){return void 0===t?[]:[].concat(t)}function o(t){return {type:\"xstate.assign\",assignment:t}}function i(t,n){return \"string\"==typeof(t=\"string\"==typeof t&&n&&n[t]?n[t]:t)?{type:t}:\"function\"==typeof t?{type:t.name,exec:t}:t}function a(t){return function(n){return t===n}}function u(t){return \"string\"==typeof t?{type:t}:t}function c(t,n){return {value:t,context:n,actions:[],changed:!1,matches:a(t)}}function f(t,n,e){var r=n,o=!1;return [t.filter((function(t){if(\"xstate.assign\"===t.type){o=!0;var n=Object.assign({},r);return \"function\"==typeof t.assignment?n=t.assignment(r,e):Object.keys(t.assignment).forEach((function(o){n[o]=\"function\"==typeof t.assignment[o]?t.assignment[o](r,e):t.assignment[o];})),r=n,!1}return !0})),r,o]}function s(n,o){void 0===o&&(o={});var s=t(f(r(n.states[n.initial].entry).map((function(t){return i(t,o.actions)})),n.context,e),2),l=s[0],v=s[1],y={config:n,_options:o,initialState:{value:n.initial,actions:l,context:v,matches:a(n.initial)},transition:function(e,o){var s,l,v=\"string\"==typeof e?{value:e,context:n.context}:e,p=v.value,g=v.context,d=u(o),x=n.states[p];if(x.on){var m=r(x.on[d.type]);try{for(var h=function(t){var n=\"function\"==typeof Symbol&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&\"number\"==typeof t.length)return {next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}(m),b=h.next();!b.done;b=h.next()){var S=b.value;if(void 0===S)return c(p,g);var w=\"string\"==typeof S?{target:S}:S,j=w.target,E=w.actions,R=void 0===E?[]:E,N=w.cond,O=void 0===N?function(){return !0}:N,_=void 0===j,k=null!=j?j:p,T=n.states[k];if(O(g,d)){var q=t(f((_?r(R):[].concat(x.exit,R,T.entry).filter((function(t){return t}))).map((function(t){return i(t,y._options.actions)})),g,d),3),z=q[0],A=q[1],B=q[2],C=null!=j?j:p;return {value:C,context:A,actions:z,changed:j!==p||z.length>0||B,matches:a(C)}}}}catch(t){s={error:t};}finally{try{b&&!b.done&&(l=h.return)&&l.call(h);}finally{if(s)throw s.error}}}return c(p,g)}};return y}var l=function(t,n){return t.actions.forEach((function(e){var r=e.exec;return r&&r(t.context,n)}))};function v(t){var r=t.initialState,o=n.NotStarted,i=new Set,c={_machine:t,send:function(e){o===n.Running&&(r=t.transition(r,e),l(r,u(e)),i.forEach((function(t){return t(r)})));},subscribe:function(t){return i.add(t),t(r),{unsubscribe:function(){return i.delete(t)}}},start:function(i){if(i){var u=\"object\"==typeof i?i:{context:t.config.context,value:i};r={value:u.value,actions:[],context:u.context,matches:a(u.value)};}return o=n.Running,l(r,e),c},stop:function(){return o=n.Stopped,i.clear(),c},get state(){return r},get status(){return o}};return c}\n\nexport { n as InterpreterStatus, o as assign, s as createMachine, v as interpret };\n", "function polyfill(w = window, d = document) {\r\n    if ('scrollBehavior' in d.documentElement.style &&\r\n        w.__forceSmoothScrollPolyfill__ !== true) {\r\n        return;\r\n    }\r\n    const Element = w.HTMLElement || w.Element;\r\n    const SCROLL_TIME = 468;\r\n    const original = {\r\n        scroll: w.scroll || w.scrollTo,\r\n        scrollBy: w.scrollBy,\r\n        elementScroll: Element.prototype.scroll || scrollElement,\r\n        scrollIntoView: Element.prototype.scrollIntoView,\r\n    };\r\n    const now = w.performance && w.performance.now\r\n        ? w.performance.now.bind(w.performance)\r\n        : Date.now;\r\n    function isMicrosoftBrowser(userAgent) {\r\n        const userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\r\n        return new RegExp(userAgentPatterns.join('|')).test(userAgent);\r\n    }\r\n    const ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\r\n    function scrollElement(x, y) {\r\n        this.scrollLeft = x;\r\n        this.scrollTop = y;\r\n    }\r\n    function ease(k) {\r\n        return 0.5 * (1 - Math.cos(Math.PI * k));\r\n    }\r\n    function shouldBailOut(firstArg) {\r\n        if (firstArg === null ||\r\n            typeof firstArg !== 'object' ||\r\n            firstArg.behavior === undefined ||\r\n            firstArg.behavior === 'auto' ||\r\n            firstArg.behavior === 'instant') {\r\n            return true;\r\n        }\r\n        if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\r\n            return false;\r\n        }\r\n        throw new TypeError('behavior member of ScrollOptions ' +\r\n            firstArg.behavior +\r\n            ' is not a valid value for enumeration ScrollBehavior.');\r\n    }\r\n    function hasScrollableSpace(el, axis) {\r\n        if (axis === 'Y') {\r\n            return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\r\n        }\r\n        if (axis === 'X') {\r\n            return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\r\n        }\r\n    }\r\n    function canOverflow(el, axis) {\r\n        const overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\r\n        return overflowValue === 'auto' || overflowValue === 'scroll';\r\n    }\r\n    function isScrollable(el) {\r\n        const isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\r\n        const isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\r\n        return isScrollableY || isScrollableX;\r\n    }\r\n    function findScrollableParent(el) {\r\n        while (el !== d.body && isScrollable(el) === false) {\r\n            el = el.parentNode || el.host;\r\n        }\r\n        return el;\r\n    }\r\n    function step(context) {\r\n        const time = now();\r\n        let value;\r\n        let currentX;\r\n        let currentY;\r\n        let elapsed = (time - context.startTime) / SCROLL_TIME;\r\n        elapsed = elapsed > 1 ? 1 : elapsed;\r\n        value = ease(elapsed);\r\n        currentX = context.startX + (context.x - context.startX) * value;\r\n        currentY = context.startY + (context.y - context.startY) * value;\r\n        context.method.call(context.scrollable, currentX, currentY);\r\n        if (currentX !== context.x || currentY !== context.y) {\r\n            w.requestAnimationFrame(step.bind(w, context));\r\n        }\r\n    }\r\n    function smoothScroll(el, x, y) {\r\n        let scrollable;\r\n        let startX;\r\n        let startY;\r\n        let method;\r\n        const startTime = now();\r\n        if (el === d.body) {\r\n            scrollable = w;\r\n            startX = w.scrollX || w.pageXOffset;\r\n            startY = w.scrollY || w.pageYOffset;\r\n            method = original.scroll;\r\n        }\r\n        else {\r\n            scrollable = el;\r\n            startX = el.scrollLeft;\r\n            startY = el.scrollTop;\r\n            method = scrollElement;\r\n        }\r\n        step({\r\n            scrollable: scrollable,\r\n            method: method,\r\n            startTime: startTime,\r\n            startX: startX,\r\n            startY: startY,\r\n            x: x,\r\n            y: y,\r\n        });\r\n    }\r\n    w.scroll = w.scrollTo = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            original.scroll.call(w, arguments[0].left !== undefined\r\n                ? arguments[0].left\r\n                : typeof arguments[0] !== 'object'\r\n                    ? arguments[0]\r\n                    : w.scrollX || w.pageXOffset, arguments[0].top !== undefined\r\n                ? arguments[0].top\r\n                : arguments[1] !== undefined\r\n                    ? arguments[1]\r\n                    : w.scrollY || w.pageYOffset);\r\n            return;\r\n        }\r\n        smoothScroll.call(w, d.body, arguments[0].left !== undefined\r\n            ? ~~arguments[0].left\r\n            : w.scrollX || w.pageXOffset, arguments[0].top !== undefined\r\n            ? ~~arguments[0].top\r\n            : w.scrollY || w.pageYOffset);\r\n    };\r\n    w.scrollBy = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0])) {\r\n            original.scrollBy.call(w, arguments[0].left !== undefined\r\n                ? arguments[0].left\r\n                : typeof arguments[0] !== 'object'\r\n                    ? arguments[0]\r\n                    : 0, arguments[0].top !== undefined\r\n                ? arguments[0].top\r\n                : arguments[1] !== undefined\r\n                    ? arguments[1]\r\n                    : 0);\r\n            return;\r\n        }\r\n        smoothScroll.call(w, d.body, ~~arguments[0].left + (w.scrollX || w.pageXOffset), ~~arguments[0].top + (w.scrollY || w.pageYOffset));\r\n    };\r\n    Element.prototype.scroll = Element.prototype.scrollTo = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\r\n                throw new SyntaxError('Value could not be converted');\r\n            }\r\n            original.elementScroll.call(this, arguments[0].left !== undefined\r\n                ? ~~arguments[0].left\r\n                : typeof arguments[0] !== 'object'\r\n                    ? ~~arguments[0]\r\n                    : this.scrollLeft, arguments[0].top !== undefined\r\n                ? ~~arguments[0].top\r\n                : arguments[1] !== undefined\r\n                    ? ~~arguments[1]\r\n                    : this.scrollTop);\r\n            return;\r\n        }\r\n        const left = arguments[0].left;\r\n        const top = arguments[0].top;\r\n        smoothScroll.call(this, this, typeof left === 'undefined' ? this.scrollLeft : ~~left, typeof top === 'undefined' ? this.scrollTop : ~~top);\r\n    };\r\n    Element.prototype.scrollBy = function () {\r\n        if (arguments[0] === undefined) {\r\n            return;\r\n        }\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            original.elementScroll.call(this, arguments[0].left !== undefined\r\n                ? ~~arguments[0].left + this.scrollLeft\r\n                : ~~arguments[0] + this.scrollLeft, arguments[0].top !== undefined\r\n                ? ~~arguments[0].top + this.scrollTop\r\n                : ~~arguments[1] + this.scrollTop);\r\n            return;\r\n        }\r\n        this.scroll({\r\n            left: ~~arguments[0].left + this.scrollLeft,\r\n            top: ~~arguments[0].top + this.scrollTop,\r\n            behavior: arguments[0].behavior,\r\n        });\r\n    };\r\n    Element.prototype.scrollIntoView = function () {\r\n        if (shouldBailOut(arguments[0]) === true) {\r\n            original.scrollIntoView.call(this, arguments[0] === undefined ? true : arguments[0]);\r\n            return;\r\n        }\r\n        const scrollableParent = findScrollableParent(this);\r\n        const parentRects = scrollableParent.getBoundingClientRect();\r\n        const clientRects = this.getBoundingClientRect();\r\n        if (scrollableParent !== d.body) {\r\n            smoothScroll.call(this, scrollableParent, scrollableParent.scrollLeft + clientRects.left - parentRects.left, scrollableParent.scrollTop + clientRects.top - parentRects.top);\r\n            if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\r\n                w.scrollBy({\r\n                    left: parentRects.left,\r\n                    top: parentRects.top,\r\n                    behavior: 'smooth',\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            w.scrollBy({\r\n                left: clientRects.left,\r\n                top: clientRects.top,\r\n                behavior: 'smooth',\r\n            });\r\n        }\r\n    };\r\n}\n\nexport { polyfill };\n", "import { EventType, IncrementalSource } from '../../../types/dist/types.js';\n\nclass Timer {\r\n    constructor(actions = [], config) {\r\n        this.timeOffset = 0;\r\n        this.raf = null;\r\n        this.actions = actions;\r\n        this.speed = config.speed;\r\n        this.liveMode = config.liveMode;\r\n    }\r\n    addAction(action) {\r\n        if (!this.actions.length ||\r\n            this.actions[this.actions.length - 1].delay <= action.delay) {\r\n            this.actions.push(action);\r\n            return;\r\n        }\r\n        const index = this.findActionIndex(action);\r\n        this.actions.splice(index, 0, action);\r\n    }\r\n    start() {\r\n        this.timeOffset = 0;\r\n        let lastTimestamp = performance.now();\r\n        const check = () => {\r\n            const time = performance.now();\r\n            this.timeOffset += (time - lastTimestamp) * this.speed;\r\n            lastTimestamp = time;\r\n            while (this.actions.length) {\r\n                const action = this.actions[0];\r\n                if (this.timeOffset >= action.delay) {\r\n                    this.actions.shift();\r\n                    action.doAction();\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            if (this.actions.length > 0 || this.liveMode) {\r\n                this.raf = requestAnimationFrame(check);\r\n            }\r\n        };\r\n        this.raf = requestAnimationFrame(check);\r\n    }\r\n    clear() {\r\n        if (this.raf) {\r\n            cancelAnimationFrame(this.raf);\r\n            this.raf = null;\r\n        }\r\n        this.actions.length = 0;\r\n    }\r\n    setSpeed(speed) {\r\n        this.speed = speed;\r\n    }\r\n    toggleLiveMode(mode) {\r\n        this.liveMode = mode;\r\n    }\r\n    isActive() {\r\n        return this.raf !== null;\r\n    }\r\n    findActionIndex(action) {\r\n        let start = 0;\r\n        let end = this.actions.length - 1;\r\n        while (start <= end) {\r\n            const mid = Math.floor((start + end) / 2);\r\n            if (this.actions[mid].delay < action.delay) {\r\n                start = mid + 1;\r\n            }\r\n            else if (this.actions[mid].delay > action.delay) {\r\n                end = mid - 1;\r\n            }\r\n            else {\r\n                return mid + 1;\r\n            }\r\n        }\r\n        return start;\r\n    }\r\n}\r\nfunction addDelay(event, baselineTime) {\r\n    if (event.type === EventType.IncrementalSnapshot &&\r\n        event.data.source === IncrementalSource.MouseMove &&\r\n        event.data.positions &&\r\n        event.data.positions.length) {\r\n        const firstOffset = event.data.positions[0].timeOffset;\r\n        const firstTimestamp = event.timestamp + firstOffset;\r\n        event.delay = firstTimestamp - baselineTime;\r\n        return firstTimestamp - baselineTime;\r\n    }\r\n    event.delay = event.timestamp - baselineTime;\r\n    return event.delay;\r\n}\n\nexport { Timer, addDelay };\n", "import { interpret as v, createMachine as s, assign as o } from './../../../../ext/@xstate/fsm/es/index.js';\nimport { EventType, IncrementalSource, ReplayerEvents } from '../../../types/dist/types.js';\nimport { addDelay } from './timer.js';\n\nfunction discardPriorSnapshots(events, baselineTime) {\r\n    for (let idx = events.length - 1; idx >= 0; idx--) {\r\n        const event = events[idx];\r\n        if (event.type === EventType.Meta) {\r\n            if (event.timestamp <= baselineTime) {\r\n                return events.slice(idx);\r\n            }\r\n        }\r\n    }\r\n    return events;\r\n}\r\nfunction createPlayerService(context, { getCastFn, applyEventsSynchronously, emitter }) {\r\n    const playerMachine = s({\r\n        id: 'player',\r\n        context,\r\n        initial: 'paused',\r\n        states: {\r\n            playing: {\r\n                on: {\r\n                    PAUSE: {\r\n                        target: 'paused',\r\n                        actions: ['pause'],\r\n                    },\r\n                    CAST_EVENT: {\r\n                        target: 'playing',\r\n                        actions: 'castEvent',\r\n                    },\r\n                    END: {\r\n                        target: 'paused',\r\n                        actions: ['resetLastPlayedEvent', 'pause'],\r\n                    },\r\n                    ADD_EVENT: {\r\n                        target: 'playing',\r\n                        actions: ['addEvent'],\r\n                    },\r\n                },\r\n            },\r\n            paused: {\r\n                on: {\r\n                    PLAY: {\r\n                        target: 'playing',\r\n                        actions: ['recordTimeOffset', 'play'],\r\n                    },\r\n                    CAST_EVENT: {\r\n                        target: 'paused',\r\n                        actions: 'castEvent',\r\n                    },\r\n                    TO_LIVE: {\r\n                        target: 'live',\r\n                        actions: ['startLive'],\r\n                    },\r\n                    ADD_EVENT: {\r\n                        target: 'paused',\r\n                        actions: ['addEvent'],\r\n                    },\r\n                },\r\n            },\r\n            live: {\r\n                on: {\r\n                    ADD_EVENT: {\r\n                        target: 'live',\r\n                        actions: ['addEvent'],\r\n                    },\r\n                    CAST_EVENT: {\r\n                        target: 'live',\r\n                        actions: ['castEvent'],\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    }, {\r\n        actions: {\r\n            castEvent: o({\r\n                lastPlayedEvent: (ctx, event) => {\r\n                    if (event.type === 'CAST_EVENT') {\r\n                        return event.payload.event;\r\n                    }\r\n                    return ctx.lastPlayedEvent;\r\n                },\r\n            }),\r\n            recordTimeOffset: o((ctx, event) => {\r\n                let timeOffset = ctx.timeOffset;\r\n                if ('payload' in event && 'timeOffset' in event.payload) {\r\n                    timeOffset = event.payload.timeOffset;\r\n                }\r\n                return Object.assign(Object.assign({}, ctx), { timeOffset, baselineTime: ctx.events[0].timestamp + timeOffset });\r\n            }),\r\n            play(ctx) {\r\n                var _a;\r\n                const { timer, events, baselineTime, lastPlayedEvent } = ctx;\r\n                timer.clear();\r\n                for (const event of events) {\r\n                    addDelay(event, baselineTime);\r\n                }\r\n                const neededEvents = discardPriorSnapshots(events, baselineTime);\r\n                let lastPlayedTimestamp = lastPlayedEvent === null || lastPlayedEvent === void 0 ? void 0 : lastPlayedEvent.timestamp;\r\n                if ((lastPlayedEvent === null || lastPlayedEvent === void 0 ? void 0 : lastPlayedEvent.type) === EventType.IncrementalSnapshot &&\r\n                    lastPlayedEvent.data.source === IncrementalSource.MouseMove) {\r\n                    lastPlayedTimestamp =\r\n                        lastPlayedEvent.timestamp +\r\n                            ((_a = lastPlayedEvent.data.positions[0]) === null || _a === void 0 ? void 0 : _a.timeOffset);\r\n                }\r\n                if (baselineTime < (lastPlayedTimestamp || 0)) {\r\n                    emitter.emit(ReplayerEvents.PlayBack);\r\n                }\r\n                const syncEvents = new Array();\r\n                for (const event of neededEvents) {\r\n                    if (lastPlayedTimestamp &&\r\n                        lastPlayedTimestamp < baselineTime &&\r\n                        (event.timestamp <= lastPlayedTimestamp ||\r\n                            event === lastPlayedEvent)) {\r\n                        continue;\r\n                    }\r\n                    if (event.timestamp < baselineTime) {\r\n                        syncEvents.push(event);\r\n                    }\r\n                    else {\r\n                        const castFn = getCastFn(event, false);\r\n                        timer.addAction({\r\n                            doAction: () => {\r\n                                castFn();\r\n                            },\r\n                            delay: event.delay,\r\n                        });\r\n                    }\r\n                }\r\n                applyEventsSynchronously(syncEvents);\r\n                emitter.emit(ReplayerEvents.Flush);\r\n                timer.start();\r\n            },\r\n            pause(ctx) {\r\n                ctx.timer.clear();\r\n            },\r\n            resetLastPlayedEvent: o((ctx) => {\r\n                return Object.assign(Object.assign({}, ctx), { lastPlayedEvent: null });\r\n            }),\r\n            startLive: o({\r\n                baselineTime: (ctx, event) => {\r\n                    ctx.timer.toggleLiveMode(true);\r\n                    ctx.timer.start();\r\n                    if (event.type === 'TO_LIVE' && event.payload.baselineTime) {\r\n                        return event.payload.baselineTime;\r\n                    }\r\n                    return Date.now();\r\n                },\r\n            }),\r\n            addEvent: o((ctx, machineEvent) => {\r\n                const { baselineTime, timer, events } = ctx;\r\n                if (machineEvent.type === 'ADD_EVENT') {\r\n                    const { event } = machineEvent.payload;\r\n                    addDelay(event, baselineTime);\r\n                    let end = events.length - 1;\r\n                    if (!events[end] || events[end].timestamp <= event.timestamp) {\r\n                        events.push(event);\r\n                    }\r\n                    else {\r\n                        let insertionIndex = -1;\r\n                        let start = 0;\r\n                        while (start <= end) {\r\n                            const mid = Math.floor((start + end) / 2);\r\n                            if (events[mid].timestamp <= event.timestamp) {\r\n                                start = mid + 1;\r\n                            }\r\n                            else {\r\n                                end = mid - 1;\r\n                            }\r\n                        }\r\n                        if (insertionIndex === -1) {\r\n                            insertionIndex = start;\r\n                        }\r\n                        events.splice(insertionIndex, 0, event);\r\n                    }\r\n                    const isSync = event.timestamp < baselineTime;\r\n                    const castFn = getCastFn(event, isSync);\r\n                    if (isSync) {\r\n                        castFn();\r\n                    }\r\n                    else if (timer.isActive()) {\r\n                        timer.addAction({\r\n                            doAction: () => {\r\n                                castFn();\r\n                            },\r\n                            delay: event.delay,\r\n                        });\r\n                    }\r\n                }\r\n                return Object.assign(Object.assign({}, ctx), { events });\r\n            }),\r\n        },\r\n    });\r\n    return v(playerMachine);\r\n}\r\nfunction createSpeedService(context) {\r\n    const speedMachine = s({\r\n        id: 'speed',\r\n        context,\r\n        initial: 'normal',\r\n        states: {\r\n            normal: {\r\n                on: {\r\n                    FAST_FORWARD: {\r\n                        target: 'skipping',\r\n                        actions: ['recordSpeed', 'setSpeed'],\r\n                    },\r\n                    SET_SPEED: {\r\n                        target: 'normal',\r\n                        actions: ['setSpeed'],\r\n                    },\r\n                },\r\n            },\r\n            skipping: {\r\n                on: {\r\n                    BACK_TO_NORMAL: {\r\n                        target: 'normal',\r\n                        actions: ['restoreSpeed'],\r\n                    },\r\n                    SET_SPEED: {\r\n                        target: 'normal',\r\n                        actions: ['setSpeed'],\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    }, {\r\n        actions: {\r\n            setSpeed: (ctx, event) => {\r\n                if ('payload' in event) {\r\n                    ctx.timer.setSpeed(event.payload.speed);\r\n                }\r\n            },\r\n            recordSpeed: o({\r\n                normalSpeed: (ctx) => ctx.timer.speed,\r\n            }),\r\n            restoreSpeed: (ctx) => {\r\n                ctx.timer.setSpeed(ctx.normalSpeed);\r\n            },\r\n        },\r\n    });\r\n    return v(speedMachine);\r\n}\n\nexport { createPlayerService, createSpeedService, discardPriorSnapshots };\n", "const rules = (blockClass) => [\r\n    `.${blockClass} { background: currentColor }`,\r\n    'noscript { display: none !important; }',\r\n];\n\nexport { rules as default };\n", "import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { decode } from './../../../../../ext/base64-arraybuffer/dist/base64-arraybuffer.es5.js';\n\nconst webGLVarMap = new Map();\r\nfunction variableListFor(ctx, ctor) {\r\n    let contextMap = webGLVarMap.get(ctx);\r\n    if (!contextMap) {\r\n        contextMap = new Map();\r\n        webGLVarMap.set(ctx, contextMap);\r\n    }\r\n    if (!contextMap.has(ctor)) {\r\n        contextMap.set(ctor, []);\r\n    }\r\n    return contextMap.get(ctor);\r\n}\r\nfunction deserializeArg(imageMap, ctx, preload) {\r\n    return (arg) => __awaiter(this, void 0, void 0, function* () {\r\n        if (arg && typeof arg === 'object' && 'rr_type' in arg) {\r\n            if (preload)\r\n                preload.isUnchanged = false;\r\n            if (arg.rr_type === 'ImageBitmap' && 'args' in arg) {\r\n                const args = yield deserializeArg(imageMap, ctx, preload)(arg.args);\r\n                return yield createImageBitmap.apply(null, args);\r\n            }\r\n            else if ('index' in arg) {\r\n                if (preload || ctx === null)\r\n                    return arg;\r\n                const { rr_type: name, index } = arg;\r\n                return variableListFor(ctx, name)[index];\r\n            }\r\n            else if ('args' in arg) {\r\n                const { rr_type: name, args } = arg;\r\n                const ctor = window[name];\r\n                return new ctor(...(yield Promise.all(args.map(deserializeArg(imageMap, ctx, preload)))));\r\n            }\r\n            else if ('base64' in arg) {\r\n                return decode(arg.base64);\r\n            }\r\n            else if ('src' in arg) {\r\n                const image = imageMap.get(arg.src);\r\n                if (image) {\r\n                    return image;\r\n                }\r\n                else {\r\n                    const image = new Image();\r\n                    image.src = arg.src;\r\n                    imageMap.set(arg.src, image);\r\n                    return image;\r\n                }\r\n            }\r\n            else if ('data' in arg && arg.rr_type === 'Blob') {\r\n                const blobContents = yield Promise.all(arg.data.map(deserializeArg(imageMap, ctx, preload)));\r\n                const blob = new Blob(blobContents, {\r\n                    type: arg.type,\r\n                });\r\n                return blob;\r\n            }\r\n        }\r\n        else if (Array.isArray(arg)) {\r\n            const result = yield Promise.all(arg.map(deserializeArg(imageMap, ctx, preload)));\r\n            return result;\r\n        }\r\n        return arg;\r\n    });\r\n}\n\nexport { deserializeArg, variableListFor };\n", "import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../../types/dist/types.js';\nimport { deserializeArg, variableListFor } from './deserialize-args.js';\n\nfunction getContext(target, type) {\r\n    try {\r\n        if (type === CanvasContext.WebGL) {\r\n            return (target.getContext('webgl') || target.getContext('experimental-webgl'));\r\n        }\r\n        return target.getContext('webgl2');\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\nconst WebGLVariableConstructorsNames = [\r\n    'WebGLActiveInfo',\r\n    'WebGLBuffer',\r\n    'WebGLFramebuffer',\r\n    'WebGLProgram',\r\n    'WebGLRenderbuffer',\r\n    'WebGLShader',\r\n    'WebGLShaderPrecisionFormat',\r\n    'WebGLTexture',\r\n    'WebGLUniformLocation',\r\n    'WebGLVertexArrayObject',\r\n];\r\nfunction saveToWebGLVarMap(ctx, result) {\r\n    if (!(result === null || result === void 0 ? void 0 : result.constructor))\r\n        return;\r\n    const { name } = result.constructor;\r\n    if (!WebGLVariableConstructorsNames.includes(name))\r\n        return;\r\n    const variables = variableListFor(ctx, name);\r\n    if (!variables.includes(result))\r\n        variables.push(result);\r\n}\r\nfunction webglMutation({ mutation, target, type, imageMap, errorHandler, }) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const ctx = getContext(target, type);\r\n            if (!ctx)\r\n                return;\r\n            if (mutation.setter) {\r\n                ctx[mutation.property] = mutation.args[0];\r\n                return;\r\n            }\r\n            const original = ctx[mutation.property];\r\n            const args = yield Promise.all(mutation.args.map(deserializeArg(imageMap, ctx)));\r\n            const result = original.apply(ctx, args);\r\n            saveToWebGLVarMap(ctx, result);\r\n            const debugMode = false;\r\n            if (debugMode) ;\r\n        }\r\n        catch (error) {\r\n            errorHandler(mutation, error);\r\n        }\r\n    });\r\n}\n\nexport { webglMutation as default };\n", "import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { deserializeArg } from './deserialize-args.js';\n\nfunction canvasMutation({ event, mutation, target, imageMap, errorHandler, }) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const ctx = target.getContext('2d');\r\n            if (mutation.setter) {\r\n                ctx[mutation.property] =\r\n                    mutation.args[0];\r\n                return;\r\n            }\r\n            const original = ctx[mutation.property];\r\n            if (mutation.property === 'drawImage' &&\r\n                typeof mutation.args[0] === 'string') {\r\n                imageMap.get(event);\r\n                original.apply(ctx, mutation.args);\r\n            }\r\n            else {\r\n                const args = yield Promise.all(mutation.args.map(deserializeArg(imageMap, ctx)));\r\n                original.apply(ctx, args);\r\n            }\r\n        }\r\n        catch (error) {\r\n            errorHandler(mutation, error);\r\n        }\r\n    });\r\n}\n\nexport { canvasMutation as default };\n", "import { __awaiter } from './../../../../../ext/tslib/tslib.es6.js';\nimport { CanvasContext } from '../../../../types/dist/types.js';\nimport webglMutation from './webgl.js';\nimport canvasMutation$1 from './2d.js';\n\nfunction canvasMutation({ event, mutation, target, imageMap, canvasEventMap, errorHandler, }) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        try {\r\n            const precomputedMutation = canvasEventMap.get(event) || mutation;\r\n            const commands = 'commands' in precomputedMutation\r\n                ? precomputedMutation.commands\r\n                : [precomputedMutation];\r\n            if ([CanvasContext.WebGL, CanvasContext.WebGL2].includes(mutation.type)) {\r\n                for (let i = 0; i < commands.length; i++) {\r\n                    const command = commands[i];\r\n                    yield webglMutation({\r\n                        mutation: command,\r\n                        type: mutation.type,\r\n                        target,\r\n                        imageMap,\r\n                        errorHandler,\r\n                    });\r\n                }\r\n                return;\r\n            }\r\n            for (let i = 0; i < commands.length; i++) {\r\n                const command = commands[i];\r\n                yield canvasMutation$1({\r\n                    event,\r\n                    mutation: command,\r\n                    target,\r\n                    imageMap,\r\n                    errorHandler,\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            errorHandler(mutation, error);\r\n        }\r\n    });\r\n}\n\nexport { canvasMutation as default };\n", "import { __awaiter } from './../../../../ext/tslib/tslib.es6.js';\nimport { createCache, createMirror, rebuild, buildNodeWithSN, NodeType } from '../../../rrweb-snapshot/es/rrweb-snapshot.js';\nimport { RRDocument, diff, createOrGetNode, getDefaultSN, buildFromDom, buildFromNode } from '../../../rrdom/es/rrdom.js';\nimport * as mitt$1 from './../../../../ext/mitt/dist/mitt.mjs.js';\nimport mitt$2 from './../../../../ext/mitt/dist/mitt.mjs.js';\nimport { polyfill } from './smoothscroll.js';\nimport { Timer } from './timer.js';\nimport { createPlayerService, createSpeedService } from './machine.js';\nimport { EventType, ReplayerEvents, IncrementalSource, MouseInteractions } from '../../../types/dist/types.js';\nimport { StyleSheetMirror, polyfill as polyfill$1, isSerializedIframe, hasShadowRoot, queueToResolveTrees, iterateResolveTree, uniqueTextMutations, getPositionsAndIndex, getNestedRule, getBaseDimension } from '../utils.js';\nimport rules from './styles/inject-style.js';\nimport canvasMutation from './canvas/index.js';\nimport { deserializeArg } from './canvas/deserialize-args.js';\n\nconst SKIP_TIME_THRESHOLD = 10 * 1000;\r\nconst SKIP_TIME_INTERVAL = 5 * 1000;\r\nconst mitt = mitt$2 || mitt$1;\r\nconst REPLAY_CONSOLE_PREFIX = '[replayer]';\r\nconst defaultMouseTailConfig = {\r\n    duration: 500,\r\n    lineCap: 'round',\r\n    lineWidth: 3,\r\n    strokeStyle: 'red',\r\n};\r\nfunction indicatesTouchDevice(e) {\r\n    return (e.type == EventType.IncrementalSnapshot &&\r\n        (e.data.source == IncrementalSource.TouchMove ||\r\n            (e.data.source == IncrementalSource.MouseInteraction &&\r\n                e.data.type == MouseInteractions.TouchStart)));\r\n}\r\nclass Replayer {\r\n    constructor(events, config) {\r\n        this.usingVirtualDom = false;\r\n        this.virtualDom = new RRDocument();\r\n        this.mouseTail = null;\r\n        this.tailPositions = [];\r\n        this.emitter = mitt();\r\n        this.legacy_missingNodeRetryMap = {};\r\n        this.cache = createCache();\r\n        this.imageMap = new Map();\r\n        this.canvasEventMap = new Map();\r\n        this.mirror = createMirror();\r\n        this.styleMirror = new StyleSheetMirror();\r\n        this.firstFullSnapshot = null;\r\n        this.newDocumentQueue = [];\r\n        this.mousePos = null;\r\n        this.touchActive = null;\r\n        this.lastSelectionData = null;\r\n        this.constructedStyleMutations = [];\r\n        this.adoptedStyleSheets = [];\r\n        this.handleResize = (dimension) => {\r\n            this.iframe.style.display = 'inherit';\r\n            for (const el of [this.mouseTail, this.iframe]) {\r\n                if (!el) {\r\n                    continue;\r\n                }\r\n                el.setAttribute('width', String(dimension.width));\r\n                el.setAttribute('height', String(dimension.height));\r\n            }\r\n        };\r\n        this.applyEventsSynchronously = (events) => {\r\n            for (const event of events) {\r\n                switch (event.type) {\r\n                    case EventType.DomContentLoaded:\r\n                    case EventType.Load:\r\n                    case EventType.Custom:\r\n                        continue;\r\n                    case EventType.FullSnapshot:\r\n                    case EventType.Meta:\r\n                    case EventType.Plugin:\r\n                    case EventType.IncrementalSnapshot:\r\n                        break;\r\n                }\r\n                const castFn = this.getCastFn(event, true);\r\n                castFn();\r\n            }\r\n            if (this.touchActive === true) {\r\n                this.mouse.classList.add('touch-active');\r\n            }\r\n            else if (this.touchActive === false) {\r\n                this.mouse.classList.remove('touch-active');\r\n            }\r\n            this.touchActive = null;\r\n        };\r\n        this.getCastFn = (event, isSync = false) => {\r\n            let castFn;\r\n            switch (event.type) {\r\n                case EventType.DomContentLoaded:\r\n                case EventType.Load:\r\n                    break;\r\n                case EventType.Custom:\r\n                    castFn = () => {\r\n                        this.emitter.emit(ReplayerEvents.CustomEvent, event);\r\n                    };\r\n                    break;\r\n                case EventType.Meta:\r\n                    castFn = () => this.emitter.emit(ReplayerEvents.Resize, {\r\n                        width: event.data.width,\r\n                        height: event.data.height,\r\n                    });\r\n                    break;\r\n                case EventType.FullSnapshot:\r\n                    castFn = () => {\r\n                        var _a;\r\n                        if (this.firstFullSnapshot) {\r\n                            if (this.firstFullSnapshot === event) {\r\n                                this.firstFullSnapshot = true;\r\n                                return;\r\n                            }\r\n                        }\r\n                        else {\r\n                            this.firstFullSnapshot = true;\r\n                        }\r\n                        this.rebuildFullSnapshot(event, isSync);\r\n                        (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.scrollTo(event.data.initialOffset);\r\n                        this.styleMirror.reset();\r\n                    };\r\n                    break;\r\n                case EventType.IncrementalSnapshot:\r\n                    castFn = () => {\r\n                        this.applyIncremental(event, isSync);\r\n                        if (isSync) {\r\n                            return;\r\n                        }\r\n                        if (event === this.nextUserInteractionEvent) {\r\n                            this.nextUserInteractionEvent = null;\r\n                            this.backToNormal();\r\n                        }\r\n                        if (this.config.skipInactive && !this.nextUserInteractionEvent) {\r\n                            for (const _event of this.service.state.context.events) {\r\n                                if (_event.timestamp <= event.timestamp) {\r\n                                    continue;\r\n                                }\r\n                                if (this.isUserInteraction(_event)) {\r\n                                    if (_event.delay - event.delay >\r\n                                        SKIP_TIME_THRESHOLD *\r\n                                            this.speedService.state.context.timer.speed) {\r\n                                        this.nextUserInteractionEvent = _event;\r\n                                    }\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (this.nextUserInteractionEvent) {\r\n                                const skipTime = this.nextUserInteractionEvent.delay - event.delay;\r\n                                const payload = {\r\n                                    speed: Math.min(Math.round(skipTime / SKIP_TIME_INTERVAL), this.config.maxSpeed),\r\n                                };\r\n                                this.speedService.send({ type: 'FAST_FORWARD', payload });\r\n                                this.emitter.emit(ReplayerEvents.SkipStart, payload);\r\n                            }\r\n                        }\r\n                    };\r\n                    break;\r\n            }\r\n            const wrappedCastFn = () => {\r\n                if (castFn) {\r\n                    castFn();\r\n                }\r\n                for (const plugin of this.config.plugins || []) {\r\n                    if (plugin.handler)\r\n                        plugin.handler(event, isSync, { replayer: this });\r\n                }\r\n                this.service.send({ type: 'CAST_EVENT', payload: { event } });\r\n                const last_index = this.service.state.context.events.length - 1;\r\n                if (event === this.service.state.context.events[last_index]) {\r\n                    const finish = () => {\r\n                        if (last_index < this.service.state.context.events.length - 1) {\r\n                            return;\r\n                        }\r\n                        this.backToNormal();\r\n                        this.service.send('END');\r\n                        this.emitter.emit(ReplayerEvents.Finish);\r\n                    };\r\n                    if (event.type === EventType.IncrementalSnapshot &&\r\n                        event.data.source === IncrementalSource.MouseMove &&\r\n                        event.data.positions.length) {\r\n                        setTimeout(() => {\r\n                            finish();\r\n                        }, Math.max(0, -event.data.positions[0].timeOffset + 50));\r\n                    }\r\n                    else {\r\n                        finish();\r\n                    }\r\n                }\r\n                this.emitter.emit(ReplayerEvents.EventCast, event);\r\n            };\r\n            return wrappedCastFn;\r\n        };\r\n        if (!(config === null || config === void 0 ? void 0 : config.liveMode) && events.length < 2) {\r\n            throw new Error('Replayer need at least 2 events.');\r\n        }\r\n        const defaultConfig = {\r\n            speed: 1,\r\n            maxSpeed: 360,\r\n            root: document.body,\r\n            loadTimeout: 0,\r\n            skipInactive: false,\r\n            showWarning: true,\r\n            showDebug: false,\r\n            blockClass: 'rr-block',\r\n            liveMode: false,\r\n            insertStyleRules: [],\r\n            triggerFocus: true,\r\n            UNSAFE_replayCanvas: false,\r\n            pauseAnimation: true,\r\n            mouseTail: defaultMouseTailConfig,\r\n            useVirtualDom: true,\r\n        };\r\n        this.config = Object.assign({}, defaultConfig, config);\r\n        this.handleResize = this.handleResize.bind(this);\r\n        this.getCastFn = this.getCastFn.bind(this);\r\n        this.applyEventsSynchronously = this.applyEventsSynchronously.bind(this);\r\n        this.emitter.on(ReplayerEvents.Resize, this.handleResize);\r\n        this.setupDom();\r\n        for (const plugin of this.config.plugins || []) {\r\n            if (plugin.getMirror)\r\n                plugin.getMirror({ nodeMirror: this.mirror });\r\n        }\r\n        this.emitter.on(ReplayerEvents.Flush, () => {\r\n            if (this.usingVirtualDom) {\r\n                const replayerHandler = {\r\n                    mirror: this.mirror,\r\n                    applyCanvas: (canvasEvent, canvasMutationData, target) => {\r\n                        void canvasMutation({\r\n                            event: canvasEvent,\r\n                            mutation: canvasMutationData,\r\n                            target,\r\n                            imageMap: this.imageMap,\r\n                            canvasEventMap: this.canvasEventMap,\r\n                            errorHandler: this.warnCanvasMutationFailed.bind(this),\r\n                        });\r\n                    },\r\n                    applyInput: this.applyInput.bind(this),\r\n                    applyScroll: this.applyScroll.bind(this),\r\n                    applyStyleSheetMutation: (data, styleSheet) => {\r\n                        if (data.source === IncrementalSource.StyleSheetRule)\r\n                            this.applyStyleSheetRule(data, styleSheet);\r\n                        else if (data.source === IncrementalSource.StyleDeclaration)\r\n                            this.applyStyleDeclaration(data, styleSheet);\r\n                    },\r\n                };\r\n                this.iframe.contentDocument &&\r\n                    diff(this.iframe.contentDocument, this.virtualDom, replayerHandler, this.virtualDom.mirror);\r\n                this.virtualDom.destroyTree();\r\n                this.usingVirtualDom = false;\r\n                if (Object.keys(this.legacy_missingNodeRetryMap).length) {\r\n                    for (const key in this.legacy_missingNodeRetryMap) {\r\n                        try {\r\n                            const value = this.legacy_missingNodeRetryMap[key];\r\n                            const realNode = createOrGetNode(value.node, this.mirror, this.virtualDom.mirror);\r\n                            diff(realNode, value.node, replayerHandler, this.virtualDom.mirror);\r\n                            value.node = realNode;\r\n                        }\r\n                        catch (error) {\r\n                            if (this.config.showWarning) {\r\n                                console.warn(error);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                this.constructedStyleMutations.forEach((data) => {\r\n                    this.applyStyleSheetMutation(data);\r\n                });\r\n                this.constructedStyleMutations = [];\r\n                this.adoptedStyleSheets.forEach((data) => {\r\n                    this.applyAdoptedStyleSheet(data);\r\n                });\r\n                this.adoptedStyleSheets = [];\r\n            }\r\n            if (this.mousePos) {\r\n                this.moveAndHover(this.mousePos.x, this.mousePos.y, this.mousePos.id, true, this.mousePos.debugData);\r\n                this.mousePos = null;\r\n            }\r\n            if (this.lastSelectionData) {\r\n                this.applySelection(this.lastSelectionData);\r\n                this.lastSelectionData = null;\r\n            }\r\n        });\r\n        this.emitter.on(ReplayerEvents.PlayBack, () => {\r\n            this.firstFullSnapshot = null;\r\n            this.mirror.reset();\r\n            this.styleMirror.reset();\r\n        });\r\n        const timer = new Timer([], {\r\n            speed: this.config.speed,\r\n            liveMode: this.config.liveMode,\r\n        });\r\n        this.service = createPlayerService({\r\n            events: events\r\n                .map((e) => {\r\n                if (config && config.unpackFn) {\r\n                    return config.unpackFn(e);\r\n                }\r\n                return e;\r\n            })\r\n                .sort((a1, a2) => a1.timestamp - a2.timestamp),\r\n            timer,\r\n            timeOffset: 0,\r\n            baselineTime: 0,\r\n            lastPlayedEvent: null,\r\n        }, {\r\n            getCastFn: this.getCastFn,\r\n            applyEventsSynchronously: this.applyEventsSynchronously,\r\n            emitter: this.emitter,\r\n        });\r\n        this.service.start();\r\n        this.service.subscribe((state) => {\r\n            this.emitter.emit(ReplayerEvents.StateChange, {\r\n                player: state,\r\n            });\r\n        });\r\n        this.speedService = createSpeedService({\r\n            normalSpeed: -1,\r\n            timer,\r\n        });\r\n        this.speedService.start();\r\n        this.speedService.subscribe((state) => {\r\n            this.emitter.emit(ReplayerEvents.StateChange, {\r\n                speed: state,\r\n            });\r\n        });\r\n        const firstMeta = this.service.state.context.events.find((e) => e.type === EventType.Meta);\r\n        const firstFullsnapshot = this.service.state.context.events.find((e) => e.type === EventType.FullSnapshot);\r\n        if (firstMeta) {\r\n            const { width, height } = firstMeta.data;\r\n            setTimeout(() => {\r\n                this.emitter.emit(ReplayerEvents.Resize, {\r\n                    width,\r\n                    height,\r\n                });\r\n            }, 0);\r\n        }\r\n        if (firstFullsnapshot) {\r\n            setTimeout(() => {\r\n                var _a;\r\n                if (this.firstFullSnapshot) {\r\n                    return;\r\n                }\r\n                this.firstFullSnapshot = firstFullsnapshot;\r\n                this.rebuildFullSnapshot(firstFullsnapshot);\r\n                (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.scrollTo(firstFullsnapshot.data.initialOffset);\r\n            }, 1);\r\n        }\r\n        if (this.service.state.context.events.find(indicatesTouchDevice)) {\r\n            this.mouse.classList.add('touch-device');\r\n        }\r\n    }\r\n    get timer() {\r\n        return this.service.state.context.timer;\r\n    }\r\n    on(event, handler) {\r\n        this.emitter.on(event, handler);\r\n        return this;\r\n    }\r\n    off(event, handler) {\r\n        this.emitter.off(event, handler);\r\n        return this;\r\n    }\r\n    setConfig(config) {\r\n        Object.keys(config).forEach((key) => {\r\n            config[key];\r\n            this.config[key] = config[key];\r\n        });\r\n        if (!this.config.skipInactive) {\r\n            this.backToNormal();\r\n        }\r\n        if (typeof config.speed !== 'undefined') {\r\n            this.speedService.send({\r\n                type: 'SET_SPEED',\r\n                payload: {\r\n                    speed: config.speed,\r\n                },\r\n            });\r\n        }\r\n        if (typeof config.mouseTail !== 'undefined') {\r\n            if (config.mouseTail === false) {\r\n                if (this.mouseTail) {\r\n                    this.mouseTail.style.display = 'none';\r\n                }\r\n            }\r\n            else {\r\n                if (!this.mouseTail) {\r\n                    this.mouseTail = document.createElement('canvas');\r\n                    this.mouseTail.width = Number.parseFloat(this.iframe.width);\r\n                    this.mouseTail.height = Number.parseFloat(this.iframe.height);\r\n                    this.mouseTail.classList.add('replayer-mouse-tail');\r\n                    this.wrapper.insertBefore(this.mouseTail, this.iframe);\r\n                }\r\n                this.mouseTail.style.display = 'inherit';\r\n            }\r\n        }\r\n    }\r\n    getMetaData() {\r\n        const firstEvent = this.service.state.context.events[0];\r\n        const lastEvent = this.service.state.context.events[this.service.state.context.events.length - 1];\r\n        return {\r\n            startTime: firstEvent.timestamp,\r\n            endTime: lastEvent.timestamp,\r\n            totalTime: lastEvent.timestamp - firstEvent.timestamp,\r\n        };\r\n    }\r\n    getCurrentTime() {\r\n        return this.timer.timeOffset + this.getTimeOffset();\r\n    }\r\n    getTimeOffset() {\r\n        const { baselineTime, events } = this.service.state.context;\r\n        return baselineTime - events[0].timestamp;\r\n    }\r\n    getMirror() {\r\n        return this.mirror;\r\n    }\r\n    play(timeOffset = 0) {\r\n        var _a, _b;\r\n        if (this.service.state.matches('paused')) {\r\n            this.service.send({ type: 'PLAY', payload: { timeOffset } });\r\n        }\r\n        else {\r\n            this.service.send({ type: 'PAUSE' });\r\n            this.service.send({ type: 'PLAY', payload: { timeOffset } });\r\n        }\r\n        (_b = (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('html')[0]) === null || _b === void 0 ? void 0 : _b.classList.remove('rrweb-paused');\r\n        this.emitter.emit(ReplayerEvents.Start);\r\n    }\r\n    pause(timeOffset) {\r\n        var _a, _b;\r\n        if (timeOffset === undefined && this.service.state.matches('playing')) {\r\n            this.service.send({ type: 'PAUSE' });\r\n        }\r\n        if (typeof timeOffset === 'number') {\r\n            this.play(timeOffset);\r\n            this.service.send({ type: 'PAUSE' });\r\n        }\r\n        (_b = (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('html')[0]) === null || _b === void 0 ? void 0 : _b.classList.add('rrweb-paused');\r\n        this.emitter.emit(ReplayerEvents.Pause);\r\n    }\r\n    resume(timeOffset = 0) {\r\n        console.warn(`The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface.`);\r\n        this.play(timeOffset);\r\n        this.emitter.emit(ReplayerEvents.Resume);\r\n    }\r\n    destroy() {\r\n        this.pause();\r\n        this.config.root.removeChild(this.wrapper);\r\n        this.emitter.emit(ReplayerEvents.Destroy);\r\n    }\r\n    startLive(baselineTime) {\r\n        this.service.send({ type: 'TO_LIVE', payload: { baselineTime } });\r\n    }\r\n    addEvent(rawEvent) {\r\n        const event = this.config.unpackFn\r\n            ? this.config.unpackFn(rawEvent)\r\n            : rawEvent;\r\n        if (indicatesTouchDevice(event)) {\r\n            this.mouse.classList.add('touch-device');\r\n        }\r\n        void Promise.resolve().then(() => this.service.send({ type: 'ADD_EVENT', payload: { event } }));\r\n    }\r\n    enableInteract() {\r\n        this.iframe.setAttribute('scrolling', 'auto');\r\n        this.iframe.style.pointerEvents = 'auto';\r\n    }\r\n    disableInteract() {\r\n        this.iframe.setAttribute('scrolling', 'no');\r\n        this.iframe.style.pointerEvents = 'none';\r\n    }\r\n    resetCache() {\r\n        this.cache = createCache();\r\n    }\r\n    setupDom() {\r\n        this.wrapper = document.createElement('div');\r\n        this.wrapper.classList.add('replayer-wrapper');\r\n        this.config.root.appendChild(this.wrapper);\r\n        this.mouse = document.createElement('div');\r\n        this.mouse.classList.add('replayer-mouse');\r\n        this.wrapper.appendChild(this.mouse);\r\n        if (this.config.mouseTail !== false) {\r\n            this.mouseTail = document.createElement('canvas');\r\n            this.mouseTail.classList.add('replayer-mouse-tail');\r\n            this.mouseTail.style.display = 'inherit';\r\n            this.wrapper.appendChild(this.mouseTail);\r\n        }\r\n        this.iframe = document.createElement('iframe');\r\n        const attributes = ['allow-same-origin'];\r\n        if (this.config.UNSAFE_replayCanvas) {\r\n            attributes.push('allow-scripts');\r\n        }\r\n        this.iframe.style.display = 'none';\r\n        this.iframe.setAttribute('sandbox', attributes.join(' '));\r\n        this.disableInteract();\r\n        this.wrapper.appendChild(this.iframe);\r\n        if (this.iframe.contentWindow && this.iframe.contentDocument) {\r\n            polyfill(this.iframe.contentWindow, this.iframe.contentDocument);\r\n            polyfill$1(this.iframe.contentWindow);\r\n        }\r\n    }\r\n    rebuildFullSnapshot(event, isSync = false) {\r\n        if (!this.iframe.contentDocument) {\r\n            return console.warn('Looks like your replayer has been destroyed.');\r\n        }\r\n        if (Object.keys(this.legacy_missingNodeRetryMap).length) {\r\n            console.warn('Found unresolved missing node map', this.legacy_missingNodeRetryMap);\r\n        }\r\n        this.legacy_missingNodeRetryMap = {};\r\n        const collected = [];\r\n        const afterAppend = (builtNode, id) => {\r\n            this.collectIframeAndAttachDocument(collected, builtNode);\r\n            for (const plugin of this.config.plugins || []) {\r\n                if (plugin.onBuild)\r\n                    plugin.onBuild(builtNode, {\r\n                        id,\r\n                        replayer: this,\r\n                    });\r\n            }\r\n        };\r\n        rebuild(event.data.node, {\r\n            doc: this.iframe.contentDocument,\r\n            afterAppend,\r\n            cache: this.cache,\r\n            mirror: this.mirror,\r\n        });\r\n        afterAppend(this.iframe.contentDocument, event.data.node.id);\r\n        for (const { mutationInQueue, builtNode } of collected) {\r\n            this.attachDocumentToIframe(mutationInQueue, builtNode);\r\n            this.newDocumentQueue = this.newDocumentQueue.filter((m) => m !== mutationInQueue);\r\n        }\r\n        const { documentElement, head } = this.iframe.contentDocument;\r\n        this.insertStyleRules(documentElement, head);\r\n        if (!this.service.state.matches('playing')) {\r\n            this.iframe.contentDocument\r\n                .getElementsByTagName('html')[0]\r\n                .classList.add('rrweb-paused');\r\n        }\r\n        this.emitter.emit(ReplayerEvents.FullsnapshotRebuilded, event);\r\n        if (!isSync) {\r\n            this.waitForStylesheetLoad();\r\n        }\r\n        if (this.config.UNSAFE_replayCanvas) {\r\n            void this.preloadAllImages();\r\n        }\r\n    }\r\n    insertStyleRules(documentElement, head) {\r\n        var _a;\r\n        const injectStylesRules = rules(this.config.blockClass).concat(this.config.insertStyleRules);\r\n        if (this.config.pauseAnimation) {\r\n            injectStylesRules.push('html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }');\r\n        }\r\n        if (this.usingVirtualDom) {\r\n            const styleEl = this.virtualDom.createElement('style');\r\n            this.virtualDom.mirror.add(styleEl, getDefaultSN(styleEl, this.virtualDom.unserializedId));\r\n            documentElement.insertBefore(styleEl, head);\r\n            styleEl.rules.push({\r\n                source: IncrementalSource.StyleSheetRule,\r\n                adds: injectStylesRules.map((cssText, index) => ({\r\n                    rule: cssText,\r\n                    index,\r\n                })),\r\n            });\r\n        }\r\n        else {\r\n            const styleEl = document.createElement('style');\r\n            documentElement.insertBefore(styleEl, head);\r\n            for (let idx = 0; idx < injectStylesRules.length; idx++) {\r\n                (_a = styleEl.sheet) === null || _a === void 0 ? void 0 : _a.insertRule(injectStylesRules[idx], idx);\r\n            }\r\n        }\r\n    }\r\n    attachDocumentToIframe(mutation, iframeEl) {\r\n        const mirror = this.usingVirtualDom\r\n            ? this.virtualDom.mirror\r\n            : this.mirror;\r\n        const collected = [];\r\n        const afterAppend = (builtNode, id) => {\r\n            this.collectIframeAndAttachDocument(collected, builtNode);\r\n            const sn = mirror.getMeta(builtNode);\r\n            if ((sn === null || sn === void 0 ? void 0 : sn.type) === NodeType.Element &&\r\n                (sn === null || sn === void 0 ? void 0 : sn.tagName.toUpperCase()) === 'HTML') {\r\n                const { documentElement, head } = iframeEl.contentDocument;\r\n                this.insertStyleRules(documentElement, head);\r\n            }\r\n            for (const plugin of this.config.plugins || []) {\r\n                if (plugin.onBuild)\r\n                    plugin.onBuild(builtNode, {\r\n                        id,\r\n                        replayer: this,\r\n                    });\r\n            }\r\n        };\r\n        buildNodeWithSN(mutation.node, {\r\n            doc: iframeEl.contentDocument,\r\n            mirror: mirror,\r\n            hackCss: true,\r\n            skipChild: false,\r\n            afterAppend,\r\n            cache: this.cache,\r\n        });\r\n        afterAppend(iframeEl.contentDocument, mutation.node.id);\r\n        for (const { mutationInQueue, builtNode } of collected) {\r\n            this.attachDocumentToIframe(mutationInQueue, builtNode);\r\n            this.newDocumentQueue = this.newDocumentQueue.filter((m) => m !== mutationInQueue);\r\n        }\r\n    }\r\n    collectIframeAndAttachDocument(collected, builtNode) {\r\n        if (isSerializedIframe(builtNode, this.mirror)) {\r\n            const mutationInQueue = this.newDocumentQueue.find((m) => m.parentId === this.mirror.getId(builtNode));\r\n            if (mutationInQueue) {\r\n                collected.push({\r\n                    mutationInQueue,\r\n                    builtNode: builtNode,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    waitForStylesheetLoad() {\r\n        var _a;\r\n        const head = (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.head;\r\n        if (head) {\r\n            const unloadSheets = new Set();\r\n            let timer;\r\n            let beforeLoadState = this.service.state;\r\n            const stateHandler = () => {\r\n                beforeLoadState = this.service.state;\r\n            };\r\n            this.emitter.on(ReplayerEvents.Start, stateHandler);\r\n            this.emitter.on(ReplayerEvents.Pause, stateHandler);\r\n            const unsubscribe = () => {\r\n                this.emitter.off(ReplayerEvents.Start, stateHandler);\r\n                this.emitter.off(ReplayerEvents.Pause, stateHandler);\r\n            };\r\n            head\r\n                .querySelectorAll('link[rel=\"stylesheet\"]')\r\n                .forEach((css) => {\r\n                if (!css.sheet) {\r\n                    unloadSheets.add(css);\r\n                    css.addEventListener('load', () => {\r\n                        unloadSheets.delete(css);\r\n                        if (unloadSheets.size === 0 && timer !== -1) {\r\n                            if (beforeLoadState.matches('playing')) {\r\n                                this.play(this.getCurrentTime());\r\n                            }\r\n                            this.emitter.emit(ReplayerEvents.LoadStylesheetEnd);\r\n                            if (timer) {\r\n                                clearTimeout(timer);\r\n                            }\r\n                            unsubscribe();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            if (unloadSheets.size > 0) {\r\n                this.service.send({ type: 'PAUSE' });\r\n                this.emitter.emit(ReplayerEvents.LoadStylesheetStart);\r\n                timer = setTimeout(() => {\r\n                    if (beforeLoadState.matches('playing')) {\r\n                        this.play(this.getCurrentTime());\r\n                    }\r\n                    timer = -1;\r\n                    unsubscribe();\r\n                }, this.config.loadTimeout);\r\n            }\r\n        }\r\n    }\r\n    preloadAllImages() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.service.state;\r\n            const stateHandler = () => {\r\n                this.service.state;\r\n            };\r\n            this.emitter.on(ReplayerEvents.Start, stateHandler);\r\n            this.emitter.on(ReplayerEvents.Pause, stateHandler);\r\n            const promises = [];\r\n            for (const event of this.service.state.context.events) {\r\n                if (event.type === EventType.IncrementalSnapshot &&\r\n                    event.data.source === IncrementalSource.CanvasMutation) {\r\n                    promises.push(this.deserializeAndPreloadCanvasEvents(event.data, event));\r\n                    const commands = 'commands' in event.data ? event.data.commands : [event.data];\r\n                    commands.forEach((c) => {\r\n                        this.preloadImages(c, event);\r\n                    });\r\n                }\r\n            }\r\n            return Promise.all(promises);\r\n        });\r\n    }\r\n    preloadImages(data, event) {\r\n        if (data.property === 'drawImage' &&\r\n            typeof data.args[0] === 'string' &&\r\n            !this.imageMap.has(event)) {\r\n            const canvas = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            const imgd = ctx === null || ctx === void 0 ? void 0 : ctx.createImageData(canvas.width, canvas.height);\r\n            imgd === null || imgd === void 0 ? void 0 : imgd.data;\r\n            JSON.parse(data.args[0]);\r\n            ctx === null || ctx === void 0 ? void 0 : ctx.putImageData(imgd, 0, 0);\r\n        }\r\n    }\r\n    deserializeAndPreloadCanvasEvents(data, event) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.canvasEventMap.has(event)) {\r\n                const status = {\r\n                    isUnchanged: true,\r\n                };\r\n                if ('commands' in data) {\r\n                    const commands = yield Promise.all(data.commands.map((c) => __awaiter(this, void 0, void 0, function* () {\r\n                        const args = yield Promise.all(c.args.map(deserializeArg(this.imageMap, null, status)));\r\n                        return Object.assign(Object.assign({}, c), { args });\r\n                    })));\r\n                    if (status.isUnchanged === false)\r\n                        this.canvasEventMap.set(event, Object.assign(Object.assign({}, data), { commands }));\r\n                }\r\n                else {\r\n                    const args = yield Promise.all(data.args.map(deserializeArg(this.imageMap, null, status)));\r\n                    if (status.isUnchanged === false)\r\n                        this.canvasEventMap.set(event, Object.assign(Object.assign({}, data), { args }));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    applyIncremental(e, isSync) {\r\n        var _a, _b, _c;\r\n        const { data: d } = e;\r\n        switch (d.source) {\r\n            case IncrementalSource.Mutation: {\r\n                try {\r\n                    this.applyMutation(d, isSync);\r\n                }\r\n                catch (error) {\r\n                    this.warn(`Exception in mutation ${error.message || error}`, d);\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Drag:\r\n            case IncrementalSource.TouchMove:\r\n            case IncrementalSource.MouseMove:\r\n                if (isSync) {\r\n                    const lastPosition = d.positions[d.positions.length - 1];\r\n                    this.mousePos = {\r\n                        x: lastPosition.x,\r\n                        y: lastPosition.y,\r\n                        id: lastPosition.id,\r\n                        debugData: d,\r\n                    };\r\n                }\r\n                else {\r\n                    d.positions.forEach((p) => {\r\n                        const action = {\r\n                            doAction: () => {\r\n                                this.moveAndHover(p.x, p.y, p.id, isSync, d);\r\n                            },\r\n                            delay: p.timeOffset +\r\n                                e.timestamp -\r\n                                this.service.state.context.baselineTime,\r\n                        };\r\n                        this.timer.addAction(action);\r\n                    });\r\n                    this.timer.addAction({\r\n                        doAction() {\r\n                        },\r\n                        delay: e.delay - ((_a = d.positions[0]) === null || _a === void 0 ? void 0 : _a.timeOffset),\r\n                    });\r\n                }\r\n                break;\r\n            case IncrementalSource.MouseInteraction: {\r\n                if (d.id === -1 || isSync) {\r\n                    break;\r\n                }\r\n                const event = new Event(MouseInteractions[d.type].toLowerCase());\r\n                const target = this.mirror.getNode(d.id);\r\n                if (!target) {\r\n                    return this.debugNodeNotFound(d, d.id);\r\n                }\r\n                this.emitter.emit(ReplayerEvents.MouseInteraction, {\r\n                    type: d.type,\r\n                    target,\r\n                });\r\n                const { triggerFocus } = this.config;\r\n                switch (d.type) {\r\n                    case MouseInteractions.Blur:\r\n                        if ('blur' in target) {\r\n                            target.blur();\r\n                        }\r\n                        break;\r\n                    case MouseInteractions.Focus:\r\n                        if (triggerFocus && target.focus) {\r\n                            target.focus({\r\n                                preventScroll: true,\r\n                            });\r\n                        }\r\n                        break;\r\n                    case MouseInteractions.Click:\r\n                    case MouseInteractions.TouchStart:\r\n                    case MouseInteractions.TouchEnd:\r\n                        if (isSync) {\r\n                            if (d.type === MouseInteractions.TouchStart) {\r\n                                this.touchActive = true;\r\n                            }\r\n                            else if (d.type === MouseInteractions.TouchEnd) {\r\n                                this.touchActive = false;\r\n                            }\r\n                            this.mousePos = {\r\n                                x: d.x,\r\n                                y: d.y,\r\n                                id: d.id,\r\n                                debugData: d,\r\n                            };\r\n                        }\r\n                        else {\r\n                            if (d.type === MouseInteractions.TouchStart) {\r\n                                this.tailPositions.length = 0;\r\n                            }\r\n                            this.moveAndHover(d.x, d.y, d.id, isSync, d);\r\n                            if (d.type === MouseInteractions.Click) {\r\n                                this.mouse.classList.remove('active');\r\n                                void this.mouse.offsetWidth;\r\n                                this.mouse.classList.add('active');\r\n                            }\r\n                            else if (d.type === MouseInteractions.TouchStart) {\r\n                                void this.mouse.offsetWidth;\r\n                                this.mouse.classList.add('touch-active');\r\n                            }\r\n                            else if (d.type === MouseInteractions.TouchEnd) {\r\n                                this.mouse.classList.remove('touch-active');\r\n                            }\r\n                        }\r\n                        break;\r\n                    case MouseInteractions.TouchCancel:\r\n                        if (isSync) {\r\n                            this.touchActive = false;\r\n                        }\r\n                        else {\r\n                            this.mouse.classList.remove('touch-active');\r\n                        }\r\n                        break;\r\n                    default:\r\n                        target.dispatchEvent(event);\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Scroll: {\r\n                if (d.id === -1) {\r\n                    break;\r\n                }\r\n                if (this.usingVirtualDom) {\r\n                    const target = this.virtualDom.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    target.scrollData = d;\r\n                    break;\r\n                }\r\n                this.applyScroll(d, isSync);\r\n                break;\r\n            }\r\n            case IncrementalSource.ViewportResize:\r\n                this.emitter.emit(ReplayerEvents.Resize, {\r\n                    width: d.width,\r\n                    height: d.height,\r\n                });\r\n                break;\r\n            case IncrementalSource.Input: {\r\n                if (d.id === -1) {\r\n                    break;\r\n                }\r\n                if (this.usingVirtualDom) {\r\n                    const target = this.virtualDom.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    target.inputData = d;\r\n                    break;\r\n                }\r\n                this.applyInput(d);\r\n                break;\r\n            }\r\n            case IncrementalSource.MediaInteraction: {\r\n                const target = this.usingVirtualDom\r\n                    ? this.virtualDom.mirror.getNode(d.id)\r\n                    : this.mirror.getNode(d.id);\r\n                if (!target) {\r\n                    return this.debugNodeNotFound(d, d.id);\r\n                }\r\n                const mediaEl = target;\r\n                try {\r\n                    if (d.currentTime) {\r\n                        mediaEl.currentTime = d.currentTime;\r\n                    }\r\n                    if (d.volume) {\r\n                        mediaEl.volume = d.volume;\r\n                    }\r\n                    if (d.muted) {\r\n                        mediaEl.muted = d.muted;\r\n                    }\r\n                    if (d.type === 1) {\r\n                        mediaEl.pause();\r\n                    }\r\n                    if (d.type === 0) {\r\n                        void mediaEl.play();\r\n                    }\r\n                    if (d.type === 4) {\r\n                        mediaEl.playbackRate = d.playbackRate;\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (this.config.showWarning) {\r\n                        console.warn(`Failed to replay media interactions: ${error.message || error}`);\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.StyleSheetRule:\r\n            case IncrementalSource.StyleDeclaration: {\r\n                if (this.usingVirtualDom) {\r\n                    if (d.styleId)\r\n                        this.constructedStyleMutations.push(d);\r\n                    else if (d.id)\r\n                        (_b = this.virtualDom.mirror.getNode(d.id)) === null || _b === void 0 ? void 0 : _b.rules.push(d);\r\n                }\r\n                else\r\n                    this.applyStyleSheetMutation(d);\r\n                break;\r\n            }\r\n            case IncrementalSource.CanvasMutation: {\r\n                if (!this.config.UNSAFE_replayCanvas) {\r\n                    return;\r\n                }\r\n                if (this.usingVirtualDom) {\r\n                    const target = this.virtualDom.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    target.canvasMutations.push({\r\n                        event: e,\r\n                        mutation: d,\r\n                    });\r\n                }\r\n                else {\r\n                    const target = this.mirror.getNode(d.id);\r\n                    if (!target) {\r\n                        return this.debugNodeNotFound(d, d.id);\r\n                    }\r\n                    void canvasMutation({\r\n                        event: e,\r\n                        mutation: d,\r\n                        target: target,\r\n                        imageMap: this.imageMap,\r\n                        canvasEventMap: this.canvasEventMap,\r\n                        errorHandler: this.warnCanvasMutationFailed.bind(this),\r\n                    });\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Font: {\r\n                try {\r\n                    const fontFace = new FontFace(d.family, d.buffer\r\n                        ? new Uint8Array(JSON.parse(d.fontSource))\r\n                        : d.fontSource, d.descriptors);\r\n                    (_c = this.iframe.contentDocument) === null || _c === void 0 ? void 0 : _c.fonts.add(fontFace);\r\n                }\r\n                catch (error) {\r\n                    if (this.config.showWarning) {\r\n                        console.warn(error);\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case IncrementalSource.Selection: {\r\n                if (isSync) {\r\n                    this.lastSelectionData = d;\r\n                    break;\r\n                }\r\n                this.applySelection(d);\r\n                break;\r\n            }\r\n            case IncrementalSource.AdoptedStyleSheet: {\r\n                if (this.usingVirtualDom)\r\n                    this.adoptedStyleSheets.push(d);\r\n                else\r\n                    this.applyAdoptedStyleSheet(d);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    applyMutation(d, isSync) {\r\n        if (this.config.useVirtualDom && !this.usingVirtualDom && isSync) {\r\n            this.usingVirtualDom = true;\r\n            buildFromDom(this.iframe.contentDocument, this.mirror, this.virtualDom);\r\n            if (Object.keys(this.legacy_missingNodeRetryMap).length) {\r\n                for (const key in this.legacy_missingNodeRetryMap) {\r\n                    try {\r\n                        const value = this.legacy_missingNodeRetryMap[key];\r\n                        const virtualNode = buildFromNode(value.node, this.virtualDom, this.mirror);\r\n                        if (virtualNode)\r\n                            value.node = virtualNode;\r\n                    }\r\n                    catch (error) {\r\n                        if (this.config.showWarning) {\r\n                            console.warn(error);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        const mirror = this.usingVirtualDom ? this.virtualDom.mirror : this.mirror;\r\n        d.removes.forEach((mutation) => {\r\n            var _a;\r\n            const target = mirror.getNode(mutation.id);\r\n            if (!target) {\r\n                if (d.removes.find((r) => r.id === mutation.parentId)) {\r\n                    return;\r\n                }\r\n                return this.warnNodeNotFound(d, mutation.id);\r\n            }\r\n            let parent = mirror.getNode(mutation.parentId);\r\n            if (!parent) {\r\n                return this.warnNodeNotFound(d, mutation.parentId);\r\n            }\r\n            if (mutation.isShadow && hasShadowRoot(parent)) {\r\n                parent = parent.shadowRoot;\r\n            }\r\n            mirror.removeNodeFromMap(target);\r\n            if (parent)\r\n                try {\r\n                    parent.removeChild(target);\r\n                    if (this.usingVirtualDom &&\r\n                        target.nodeName === '#text' &&\r\n                        parent.nodeName === 'STYLE' &&\r\n                        ((_a = parent.rules) === null || _a === void 0 ? void 0 : _a.length) > 0)\r\n                        parent.rules = [];\r\n                }\r\n                catch (error) {\r\n                    if (error instanceof DOMException) {\r\n                        this.warn('parent could not remove child in mutation', parent, target, d);\r\n                    }\r\n                    else {\r\n                        throw error;\r\n                    }\r\n                }\r\n        });\r\n        const legacy_missingNodeMap = Object.assign({}, this.legacy_missingNodeRetryMap);\r\n        const queue = [];\r\n        const nextNotInDOM = (mutation) => {\r\n            let next = null;\r\n            if (mutation.nextId) {\r\n                next = mirror.getNode(mutation.nextId);\r\n            }\r\n            if (mutation.nextId !== null &&\r\n                mutation.nextId !== undefined &&\r\n                mutation.nextId !== -1 &&\r\n                !next) {\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        const appendNode = (mutation) => {\r\n            var _a;\r\n            if (!this.iframe.contentDocument) {\r\n                return console.warn('Looks like your replayer has been destroyed.');\r\n            }\r\n            let parent = mirror.getNode(mutation.parentId);\r\n            if (!parent) {\r\n                if (mutation.node.type === NodeType.Document) {\r\n                    return this.newDocumentQueue.push(mutation);\r\n                }\r\n                return queue.push(mutation);\r\n            }\r\n            if (mutation.node.isShadow) {\r\n                if (!hasShadowRoot(parent)) {\r\n                    parent.attachShadow({ mode: 'open' });\r\n                    parent = parent.shadowRoot;\r\n                }\r\n                else\r\n                    parent = parent.shadowRoot;\r\n            }\r\n            let previous = null;\r\n            let next = null;\r\n            if (mutation.previousId) {\r\n                previous = mirror.getNode(mutation.previousId);\r\n            }\r\n            if (mutation.nextId) {\r\n                next = mirror.getNode(mutation.nextId);\r\n            }\r\n            if (nextNotInDOM(mutation)) {\r\n                return queue.push(mutation);\r\n            }\r\n            if (mutation.node.rootId && !mirror.getNode(mutation.node.rootId)) {\r\n                return;\r\n            }\r\n            const targetDoc = mutation.node.rootId\r\n                ? mirror.getNode(mutation.node.rootId)\r\n                : this.usingVirtualDom\r\n                    ? this.virtualDom\r\n                    : this.iframe.contentDocument;\r\n            if (isSerializedIframe(parent, mirror)) {\r\n                this.attachDocumentToIframe(mutation, parent);\r\n                return;\r\n            }\r\n            const afterAppend = (node, id) => {\r\n                for (const plugin of this.config.plugins || []) {\r\n                    if (plugin.onBuild)\r\n                        plugin.onBuild(node, { id, replayer: this });\r\n                }\r\n            };\r\n            const target = buildNodeWithSN(mutation.node, {\r\n                doc: targetDoc,\r\n                mirror: mirror,\r\n                skipChild: true,\r\n                hackCss: true,\r\n                cache: this.cache,\r\n                afterAppend,\r\n            });\r\n            if (mutation.previousId === -1 || mutation.nextId === -1) {\r\n                legacy_missingNodeMap[mutation.node.id] = {\r\n                    node: target,\r\n                    mutation,\r\n                };\r\n                return;\r\n            }\r\n            const parentSn = mirror.getMeta(parent);\r\n            if (parentSn &&\r\n                parentSn.type === NodeType.Element &&\r\n                parentSn.tagName === 'textarea' &&\r\n                mutation.node.type === NodeType.Text) {\r\n                const childNodeArray = Array.isArray(parent.childNodes)\r\n                    ? parent.childNodes\r\n                    : Array.from(parent.childNodes);\r\n                for (const c of childNodeArray) {\r\n                    if (c.nodeType === parent.TEXT_NODE) {\r\n                        parent.removeChild(c);\r\n                    }\r\n                }\r\n            }\r\n            if (previous && previous.nextSibling && previous.nextSibling.parentNode) {\r\n                parent.insertBefore(target, previous.nextSibling);\r\n            }\r\n            else if (next && next.parentNode) {\r\n                parent.contains(next)\r\n                    ? parent.insertBefore(target, next)\r\n                    : parent.insertBefore(target, null);\r\n            }\r\n            else {\r\n                if (parent === targetDoc) {\r\n                    while (targetDoc.firstChild) {\r\n                        targetDoc.removeChild(targetDoc.firstChild);\r\n                    }\r\n                }\r\n                parent.appendChild(target);\r\n            }\r\n            afterAppend(target, mutation.node.id);\r\n            if (this.usingVirtualDom &&\r\n                target.nodeName === '#text' &&\r\n                parent.nodeName === 'STYLE' &&\r\n                ((_a = parent.rules) === null || _a === void 0 ? void 0 : _a.length) > 0)\r\n                parent.rules = [];\r\n            if (isSerializedIframe(target, this.mirror)) {\r\n                const targetId = this.mirror.getId(target);\r\n                const mutationInQueue = this.newDocumentQueue.find((m) => m.parentId === targetId);\r\n                if (mutationInQueue) {\r\n                    this.attachDocumentToIframe(mutationInQueue, target);\r\n                    this.newDocumentQueue = this.newDocumentQueue.filter((m) => m !== mutationInQueue);\r\n                }\r\n            }\r\n            if (mutation.previousId || mutation.nextId) {\r\n                this.legacy_resolveMissingNode(legacy_missingNodeMap, parent, target, mutation);\r\n            }\r\n        };\r\n        d.adds.forEach((mutation) => {\r\n            appendNode(mutation);\r\n        });\r\n        const startTime = Date.now();\r\n        while (queue.length) {\r\n            const resolveTrees = queueToResolveTrees(queue);\r\n            queue.length = 0;\r\n            if (Date.now() - startTime > 500) {\r\n                this.warn('Timeout in the loop, please check the resolve tree data:', resolveTrees);\r\n                break;\r\n            }\r\n            for (const tree of resolveTrees) {\r\n                const parent = mirror.getNode(tree.value.parentId);\r\n                if (!parent) {\r\n                    this.debug('Drop resolve tree since there is no parent for the root node.', tree);\r\n                }\r\n                else {\r\n                    iterateResolveTree(tree, (mutation) => {\r\n                        appendNode(mutation);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        if (Object.keys(legacy_missingNodeMap).length) {\r\n            Object.assign(this.legacy_missingNodeRetryMap, legacy_missingNodeMap);\r\n        }\r\n        uniqueTextMutations(d.texts).forEach((mutation) => {\r\n            var _a;\r\n            const target = mirror.getNode(mutation.id);\r\n            if (!target) {\r\n                if (d.removes.find((r) => r.id === mutation.id)) {\r\n                    return;\r\n                }\r\n                return this.warnNodeNotFound(d, mutation.id);\r\n            }\r\n            target.textContent = mutation.value;\r\n            if (this.usingVirtualDom) {\r\n                const parent = target.parentNode;\r\n                if (((_a = parent === null || parent === void 0 ? void 0 : parent.rules) === null || _a === void 0 ? void 0 : _a.length) > 0)\r\n                    parent.rules = [];\r\n            }\r\n        });\r\n        d.attributes.forEach((mutation) => {\r\n            const target = mirror.getNode(mutation.id);\r\n            if (!target) {\r\n                if (d.removes.find((r) => r.id === mutation.id)) {\r\n                    return;\r\n                }\r\n                return this.warnNodeNotFound(d, mutation.id);\r\n            }\r\n            for (const attributeName in mutation.attributes) {\r\n                if (typeof attributeName === 'string') {\r\n                    const value = mutation.attributes[attributeName];\r\n                    if (value === null) {\r\n                        target.removeAttribute(attributeName);\r\n                    }\r\n                    else if (typeof value === 'string') {\r\n                        try {\r\n                            if (attributeName === '_cssText' &&\r\n                                (target.nodeName === 'LINK' || target.nodeName === 'STYLE')) {\r\n                                try {\r\n                                    const newSn = mirror.getMeta(target);\r\n                                    Object.assign(newSn.attributes, mutation.attributes);\r\n                                    const newNode = buildNodeWithSN(newSn, {\r\n                                        doc: target.ownerDocument,\r\n                                        mirror: mirror,\r\n                                        skipChild: true,\r\n                                        hackCss: true,\r\n                                        cache: this.cache,\r\n                                    });\r\n                                    const siblingNode = target.nextSibling;\r\n                                    const parentNode = target.parentNode;\r\n                                    if (newNode && parentNode) {\r\n                                        parentNode.removeChild(target);\r\n                                        parentNode.insertBefore(newNode, siblingNode);\r\n                                        mirror.replace(mutation.id, newNode);\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                catch (e) {\r\n                                }\r\n                            }\r\n                            target.setAttribute(attributeName, value);\r\n                        }\r\n                        catch (error) {\r\n                            if (this.config.showWarning) {\r\n                                console.warn('An error occurred may due to the checkout feature.', error);\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (attributeName === 'style') {\r\n                        const styleValues = value;\r\n                        const targetEl = target;\r\n                        for (const s in styleValues) {\r\n                            if (styleValues[s] === false) {\r\n                                targetEl.style.removeProperty(s);\r\n                            }\r\n                            else if (styleValues[s] instanceof Array) {\r\n                                const svp = styleValues[s];\r\n                                targetEl.style.setProperty(s, svp[0], svp[1]);\r\n                            }\r\n                            else {\r\n                                const svs = styleValues[s];\r\n                                targetEl.style.setProperty(s, svs);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    applyScroll(d, isSync) {\r\n        var _a, _b;\r\n        const target = this.mirror.getNode(d.id);\r\n        if (!target) {\r\n            return this.debugNodeNotFound(d, d.id);\r\n        }\r\n        const sn = this.mirror.getMeta(target);\r\n        if (target === this.iframe.contentDocument) {\r\n            (_a = this.iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.scrollTo({\r\n                top: d.y,\r\n                left: d.x,\r\n                behavior: isSync ? 'auto' : 'smooth',\r\n            });\r\n        }\r\n        else if ((sn === null || sn === void 0 ? void 0 : sn.type) === NodeType.Document) {\r\n            (_b = target.defaultView) === null || _b === void 0 ? void 0 : _b.scrollTo({\r\n                top: d.y,\r\n                left: d.x,\r\n                behavior: isSync ? 'auto' : 'smooth',\r\n            });\r\n        }\r\n        else {\r\n            try {\r\n                target.scrollTo({\r\n                    top: d.y,\r\n                    left: d.x,\r\n                    behavior: isSync ? 'auto' : 'smooth',\r\n                });\r\n            }\r\n            catch (error) {\r\n            }\r\n        }\r\n    }\r\n    applyInput(d) {\r\n        const target = this.mirror.getNode(d.id);\r\n        if (!target) {\r\n            return this.debugNodeNotFound(d, d.id);\r\n        }\r\n        try {\r\n            target.checked = d.isChecked;\r\n            target.value = d.text;\r\n        }\r\n        catch (error) {\r\n        }\r\n    }\r\n    applySelection(d) {\r\n        try {\r\n            const selectionSet = new Set();\r\n            const ranges = d.ranges.map(({ start, startOffset, end, endOffset }) => {\r\n                const startContainer = this.mirror.getNode(start);\r\n                const endContainer = this.mirror.getNode(end);\r\n                if (!startContainer || !endContainer)\r\n                    return;\r\n                const result = new Range();\r\n                result.setStart(startContainer, startOffset);\r\n                result.setEnd(endContainer, endOffset);\r\n                const doc = startContainer.ownerDocument;\r\n                const selection = doc === null || doc === void 0 ? void 0 : doc.getSelection();\r\n                selection && selectionSet.add(selection);\r\n                return {\r\n                    range: result,\r\n                    selection,\r\n                };\r\n            });\r\n            selectionSet.forEach((s) => s.removeAllRanges());\r\n            ranges.forEach((r) => { var _a; return r && ((_a = r.selection) === null || _a === void 0 ? void 0 : _a.addRange(r.range)); });\r\n        }\r\n        catch (error) {\r\n        }\r\n    }\r\n    applyStyleSheetMutation(data) {\r\n        var _a;\r\n        let styleSheet = null;\r\n        if (data.styleId)\r\n            styleSheet = this.styleMirror.getStyle(data.styleId);\r\n        else if (data.id)\r\n            styleSheet =\r\n                ((_a = this.mirror.getNode(data.id)) === null || _a === void 0 ? void 0 : _a.sheet) || null;\r\n        if (!styleSheet)\r\n            return;\r\n        if (data.source === IncrementalSource.StyleSheetRule)\r\n            this.applyStyleSheetRule(data, styleSheet);\r\n        else if (data.source === IncrementalSource.StyleDeclaration)\r\n            this.applyStyleDeclaration(data, styleSheet);\r\n    }\r\n    applyStyleSheetRule(data, styleSheet) {\r\n        var _a, _b, _c, _d;\r\n        (_a = data.adds) === null || _a === void 0 ? void 0 : _a.forEach(({ rule, index: nestedIndex }) => {\r\n            try {\r\n                if (Array.isArray(nestedIndex)) {\r\n                    const { positions, index } = getPositionsAndIndex(nestedIndex);\r\n                    const nestedRule = getNestedRule(styleSheet.cssRules, positions);\r\n                    nestedRule.insertRule(rule, index);\r\n                }\r\n                else {\r\n                    const index = nestedIndex === undefined\r\n                        ? undefined\r\n                        : Math.min(nestedIndex, styleSheet.cssRules.length);\r\n                    styleSheet === null || styleSheet === void 0 ? void 0 : styleSheet.insertRule(rule, index);\r\n                }\r\n            }\r\n            catch (e) {\r\n            }\r\n        });\r\n        (_b = data.removes) === null || _b === void 0 ? void 0 : _b.forEach(({ index: nestedIndex }) => {\r\n            try {\r\n                if (Array.isArray(nestedIndex)) {\r\n                    const { positions, index } = getPositionsAndIndex(nestedIndex);\r\n                    const nestedRule = getNestedRule(styleSheet.cssRules, positions);\r\n                    nestedRule.deleteRule(index || 0);\r\n                }\r\n                else {\r\n                    styleSheet === null || styleSheet === void 0 ? void 0 : styleSheet.deleteRule(nestedIndex);\r\n                }\r\n            }\r\n            catch (e) {\r\n            }\r\n        });\r\n        if (data.replace)\r\n            try {\r\n                void ((_c = styleSheet.replace) === null || _c === void 0 ? void 0 : _c.call(styleSheet, data.replace));\r\n            }\r\n            catch (e) {\r\n            }\r\n        if (data.replaceSync)\r\n            try {\r\n                (_d = styleSheet.replaceSync) === null || _d === void 0 ? void 0 : _d.call(styleSheet, data.replaceSync);\r\n            }\r\n            catch (e) {\r\n            }\r\n    }\r\n    applyStyleDeclaration(data, styleSheet) {\r\n        if (data.set) {\r\n            const rule = getNestedRule(styleSheet.rules, data.index);\r\n            rule.style.setProperty(data.set.property, data.set.value, data.set.priority);\r\n        }\r\n        if (data.remove) {\r\n            const rule = getNestedRule(styleSheet.rules, data.index);\r\n            rule.style.removeProperty(data.remove.property);\r\n        }\r\n    }\r\n    applyAdoptedStyleSheet(data) {\r\n        var _a;\r\n        const targetHost = this.mirror.getNode(data.id);\r\n        if (!targetHost)\r\n            return;\r\n        (_a = data.styles) === null || _a === void 0 ? void 0 : _a.forEach((style) => {\r\n            var _a;\r\n            let newStyleSheet = null;\r\n            let hostWindow = null;\r\n            if (hasShadowRoot(targetHost))\r\n                hostWindow = ((_a = targetHost.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) || null;\r\n            else if (targetHost.nodeName === '#document')\r\n                hostWindow = targetHost.defaultView;\r\n            if (!hostWindow)\r\n                return;\r\n            try {\r\n                newStyleSheet = new hostWindow.CSSStyleSheet();\r\n                this.styleMirror.add(newStyleSheet, style.styleId);\r\n                this.applyStyleSheetRule({\r\n                    source: IncrementalSource.StyleSheetRule,\r\n                    adds: style.rules,\r\n                }, newStyleSheet);\r\n            }\r\n            catch (e) {\r\n            }\r\n        });\r\n        const MAX_RETRY_TIME = 10;\r\n        let count = 0;\r\n        const adoptStyleSheets = (targetHost, styleIds) => {\r\n            const stylesToAdopt = styleIds\r\n                .map((styleId) => this.styleMirror.getStyle(styleId))\r\n                .filter((style) => style !== null);\r\n            if (hasShadowRoot(targetHost))\r\n                targetHost.shadowRoot.adoptedStyleSheets = stylesToAdopt;\r\n            else if (targetHost.nodeName === '#document')\r\n                targetHost.adoptedStyleSheets = stylesToAdopt;\r\n            if (stylesToAdopt.length !== styleIds.length && count < MAX_RETRY_TIME) {\r\n                setTimeout(() => adoptStyleSheets(targetHost, styleIds), 0 + 100 * count);\r\n                count++;\r\n            }\r\n        };\r\n        adoptStyleSheets(targetHost, data.styleIds);\r\n    }\r\n    legacy_resolveMissingNode(map, parent, target, targetMutation) {\r\n        const { previousId, nextId } = targetMutation;\r\n        const previousInMap = previousId && map[previousId];\r\n        const nextInMap = nextId && map[nextId];\r\n        if (previousInMap) {\r\n            const { node, mutation } = previousInMap;\r\n            parent.insertBefore(node, target);\r\n            delete map[mutation.node.id];\r\n            delete this.legacy_missingNodeRetryMap[mutation.node.id];\r\n            if (mutation.previousId || mutation.nextId) {\r\n                this.legacy_resolveMissingNode(map, parent, node, mutation);\r\n            }\r\n        }\r\n        if (nextInMap) {\r\n            const { node, mutation } = nextInMap;\r\n            parent.insertBefore(node, target.nextSibling);\r\n            delete map[mutation.node.id];\r\n            delete this.legacy_missingNodeRetryMap[mutation.node.id];\r\n            if (mutation.previousId || mutation.nextId) {\r\n                this.legacy_resolveMissingNode(map, parent, node, mutation);\r\n            }\r\n        }\r\n    }\r\n    moveAndHover(x, y, id, isSync, debugData) {\r\n        const target = this.mirror.getNode(id);\r\n        if (!target) {\r\n            return this.debugNodeNotFound(debugData, id);\r\n        }\r\n        const base = getBaseDimension(target, this.iframe);\r\n        const _x = x * base.absoluteScale + base.x;\r\n        const _y = y * base.absoluteScale + base.y;\r\n        this.mouse.style.left = `${_x}px`;\r\n        this.mouse.style.top = `${_y}px`;\r\n        if (!isSync) {\r\n            this.drawMouseTail({ x: _x, y: _y });\r\n        }\r\n        this.hoverElements(target);\r\n    }\r\n    drawMouseTail(position) {\r\n        if (!this.mouseTail) {\r\n            return;\r\n        }\r\n        const { lineCap, lineWidth, strokeStyle, duration } = this.config.mouseTail === true\r\n            ? defaultMouseTailConfig\r\n            : Object.assign({}, defaultMouseTailConfig, this.config.mouseTail);\r\n        const draw = () => {\r\n            if (!this.mouseTail) {\r\n                return;\r\n            }\r\n            const ctx = this.mouseTail.getContext('2d');\r\n            if (!ctx || !this.tailPositions.length) {\r\n                return;\r\n            }\r\n            ctx.clearRect(0, 0, this.mouseTail.width, this.mouseTail.height);\r\n            ctx.beginPath();\r\n            ctx.lineWidth = lineWidth;\r\n            ctx.lineCap = lineCap;\r\n            ctx.strokeStyle = strokeStyle;\r\n            ctx.moveTo(this.tailPositions[0].x, this.tailPositions[0].y);\r\n            this.tailPositions.forEach((p) => ctx.lineTo(p.x, p.y));\r\n            ctx.stroke();\r\n        };\r\n        this.tailPositions.push(position);\r\n        draw();\r\n        setTimeout(() => {\r\n            this.tailPositions = this.tailPositions.filter((p) => p !== position);\r\n            draw();\r\n        }, duration / this.speedService.state.context.timer.speed);\r\n    }\r\n    hoverElements(el) {\r\n        var _a;\r\n        (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.querySelectorAll('.\\\\:hover').forEach((hoveredEl) => {\r\n            hoveredEl.classList.remove(':hover');\r\n        });\r\n        let currentEl = el;\r\n        while (currentEl) {\r\n            if (currentEl.classList) {\r\n                currentEl.classList.add(':hover');\r\n            }\r\n            currentEl = currentEl.parentElement;\r\n        }\r\n    }\r\n    isUserInteraction(event) {\r\n        if (event.type !== EventType.IncrementalSnapshot) {\r\n            return false;\r\n        }\r\n        return (event.data.source > IncrementalSource.Mutation &&\r\n            event.data.source <= IncrementalSource.Input);\r\n    }\r\n    backToNormal() {\r\n        this.nextUserInteractionEvent = null;\r\n        if (this.speedService.state.matches('normal')) {\r\n            return;\r\n        }\r\n        this.speedService.send({ type: 'BACK_TO_NORMAL' });\r\n        this.emitter.emit(ReplayerEvents.SkipEnd, {\r\n            speed: this.speedService.state.context.normalSpeed,\r\n        });\r\n    }\r\n    warnNodeNotFound(d, id) {\r\n        this.warn(`Node with id '${id}' not found. `, d);\r\n    }\r\n    warnCanvasMutationFailed(d, error) {\r\n        this.warn(`Has error on canvas update`, error, 'canvas mutation:', d);\r\n    }\r\n    debugNodeNotFound(d, id) {\r\n        this.debug(REPLAY_CONSOLE_PREFIX, `Node with id '${id}' not found. `, d);\r\n    }\r\n    warn(...args) {\r\n        if (!this.config.showWarning) {\r\n            return;\r\n        }\r\n        console.warn(REPLAY_CONSOLE_PREFIX, ...args);\r\n    }\r\n    debug(...args) {\r\n        if (!this.config.showDebug) {\r\n            return;\r\n        }\r\n        console.log(REPLAY_CONSOLE_PREFIX, ...args);\r\n    }\r\n}\n\nexport { Replayer };\n", "declare global {\n  interface Document {\n    mozExitFullscreen: Document['exitFullscreen'];\n    webkitExitFullscreen: Document['exitFullscreen'];\n    msExitFullscreen: Document['exitFullscreen'];\n    webkitIsFullScreen: Document['fullscreen'];\n    mozFullScreen: Document['fullscreen'];\n    msFullscreenElement: Document['fullscreen'];\n  }\n\n  interface HTMLElement {\n    mozRequestFullScreen: Element['requestFullscreen'];\n    webkitRequestFullscreen: Element['requestFullscreen'];\n    msRequestFullscreen: Element['requestFullscreen'];\n  }\n}\n\nimport { EventType, IncrementalSource } from 'rrweb';\nimport type { eventWithTime } from '@rrweb/types';\n\nexport function inlineCss(cssObj: Record<string, string>): string {\n  let style = '';\n  Object.keys(cssObj).forEach((key) => {\n    style += `${key}: ${cssObj[key]};`;\n  });\n  return style;\n}\n\nfunction padZero(num: number, len = 2): string {\n  let str = String(num);\n  const threshold = Math.pow(10, len - 1);\n  if (num < threshold) {\n    while (String(threshold).length > str.length) {\n      str = `0${num}`;\n    }\n  }\n  return str;\n}\n\nconst SECOND = 1000;\nconst MINUTE = 60 * SECOND;\nconst HOUR = 60 * MINUTE;\nexport function formatTime(ms: number): string {\n  if (ms <= 0) {\n    return '00:00';\n  }\n  const hour = Math.floor(ms / HOUR);\n  ms = ms % HOUR;\n  const minute = Math.floor(ms / MINUTE);\n  ms = ms % MINUTE;\n  const second = Math.floor(ms / SECOND);\n  if (hour) {\n    return `${padZero(hour)}:${padZero(minute)}:${padZero(second)}`;\n  }\n  return `${padZero(minute)}:${padZero(second)}`;\n}\n\nexport function openFullscreen(el: HTMLElement): Promise<void> {\n  if (el.requestFullscreen) {\n    return el.requestFullscreen();\n  } else if (el.mozRequestFullScreen) {\n    /* Firefox */\n    return el.mozRequestFullScreen();\n  } else if (el.webkitRequestFullscreen) {\n    /* Chrome, Safari and Opera */\n    return el.webkitRequestFullscreen();\n  } else if (el.msRequestFullscreen) {\n    /* IE/Edge */\n    return el.msRequestFullscreen();\n  }\n}\n\nexport function exitFullscreen(): Promise<void> {\n  if (document.exitFullscreen) {\n    return document.exitFullscreen();\n  } else if (document.mozExitFullscreen) {\n    /* Firefox */\n    return document.mozExitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    /* Chrome, Safari and Opera */\n    return document.webkitExitFullscreen();\n  } else if (document.msExitFullscreen) {\n    /* IE/Edge */\n    return document.msExitFullscreen();\n  }\n}\n\nexport function isFullscreen(): boolean {\n  let fullscreen = false;\n  [\n    'fullscreen',\n    'webkitIsFullScreen',\n    'mozFullScreen',\n    'msFullscreenElement',\n  ].forEach((fullScreenAccessor) => {\n    if (fullScreenAccessor in document) {\n      fullscreen = fullscreen || Boolean(document[fullScreenAccessor]);\n    }\n  });\n  return fullscreen;\n}\n\nexport function onFullscreenChange(handler: () => unknown): () => void {\n  document.addEventListener('fullscreenchange', handler);\n  document.addEventListener('webkitfullscreenchange', handler);\n  document.addEventListener('mozfullscreenchange', handler);\n  document.addEventListener('MSFullscreenChange', handler);\n\n  return () => {\n    document.removeEventListener('fullscreenchange', handler);\n    document.removeEventListener('webkitfullscreenchange', handler);\n    document.removeEventListener('mozfullscreenchange', handler);\n    document.removeEventListener('MSFullscreenChange', handler);\n  };\n}\n\nexport function typeOf(\n  obj: unknown,\n):\n  | 'boolean'\n  | 'number'\n  | 'string'\n  | 'function'\n  | 'array'\n  | 'date'\n  | 'regExp'\n  | 'undefined'\n  | 'null'\n  | 'object' {\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  const toString = Object.prototype.toString;\n  const map = {\n    '[object Boolean]': 'boolean',\n    '[object Number]': 'number',\n    '[object String]': 'string',\n    '[object Function]': 'function',\n    '[object Array]': 'array',\n    '[object Date]': 'date',\n    '[object RegExp]': 'regExp',\n    '[object Undefined]': 'undefined',\n    '[object Null]': 'null',\n    '[object Object]': 'object',\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-member-access\n  return map[toString.call(obj)];\n}\n\n/**\n * Forked from 'rrweb' replay/index.ts. The original function is not exported.\n * Determine whether the event is a user interaction event\n * @param event - event to be determined\n * @returns true if the event is a user interaction event\n */\nfunction isUserInteraction(event: eventWithTime): boolean {\n  if (event.type !== EventType.IncrementalSnapshot) {\n    return false;\n  }\n  return (\n    event.data.source > IncrementalSource.Mutation &&\n    event.data.source <= IncrementalSource.Input\n  );\n}\n\n// Forked from 'rrweb' replay/index.ts. A const threshold of inactive time.\nconst SKIP_TIME_THRESHOLD = 10 * 1000;\n\n/**\n * Get periods of time when no user interaction happened from a list of events.\n * @param events - all events\n * @returns periods of time consist with [start time, end time]\n */\nexport function getInactivePeriods(events: eventWithTime[]) {\n  const inactivePeriods: [number, number][] = [];\n  let lastActiveTime = events[0].timestamp;\n  for (const event of events) {\n    if (!isUserInteraction(event)) continue;\n    if (event.timestamp - lastActiveTime > SKIP_TIME_THRESHOLD) {\n      inactivePeriods.push([lastActiveTime, event.timestamp]);\n    }\n    lastActiveTime = event.timestamp;\n  }\n  return inactivePeriods;\n}\n", "<script lang=\"ts\">\n  export let disabled: boolean;\n  export let checked: boolean;\n  export let id: string;\n  export let label: string;\n</script>\n\n<style>\n  .switch {\n    height: 1em;\n    display: flex;\n    align-items: center;\n  }\n\n  .switch.disabled {\n    opacity: 0.5;\n  }\n\n  .label {\n    margin: 0 8px;\n  }\n\n  .switch input[type='checkbox'] {\n    position: absolute;\n    opacity: 0;\n  }\n\n  .switch label {\n    width: 2em;\n    height: 1em;\n    position: relative;\n    cursor: pointer;\n    display: block;\n  }\n\n  .switch.disabled label {\n    cursor: not-allowed;\n  }\n\n  .switch label:before {\n    content: '';\n    position: absolute;\n    width: 2em;\n    height: 1em;\n    left: 0.1em;\n    transition: background 0.1s ease;\n    background: rgba(73, 80, 246, 0.5);\n    border-radius: 50px;\n  }\n\n  .switch label:after {\n    content: '';\n    position: absolute;\n    width: 1em;\n    height: 1em;\n    border-radius: 50px;\n    left: 0;\n    transition: all 0.2s ease;\n    box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.3);\n    background: #fcfff4;\n    animation: switch-off 0.2s ease-out;\n    z-index: 2;\n  }\n\n  .switch input[type='checkbox']:checked + label:before {\n    background: rgb(73, 80, 246);\n  }\n\n  .switch input[type='checkbox']:checked + label:after {\n    animation: switch-on 0.2s ease-out;\n    left: 1.1em;\n  }\n</style>\n\n<div class=\"switch\" class:disabled>\n  <input type=\"checkbox\" {id} bind:checked {disabled} />\n  <label for={id} />\n  <span class=\"label\">{label}</span>\n</div>\n", "<script lang=\"ts\">\n  import { EventType } from 'rrweb';\n  import type { Replayer } from 'rrweb';\n  import type { playerMetaData } from '@rrweb/types';\n  import type {\n    PlayerMachineState,\n    SpeedMachineState,\n  } from 'rrweb/typings/replay/machine';\n  import {\n    onMount,\n    onDestroy,\n    createEventDispatcher,\n    afterUpdate,\n  } from 'svelte';\n  import { formatTime, getInactivePeriods } from './utils';\n  import Switch from './components/Switch.svelte';\n\n  const dispatch = createEventDispatcher();\n\n  export let replayer: Replayer;\n  export let showController: boolean;\n  export let autoPlay: boolean;\n  export let skipInactive: boolean;\n  export let speedOption: number[];\n  export let speed = speedOption.length ? speedOption[0] : 1;\n  export let tags: Record<string, string> = {};\n  export let inactiveColor: string;\n\n  let currentTime = 0;\n  $: {\n    dispatch('ui-update-current-time', { payload: currentTime });\n  }\n  let timer: number | null = null;\n  let playerState: 'playing' | 'paused' | 'live';\n  $: {\n    dispatch('ui-update-player-state', { payload: playerState });\n  }\n  let speedState: 'normal' | 'skipping';\n  let progress: HTMLElement;\n  let step: HTMLElement;\n  let finished: boolean;\n\n  let pauseAt: number | false = false;\n  let onPauseHook: () => unknown | undefined = undefined;\n  let loop: {\n    start: number;\n    end: number;\n  } | null = null;\n\n  let meta: playerMetaData;\n  $: meta = replayer.getMetaData();\n  let percentage: string;\n  $: {\n    const percent = Math.min(1, currentTime / meta.totalTime);\n    percentage = `${100 * percent}%`;\n    dispatch('ui-update-progress', { payload: percent });\n  }\n  type CustomEvent = {\n    name: string;\n    background: string;\n    position: string;\n  };\n\n  /**\n   * Calculate the tag position (percent) to be displayed on the progress bar.\n   * @param startTime - The start time of the session.\n   * @param endTime - The end time of the session.\n   * @param tagTime - The time of the tag.\n   * @returns The position of the tag. unit: percentage\n   */\n  function position(startTime: number, endTime: number, tagTime: number) {\n    const sessionDuration = endTime - startTime;\n    const eventDuration = endTime - tagTime;\n    const eventPosition = 100 - (eventDuration / sessionDuration) * 100;\n    return eventPosition.toFixed(2);\n  }\n\n  let customEvents: CustomEvent[];\n  $: customEvents = (() => {\n    const { context } = replayer.service.state;\n    const totalEvents = context.events.length;\n    const start = context.events[0].timestamp;\n    const end = context.events[totalEvents - 1].timestamp;\n    const customEvents: CustomEvent[] = [];\n\n    // loop through all the events and find out custom event.\n    context.events.forEach((event) => {\n      /**\n       * we are only interested in custom event and calculate it's position\n       * to place it in player's timeline.\n       */\n      if (event.type === EventType.Custom) {\n        const customEvent = {\n          name: event.data.tag,\n          background: tags[event.data.tag] || 'rgb(73, 80, 246)',\n          position: `${position(start, end, event.timestamp)}%`,\n        };\n        customEvents.push(customEvent);\n      }\n    });\n\n    return customEvents;\n  })();\n\n  let inactivePeriods: {\n    name: string;\n    background: string;\n    position: string;\n    width: string;\n  }[];\n  $: inactivePeriods = (() => {\n    try {\n      const { context } = replayer.service.state;\n      const totalEvents = context.events.length;\n      const start = context.events[0].timestamp;\n      const end = context.events[totalEvents - 1].timestamp;\n      const periods = getInactivePeriods(context.events);\n      // calculate the indicator width.\n      const getWidth = (\n        startTime: number,\n        endTime: number,\n        tagStart: number,\n        tagEnd: number,\n      ) => {\n        const sessionDuration = endTime - startTime;\n        const eventDuration = tagEnd - tagStart;\n        const width = (eventDuration / sessionDuration) * 100;\n        return width.toFixed(2);\n      };\n      return periods.map((period) => ({\n        name: 'inactive period',\n        background: inactiveColor,\n        position: `${position(start, end, period[0])}%`,\n        width: `${getWidth(start, end, period[0], period[1])}%`,\n      }));\n    } catch (e) {\n      // For safety concern, if there is any error, the main function won't be affected.\n      return [];\n    }\n  })();\n\n  const loopTimer = () => {\n    stopTimer();\n\n    function update() {\n      currentTime = replayer.getCurrentTime();\n\n      if (pauseAt && currentTime >= pauseAt) {\n        if (loop) {\n          playRange(loop.start, loop.end, true, undefined);\n        } else {\n          replayer.pause();\n          if (onPauseHook) {\n            onPauseHook();\n            onPauseHook = null;\n          }\n        }\n      }\n\n      if (currentTime < meta.totalTime) {\n        timer = requestAnimationFrame(update);\n      }\n    }\n\n    timer = requestAnimationFrame(update);\n  };\n\n  const stopTimer = () => {\n    if (timer) {\n      cancelAnimationFrame(timer);\n      timer = null;\n    }\n  };\n\n  export const toggle = () => {\n    switch (playerState) {\n      case 'playing':\n        pause();\n        break;\n      case 'paused':\n        play();\n        break;\n      default:\n        break;\n    }\n  };\n\n  export const play = () => {\n    if (playerState !== 'paused') {\n      return;\n    }\n    if (finished) {\n      replayer.play();\n      finished = false;\n    } else {\n      replayer.play(currentTime);\n    }\n  };\n\n  export const pause = () => {\n    if (playerState !== 'playing') {\n      return;\n    }\n    replayer.pause();\n    pauseAt = false;\n  };\n\n  export const goto = (timeOffset: number, play?: boolean) => {\n    currentTime = timeOffset;\n    pauseAt = false;\n    const resumePlaying =\n      typeof play === 'boolean' ? play : playerState === 'playing';\n    if (resumePlaying) {\n      replayer.play(timeOffset);\n    } else {\n      replayer.pause(timeOffset);\n    }\n  };\n\n  export const playRange = (\n    timeOffset: number,\n    endTimeOffset: number,\n    startLooping: boolean = false,\n    afterHook: undefined | (() => void) = undefined,\n  ) => {\n    if (startLooping) {\n      loop = {\n        start: timeOffset,\n        end: endTimeOffset,\n      };\n    } else {\n      loop = null;\n    }\n    currentTime = timeOffset;\n    pauseAt = endTimeOffset;\n    onPauseHook = afterHook;\n    replayer.play(timeOffset);\n  };\n\n  const handleProgressClick = (event: MouseEvent) => {\n    if (speedState === 'skipping') {\n      return;\n    }\n    const progressRect = progress.getBoundingClientRect();\n    const x = event.clientX - progressRect.left;\n    let percent = x / progressRect.width;\n    if (percent < 0) {\n      percent = 0;\n    } else if (percent > 1) {\n      percent = 1;\n    }\n    const timeOffset = meta.totalTime * percent;\n    finished = false;\n    goto(timeOffset);\n  };\n\n  export const setSpeed = (newSpeed: number) => {\n    let needFreeze = playerState === 'playing';\n    speed = newSpeed;\n    if (needFreeze) {\n      replayer.pause();\n    }\n    replayer.setConfig({ speed });\n    if (needFreeze) {\n      replayer.play(currentTime);\n    }\n  };\n\n  export const toggleSkipInactive = () => {\n    skipInactive = !skipInactive;\n  };\n\n  export const triggerUpdateMeta = () => {\n    return Promise.resolve().then(() => {\n      meta = replayer.getMetaData();\n    });\n  };\n\n  onMount(() => {\n    playerState = replayer.service.state.value;\n    speedState = replayer.speedService.state.value;\n    replayer.on(\n      'state-change',\n      (states: { player?: PlayerMachineState; speed?: SpeedMachineState }) => {\n        const { player, speed } = states;\n        if (player?.value && playerState !== player.value) {\n          playerState = player.value;\n          switch (playerState) {\n            case 'playing':\n              loopTimer();\n              break;\n            case 'paused':\n              stopTimer();\n              break;\n            default:\n              break;\n          }\n        }\n        if (speed?.value && speedState !== speed.value) {\n          speedState = speed.value;\n        }\n      },\n    );\n    replayer.on('finish', () => {\n      finished = true;\n      if (onPauseHook) {\n        onPauseHook();\n        onPauseHook = null;\n      }\n    });\n\n    if (autoPlay) {\n      replayer.play();\n    }\n  });\n\n  afterUpdate(() => {\n    if (skipInactive !== replayer.config.skipInactive) {\n      replayer.setConfig({ skipInactive });\n    }\n  });\n\n  onDestroy(() => {\n    replayer.pause();\n    stopTimer();\n  });\n</script>\n\n<style>\n  .rr-controller {\n    width: 100%;\n    height: 80px;\n    background: #fff;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    align-items: center;\n    border-radius: 0 0 5px 5px;\n  }\n\n  .rr-timeline {\n    width: 80%;\n    display: flex;\n    align-items: center;\n  }\n\n  .rr-timeline__time {\n    display: inline-block;\n    width: 100px;\n    text-align: center;\n    color: #11103e;\n  }\n\n  .rr-progress {\n    flex: 1;\n    height: 12px;\n    background: #eee;\n    position: relative;\n    border-radius: 3px;\n    cursor: pointer;\n    box-sizing: border-box;\n    border-top: solid 4px #fff;\n    border-bottom: solid 4px #fff;\n  }\n\n  .rr-progress.disabled {\n    cursor: not-allowed;\n  }\n\n  .rr-progress__step {\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n    background: #e0e1fe;\n  }\n\n  .rr-progress__handler {\n    width: 20px;\n    height: 20px;\n    border-radius: 10px;\n    position: absolute;\n    top: 2px;\n    transform: translate(-50%, -50%);\n    background: rgb(73, 80, 246);\n  }\n\n  .rr-controller__btns {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 13px;\n  }\n\n  .rr-controller__btns button {\n    width: 32px;\n    height: 32px;\n    display: flex;\n    padding: 0;\n    align-items: center;\n    justify-content: center;\n    background: none;\n    border: none;\n    border-radius: 50%;\n    cursor: pointer;\n  }\n\n  .rr-controller__btns button:active {\n    background: #e0e1fe;\n  }\n\n  .rr-controller__btns button.active {\n    color: #fff;\n    background: rgb(73, 80, 246);\n  }\n\n  .rr-controller__btns button:disabled {\n    cursor: not-allowed;\n  }\n</style>\n\n{#if showController}\n  <div class=\"rr-controller\">\n    <div class=\"rr-timeline\">\n      <span class=\"rr-timeline__time\">{formatTime(currentTime)}</span>\n      <div\n        class=\"rr-progress\"\n        class:disabled={speedState === 'skipping'}\n        bind:this={progress}\n        on:click={handleProgressClick}\n      >\n        <div\n          class=\"rr-progress__step\"\n          bind:this={step}\n          style=\"width: {percentage}\"\n        />\n        {#each inactivePeriods as period}\n          <div\n            title={period.name}\n            style=\"width: {period.width};height: 4px;position: absolute;background: {period.background};left:\n            {period.position};\"\n          />\n        {/each}\n        {#each customEvents as event}\n          <div\n            title={event.name}\n            style=\"width: 10px;height: 5px;position: absolute;top:\n            2px;transform: translate(-50%, -50%);background: {event.background};left:\n            {event.position};\"\n          />\n        {/each}\n\n        <div class=\"rr-progress__handler\" style=\"left: {percentage}\" />\n      </div>\n      <span class=\"rr-timeline__time\">{formatTime(meta.totalTime)}</span>\n    </div>\n    <div class=\"rr-controller__btns\">\n      <button on:click={toggle}>\n        {#if playerState === 'playing'}\n          <svg\n            class=\"icon\"\n            viewBox=\"0 0 1024 1024\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            width=\"16\"\n            height=\"16\"\n          >\n            <path\n              d=\"M682.65984 128q53.00224 0 90.50112 37.49888t37.49888 90.50112l0\n              512q0 53.00224-37.49888 90.50112t-90.50112\n              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224\n              37.49888-90.50112t90.50112-37.49888zM341.34016 128q53.00224 0\n              90.50112 37.49888t37.49888 90.50112l0 512q0 53.00224-37.49888\n              90.50112t-90.50112\n              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224\n              37.49888-90.50112t90.50112-37.49888zM341.34016 213.34016q-17.67424\n              0-30.16704 12.4928t-12.4928 30.16704l0 512q0 17.67424 12.4928\n              30.16704t30.16704 12.4928 30.16704-12.4928\n              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928zM682.65984\n              213.34016q-17.67424 0-30.16704 12.4928t-12.4928 30.16704l0 512q0\n              17.67424 12.4928 30.16704t30.16704 12.4928 30.16704-12.4928\n              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928z\"\n            />\n          </svg>\n        {:else}\n          <svg\n            class=\"icon\"\n            viewBox=\"0 0 1024 1024\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            width=\"16\"\n            height=\"16\"\n          >\n            <path\n              d=\"M170.65984 896l0-768 640 384zM644.66944\n              512l-388.66944-233.32864 0 466.65728z\"\n            />\n          </svg>\n        {/if}\n      </button>\n      {#each speedOption as s}\n        <button\n          class:active={s === speed && speedState !== 'skipping'}\n          on:click={() => setSpeed(s)}\n          disabled={speedState === 'skipping'}\n        >\n          {s}x\n        </button>\n      {/each}\n      <Switch\n        id=\"skip\"\n        bind:checked={skipInactive}\n        disabled={speedState === 'skipping'}\n        label=\"skip inactive\"\n      />\n      <button on:click={() => dispatch('fullscreen')}>\n        <svg\n          class=\"icon\"\n          viewBox=\"0 0 1024 1024\"\n          version=\"1.1\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          width=\"16\"\n          height=\"16\"\n        >\n          <defs>\n            <style type=\"text/css\">\n            </style>\n          </defs>\n          <path\n            d=\"M916 380c-26.4 0-48-21.6-48-48L868 223.2 613.6 477.6c-18.4\n            18.4-48.8 18.4-68 0-18.4-18.4-18.4-48.8 0-68L800 156 692 156c-26.4\n            0-48-21.6-48-48 0-26.4 21.6-48 48-48l224 0c26.4 0 48 21.6 48 48l0\n            224C964 358.4 942.4 380 916 380zM231.2 860l108.8 0c26.4 0 48 21.6 48\n            48s-21.6 48-48 48l-224 0c-26.4 0-48-21.6-48-48l0-224c0-26.4 21.6-48\n            48-48 26.4 0 48 21.6 48 48L164 792l253.6-253.6c18.4-18.4 48.8-18.4\n            68 0 18.4 18.4 18.4 48.8 0 68L231.2 860z\"\n            p-id=\"1286\"\n          />\n        </svg>\n      </button>\n    </div>\n  </div>\n{/if}\n", "<script lang=\"ts\">\n  import { onMount, onDestroy } from 'svelte';\n  import { Replayer, unpack } from 'rrweb';\n  import type { eventWithTime } from '@rrweb/types';\n  import {\n    inlineCss,\n    openFullscreen,\n    exitFullscreen,\n    isFullscreen,\n    onFullscreenChange,\n    typeOf,\n  } from './utils';\n  import Controller from './Controller.svelte';\n\n  export let width = 1024;\n  export let height = 576;\n  export let maxScale = 1;\n  export let events: eventWithTime[] = [];\n  export let skipInactive = true;\n  export let autoPlay = true;\n  export let speedOption: number[] = [1, 2, 4, 8];\n  export let speed = 1;\n  export let showController = true;\n  export let tags: Record<string, string> = {};\n  // color of inactive periods indicator\n  export let inactiveColor = '#D4D4D4';\n\n  let replayer: Replayer;\n\n  export const getMirror = () => replayer.getMirror();\n\n  const controllerHeight = 80;\n  let player: HTMLElement;\n  let frame: HTMLElement;\n  let fullscreenListener: undefined | (() => void);\n  let _width: number = width;\n  let _height: number = height;\n  let controller: {\n    toggle: () => void;\n    setSpeed: (speed: number) => void;\n    toggleSkipInactive: () => void;\n  } & Controller;\n\n  let style: string;\n  $: style = inlineCss({\n    width: `${width}px`,\n    height: `${height}px`,\n  });\n  let playerStyle: string;\n  $: playerStyle = inlineCss({\n    width: `${width}px`,\n    height: `${height + (showController ? controllerHeight : 0)}px`,\n  });\n\n  const updateScale = (\n    el: HTMLElement,\n    frameDimension: { width: number; height: number },\n  ) => {\n    const widthScale = width / frameDimension.width;\n    const heightScale = height / frameDimension.height;\n    const scale = [widthScale, heightScale];\n    if (maxScale) scale.push(maxScale);\n    el.style.transform =\n      `scale(${Math.min(...scale)})` + 'translate(-50%, -50%)';\n  };\n\n  export const triggerResize = () => {\n    updateScale(replayer.wrapper, {\n      width: replayer.iframe.offsetWidth,\n      height: replayer.iframe.offsetHeight,\n    });\n  };\n\n  export const toggleFullscreen = () => {\n    if (player) {\n      isFullscreen() ? exitFullscreen() : openFullscreen(player);\n    }\n  };\n\n  export const addEventListener = (\n    event: string,\n    handler: (detail: unknown) => unknown,\n  ) => {\n    replayer.on(event, handler);\n    switch (event) {\n      case 'ui-update-current-time':\n      case 'ui-update-progress':\n      case 'ui-update-player-state':\n        controller.$on(event, ({ detail }) => handler(detail));\n      default:\n        break;\n    }\n  };\n\n  export const addEvent = (event: eventWithTime) => {\n    replayer.addEvent(event);\n    controller.triggerUpdateMeta();\n  };\n  export const getMetaData = () => replayer.getMetaData();\n  export const getReplayer = () => replayer;\n\n  // by pass controller methods as public API\n  export const toggle = () => {\n    controller.toggle();\n  };\n  export const setSpeed = (speed: number) => {\n    controller.setSpeed(speed);\n  };\n  export const toggleSkipInactive = () => {\n    controller.toggleSkipInactive();\n  };\n  export const play = () => {\n    controller.play();\n  };\n  export const pause = () => {\n    controller.pause();\n  };\n  export const goto = (timeOffset: number, play?: boolean) => {\n    controller.goto(timeOffset, play);\n  };\n  export const playRange = (\n    timeOffset: number,\n    endTimeOffset: number,\n    startLooping: boolean = false,\n    afterHook: undefined | (() => void) = undefined,\n  ) => {\n    controller.playRange(timeOffset, endTimeOffset, startLooping, afterHook);\n  };\n\n  onMount(() => {\n    // runtime type check\n    if (speedOption !== undefined && typeOf(speedOption) !== 'array') {\n      throw new Error('speedOption must be array');\n    }\n    speedOption.forEach((item) => {\n      if (typeOf(item) !== 'number') {\n        throw new Error('item of speedOption must be number');\n      }\n    });\n    if (speedOption.indexOf(speed) < 0) {\n      throw new Error(`speed must be one of speedOption,\n        current config:\n        {\n          ...\n          speed: ${speed},\n          speedOption: [${speedOption.toString()}]\n          ...\n        }\n        `);\n    }\n\n    replayer = new Replayer(events, {\n      speed,\n      root: frame,\n      unpackFn: unpack,\n      ...$$props,\n    });\n\n    replayer.on('resize', (dimension) => {\n      updateScale(\n        replayer.wrapper,\n        dimension as { width: number; height: number },\n      );\n    });\n\n    fullscreenListener = onFullscreenChange(() => {\n      if (isFullscreen()) {\n        setTimeout(() => {\n          _width = width;\n          _height = height;\n          width = player.offsetWidth;\n          height =\n            player.offsetHeight - (showController ? controllerHeight : 0);\n          updateScale(replayer.wrapper, {\n            width: replayer.iframe.offsetWidth,\n            height: replayer.iframe.offsetHeight,\n          });\n        }, 0);\n      } else {\n        width = _width;\n        height = _height;\n        updateScale(replayer.wrapper, {\n          width: replayer.iframe.offsetWidth,\n          height: replayer.iframe.offsetHeight,\n        });\n      }\n    });\n  });\n\n  onDestroy(() => {\n    fullscreenListener && fullscreenListener();\n  });\n</script>\n\n<style global>\n  @import 'rrweb/dist/rrweb.min.css';\n\n  .rr-player {\n    position: relative;\n    background: white;\n    float: left;\n    border-radius: 5px;\n    box-shadow: 0 24px 48px rgba(17, 16, 62, 0.12);\n  }\n\n  .rr-player__frame {\n    overflow: hidden;\n  }\n\n  .replayer-wrapper {\n    float: left;\n    clear: both;\n    transform-origin: top left;\n    left: 50%;\n    top: 50%;\n  }\n\n  .replayer-wrapper > iframe {\n    border: none;\n  }\n</style>\n\n<div class=\"rr-player\" bind:this={player} style={playerStyle}>\n  <div class=\"rr-player__frame\" bind:this={frame} {style} />\n  {#if replayer}\n    <Controller\n      bind:this={controller}\n      {replayer}\n      {showController}\n      {autoPlay}\n      {speedOption}\n      {skipInactive}\n      {tags}\n      {inactiveColor}\n      on:fullscreen={() => toggleFullscreen()}\n    />\n  {/if}\n</div>\n", "import type { eventWithTime } from '@rrweb/types';\nimport _Player from './Player.svelte';\n\ntype PlayerProps = {\n  events: eventWithTime[];\n};\n\nclass Player extends _Player {\n  constructor(options: {\n    target: Element;\n    props: PlayerProps;\n    // for compatibility\n    data?: PlayerProps;\n  }) {\n    super({\n      target: options.target,\n      props: options.data || options.props,\n    });\n  }\n}\n\nexport default Player;\n", "import d from \"./node_modules/rrweb-player/dist/index.mjs\";export default d;"],
  "mappings": "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",
  "names": ["noop", "assign", "tar", "src", "k", "run", "fn", "blank_object", "Object", "create", "run_all", "fns", "forEach", "is_function", "thing", "safe_not_equal", "a", "b", "exclude_internal_props", "props", "result", "append", "target", "node", "appendChild", "insert", "anchor", "insertBefore", "detach", "parentNode", "removeChild", "destroy_each", "iterations", "detaching", "i", "length", "d", "element", "name", "document", "createElement", "svg_element", "createElementNS", "text", "data", "createTextNode", "space", "listen", "event", "handler", "options", "addEventListener", "removeEventListener", "attr", "attribute", "value", "removeAttribute", "getAttribute", "setAttribute", "set_data", "wholeText", "set_style", "key", "important", "style", "removeProperty", "setProperty", "toggle_class", "toggle", "classList", "current_component", "set_current_component", "component", "get_current_component", "Error", "onMount", "$$", "on_mount", "push", "onDestroy", "on_destroy", "createEventDispatcher", "type", "detail", "cancelable", "callbacks", "bubbles", "e", "createEvent", "initCustomEvent", "slice", "call", "defaultPrevented", "dirty_components", "binding_callbacks", "render_callbacks", "flush_callbacks", "resolved_promise", "Promise", "resolve", "update_scheduled", "add_render_callback", "seen_callbacks", "Set", "flushidx", "flush", "saved_component", "update", "pop", "callback", "has", "add", "clear", "fragment", "before_update", "dirty", "p", "ctx", "after_update", "outroing", "outros", "group_outros", "r", "c", "check_outros", "transition_in", "block", "local", "delete", "transition_out", "o", "create_component", "mount_component", "customElement", "m", "new_on_destroy", "map", "filter", "destroy_component", "make_dirty", "then", "fill", "init", "instance", "create_fragment", "not_equal", "append_styles", "parent_component", "bound", "on_disconnect", "context", "Map", "skip_bound", "root", "ready", "ret", "rest", "hydrate", "nodes", "Array", "from", "childNodes", "l", "intro", "SvelteComponent", "$destroy", "this", "$on", "index", "indexOf", "splice", "$set", "$$props", "obj", "$$set", "keys", "NodeType", "isElement", "n", "nodeType", "ELEMENT_NODE", "Mirror", "idNodeMap", "nodeMetaMap", "WeakMap", "prototype", "getId", "_a", "id", "getMeta", "getNode", "get", "getIds", "removeNodeFromMap", "_this", "childNode", "hasNode", "meta", "set", "replace", "oldNode", "reset", "createMirror", "commentre", "parse", "css", "lineno", "column", "updatePosition", "str", "lines", "match", "lastIndexOf", "position", "start", "line", "Position", "whitespace", "end", "source", "content", "errorsList", "error", "msg", "err", "concat", "reason", "filename", "silent", "open", "close", "rules", "comments", "charAt", "atrule", "rule", "re", "exec", "comment", "pos", "selector", "trim", "split", "s", "declaration", "propMatch", "prop", "val", "property", "declarations", "decl", "decls", "keyframe", "vals", "values", "rulesList", "atimport", "_compileAtrule", "atcharset", "atnamespace", "RegExp", "vendor", "frame", "frames", "keyframes", "atkeyframes", "media", "atmedia", "atcustommedia", "supports", "atsupports", "doc", "atdocument", "sel", "selectors", "atpage", "athost", "atfontface", "addParent", "stylesheet", "parsingErrors", "parent", "isNode", "childParent", "_i", "isArray", "v", "defineProperty", "configurable", "writable", "enumerable", "tagMap", "script", "altglyph", "altglyphdef", "altglyphitem", "animatecolor", "animatemotion", "animatetransform", "clippath", "feblend", "fecolormatrix", "fecomponenttransfer", "fecomposite", "feconvolvematrix", "fediffuselighting", "fedisplacementmap", "fedistantlight", "fedropshadow", "feflood", "fefunca", "fefuncb", "fefuncg", "fefuncr", "fegaussianblur", "feimage", "femerge", "femergenode", "femorphology", "feoffset", "fepointlight", "fespecularlighting", "fespotlight", "fetile", "feturbulence", "foreignobject", "glyphref", "lineargradient", "radialgradient", "HOVER_SELECTOR", "HOVER_SELECTOR_GLOBAL", "addHoverClass", "cssText", "cache", "cachedStyle", "stylesWithHoverClass", "ast", "test", "selectorMatcher", "sort", "join", "newSelector", "createCache", "buildNode", "hackCss", "Document", "implementation", "createDocument", "DocumentType", "createDocumentType", "publicId", "systemId", "Element", "node_1", "tagName", "attributes", "_cssText", "isSVG", "specialAttributes", "name_1", "hasOwnProperty", "startsWith", "isTextarea", "isRemoteOrDynamicCss", "setAttributeNS", "toString", "substring", "rel", "as", "href", "endsWith", "srcset", "rr_dataURL", "child", "TEXT_NODE", "_loop_1", "name_2", "image_1", "onload", "getContext", "drawImage", "width", "height", "RRNodeType", "image", "currentSrc", "currentTime", "play", "console", "warn", "pause", "isShadowHost", "shadowRoot", "firstChild", "attachShadow", "mode", "Text", "isStyle", "textContent", "CDATA", "createCDATASection", "Comment", "createComment", "buildNodeWithSN", "mirror", "skipChild", "_b", "afterAppend", "rootId", "compatMode", "xmlns", "write", "_c", "childN", "isShadow", "rebuild", "onVisit", "visitedNode", "el", "name_3", "scrollLeft", "scrollTop", "DEPARTED_MIRROR_ACCESS_WARNING", "_mirror", "queueToResolveTrees", "queue", "queueNodeMap", "putIntoMap", "nodeInTree", "children", "queueNodeTrees", "mutation", "nextId", "parentId", "nextInTree", "idx", "parentInTree", "iterateResolveTree", "tree", "cb", "isSerializedIframe", "Boolean", "nodeName", "getBaseDimension", "rootIframe", "frameElement", "ownerDocument", "defaultView", "x", "y", "relativeScale", "absoluteScale", "frameDimension", "getBoundingClientRect", "frameBaseDimension", "clientHeight", "hasShadowRoot", "getNestedRule", "cssRules", "getPositionsAndIndex", "nestedIndex", "positions", "window", "Proxy", "Reflect", "receiver", "StyleSheetMirror", "constructor", "styleIDMap", "idStyleMap", "newId", "getStyle", "generateId", "EventType", "EventType2", "IncrementalSource", "IncrementalSource2", "MouseInteractions", "MouseInteractions2", "CanvasContext", "CanvasContext2", "ReplayerEvents", "ReplayerEvents2", "__awaiter", "thisArg", "_arguments", "P", "generator", "reject", "fulfilled", "step", "next", "rejected", "done", "apply", "chars", "lookup", "Uint8Array", "charCodeAt", "WorkerClass", "WorkerThreads", "module", "require", "__non_webpack_require__", "Worker", "createBase64WorkerFactory", "base64", "sourcemapArg", "enableUnicodeArg", "sourcemap", "enableUnicode", "Buffer", "body", "eval", "NodeType$1", "kIsNodeJS", "process", "createBase64WorkerFactory$1", "url", "Mirror$1", "toCSSText", "properties", "normalizedName", "hyphenate", "camelizeRE", "CUSTOM_PROPERTY_REGEX", "camelize", "_", "toUpperCase", "hyphenateRE", "toLowerCase", "BaseRRNode", "_args", "parentElement", "lastChild", "nextSibling", "siblings", "contains", "_newChild", "_refChild", "_node", "BaseRRDocumentTypeImpl", "RRNodeClass", "qualifiedName", "super", "DOCUMENT_TYPE_NODE", "BaseRRElementImpl", "ClassList", "class", "newClassName", "className", "res", "propertyDelimiter", "item", "tmp", "priority", "_namespace", "newChild", "refChild", "childIndex", "indexOfChild", "_init", "dispatchEvent", "_event", "attributeString", "BaseRRTextImpl", "JSON", "stringify", "BaseRRCommentImpl", "COMMENT_NODE", "BaseRRCDATASectionImpl", "CDATA_SECTION_NODE", "classText", "onChange", "classes", "classNames", "String", "remove", "NAMESPACES", "svg", "SVGTagMap", "diff", "oldTree", "newTree", "replayer", "rrnodeMirror", "oldChildren", "newChildren", "diffChildren", "inputDataToApply", "scrollDataToApply", "scrollData", "oldElement", "newRRElement", "oldAttributes", "newAttributes", "newValue", "sn", "inputData", "oldMediaElement", "newMediaRRElement", "paused", "muted", "volume", "playbackRate", "rrCanvasElement", "canvasMutations", "canvasMutation", "applyCanvas", "styleSheet", "sheet", "applyStyleSheetMutation", "applyScroll", "applyInput", "oldContentDocument", "contentDocument", "newIFrameElement", "oldIdToIndex", "indexInOld", "oldStartIndex", "oldEndIndex", "newStartIndex", "newEndIndex", "oldStartNode", "oldEndNode", "newStartNode", "newEndNode", "oldStartId", "oldEndId", "newStartId", "newEndId", "oldChild", "nodeToMove", "newNode", "createOrGetNode", "documentElement", "referenceRRNode", "referenceNode", "rrNode", "domMirror", "nodeId", "RRDocument", "BaseRRDocument", "arguments", "DOCUMENT_NODE", "find", "head", "firstElementChild", "some", "doctype", "_qualifiedName", "_doctype", "_namespaceURI", "CDATASection", "UNSERIALIZED_STARTING_ID", "_unserializedId", "unserializedId", "documentTypeNode", "RRDocumentType", "upperTagName", "RRMediaElement", "RRIFrameElement", "RRCanvasElement", "RRStyleElement", "RRElement", "commentNode", "RRComment", "sectionNode", "RRCDATASection", "textNode", "RRText", "destroyTree", "RRElementClass", "buildFromNode", "rrdom", "parentRRNode", "documentType", "elementNode", "HTMLFormElement", "rrElement", "DOCUMENT_FRAGMENT_NODE", "getDefaultSN", "buildFromDom", "dom", "createMirror$1", "walk", "iframeDoc", "u8", "u16", "Uint16Array", "u32", "Uint32Array", "fleb", "fdeb", "clim", "freb", "eb", "j", "fl", "revfl", "fd", "rev", "hMap", "cd", "mb", "co", "le", "rvb", "sv", "r_1", "flt", "fdt", "flrm", "fdrm", "max", "bits", "bits16", "slc", "subarray", "unzlibSync", "out", "dat", "buf", "st", "sl", "noBuf", "noSt", "cbuf", "bl", "nbuf", "Math", "final", "f", "bt", "lm", "dm", "lbt", "dbt", "tbts", "t", "hLit", "hcLen", "tl", "ldt", "clt", "clb", "clbmsk", "clm", "lt", "dt", "lms", "dms", "mxa", "sym", "dsym", "unpack", "raw", "timestamp", "latin1", "TextDecoder", "decode", "fromCharCode", "TextEncoder", "encode", "ar", "ai", "w", "mitt", "all", "on", "off", "emit", "polyfill", "__forceSmoothScrollPolyfill__", "HTMLElement", "original", "scroll", "scrollTo", "scrollBy", "elementScroll", "scrollElement", "scrollIntoView", "now", "performance", "bind", "Date", "ROUNDING_TOLERANCE", "userAgent", "navigator", "shouldBailOut", "firstArg", "behavior", "TypeError", "hasScrollableSpace", "axis", "scrollHeight", "clientWidth", "scrollWidth", "canOverflow", "overflowValue", "getComputedStyle", "isScrollable", "isScrollableY", "isScrollableX", "findScrollableParent", "host", "currentX", "currentY", "elapsed", "startTime", "cos", "PI", "startX", "startY", "method", "scrollable", "requestAnimationFrame", "smoothScroll", "scrollX", "pageXOffset", "scrollY", "pageYOffset", "left", "top", "SyntaxError", "scrollableParent", "parentRects", "clientRects", "Timer", "actions", "config", "timeOffset", "raf", "speed", "liveMode", "addAction", "action", "delay", "findActionIndex", "lastTimestamp", "check", "time", "shift", "doAction", "cancelAnimationFrame", "setSpeed", "toggleLiveMode", "isActive", "mid", "floor", "addDelay", "baselineTime", "IncrementalSnapshot", "MouseMove", "firstOffset", "firstTimestamp", "Symbol", "iterator", "return", "NotStarted", "Running", "Stopped", "assignment", "u", "changed", "matches", "states", "initial", "entry", "_options", "initialState", "transition", "g", "h", "S", "E", "R", "N", "cond", "O", "T", "q", "exit", "z", "A", "B", "C", "_machine", "send", "subscribe", "unsubscribe", "stop", "state", "status", "createPlayerService", "getCastFn", "applyEventsSynchronously", "emitter", "playerMachine", "playing", "PAUSE", "CAST_EVENT", "END", "ADD_EVENT", "PLAY", "TO_LIVE", "live", "castEvent", "lastPlayedEvent", "payload", "recordTimeOffset", "events", "timer", "neededEvents", "Meta", "lastPlayedTimestamp", "PlayBack", "syncEvents", "castFn", "Flush", "resetLastPlayedEvent", "startLive", "addEvent", "machineEvent", "insertionIndex", "isSync", "webGLVarMap", "variableListFor", "ctor", "contextMap", "deserializeArg", "imageMap", "preload", "arg", "isUnchanged", "rr_type", "args", "createImageBitmap", "encoded1", "encoded2", "encoded3", "encoded4", "bufferLength", "len", "arraybuffer", "ArrayBuffer", "bytes", "Image", "blobContents", "Blob", "WebGLVariableConstructorsNames", "webglMutation", "errorHandler", "WebGL", "setter", "includes", "variables", "canvasEventMap", "precomputedMutation", "commands", "WebGL2", "command", "canvasMutation$1", "mitt$2", "mitt$1", "defaultMouseTailConfig", "duration", "lineCap", "lineWidth", "strokeStyle", "indicatesTouchDevice", "TouchMove", "MouseInteraction", "TouchStart", "Replayer", "usingVirtualDom", "virtualDom", "mouseTail", "tailPositions", "legacy_missingNodeRetryMap", "styleMirror", "firstFullSnapshot", "newDocumentQueue", "mousePos", "touchActive", "lastSelectionData", "constructedStyleMutations", "adoptedStyleSheets", "handleResize", "dimension", "iframe", "display", "DomContentLoaded", "Load", "Custom", "FullSnapshot", "Plugin", "mouse", "CustomEvent", "Resize", "rebuildFullSnapshot", "contentWindow", "initialOffset", "applyIncremental", "nextUserInteractionEvent", "backToNormal", "skipInactive", "service", "isUserInteraction", "speedService", "skipTime", "min", "round", "maxSpeed", "SkipStart", "plugin", "plugins", "last_index", "finish", "Finish", "setTimeout", "EventCast", "defaultConfig", "loadTimeout", "showWarning", "showDebug", "blockClass", "insertStyleRules", "triggerFocus", "UNSAFE_replayCanvas", "pauseAnimation", "useVirtualDom", "setupDom", "getMirror", "nodeMirror", "replayerHandler", "canvasEvent", "canvasMutationData", "warnCanvasMutationFailed", "StyleSheetRule", "applyStyleSheetRule", "StyleDeclaration", "applyStyleDeclaration", "realNode", "applyAdoptedStyleSheet", "moveAndHover", "debugData", "applySelection", "unpackFn", "a1", "a2", "StateChange", "player", "normalSpeed", "normal", "FAST_FORWARD", "SET_SPEED", "skipping", "BACK_TO_NORMAL", "recordSpeed", "restoreSpeed", "firstMeta", "firstFullsnapshot", "setConfig", "Number", "parseFloat", "wrapper", "getMetaData", "firstEvent", "lastEvent", "endTime", "totalTime", "getCurrentTime", "getTimeOffset", "getElementsByTagName", "Start", "Pause", "resume", "Resume", "destroy", "Destroy", "rawEvent", "enableInteract", "pointerEvents", "disableInteract", "resetCache", "win", "NodeList", "DOMTokenList", "Node", "collected", "builtNode", "collectIframeAndAttachDocument", "onBuild", "mutationInQueue", "attachDocumentToIframe", "FullsnapshotRebuilded", "waitForStylesheetLoad", "preloadAllImages", "injectStylesRules", "styleEl", "adds", "insertRule", "iframeEl", "unloadSheets", "beforeLoadState", "stateHandler", "querySelectorAll", "size", "LoadStylesheetEnd", "clearTimeout", "LoadStylesheetStart", "promises", "CanvasMutation", "deserializeAndPreloadCanvasEvents", "preloadImages", "canvas", "imgd", "createImageData", "putImageData", "Mutation", "applyMutation", "message", "Drag", "lastPosition", "Event", "debugNodeNotFound", "Blur", "blur", "Focus", "focus", "preventScroll", "Click", "TouchEnd", "offsetWidth", "TouchCancel", "Scroll", "ViewportResize", "Input", "MediaInteraction", "mediaEl", "styleId", "Font", "fontFace", "FontFace", "family", "buffer", "fontSource", "descriptors", "fonts", "Selection", "AdoptedStyleSheet", "virtualNode", "removes", "warnNodeNotFound", "DOMException", "legacy_missingNodeMap", "appendNode", "previous", "previousId", "targetDoc", "parentSn", "childNodeArray", "targetId", "legacy_resolveMissingNode", "resolveTrees", "debug", "mutations", "idSet", "uniqueMutations", "texts", "attributeName", "newSn", "siblingNode", "styleValues", "targetEl", "svp", "svs", "checked", "isChecked", "selectionSet", "ranges", "startOffset", "endOffset", "startContainer", "endContainer", "Range", "setStart", "setEnd", "selection", "getSelection", "range", "removeAllRanges", "addRange", "_d", "deleteRule", "replaceSync", "targetHost", "styles", "newStyleSheet", "hostWindow", "CSSStyleSheet", "count", "adoptStyleSheets", "styleIds", "stylesToAdopt", "targetMutation", "previousInMap", "nextInMap", "base", "_x", "_y", "drawMouseTail", "hoverElements", "draw", "clearRect", "beginPath", "moveTo", "lineTo", "stroke", "hoveredEl", "currentEl", "SkipEnd", "log", "inlineCss", "cssObj", "padZero", "num", "threshold", "pow", "formatTime", "ms", "hour", "minute", "second", "isFullscreen", "fullscreen", "fullScreenAccessor", "typeOf", "div", "input", "label_1", "span", "disabled", "label", "t0_value", "J", "X", "H", "create_if_block_1", "ie", "ne", "oe", "Q", "M", "te", "F", "V", "div2", "div5", "div3", "span0", "div0", "div1", "span1", "div4", "button0", "button1", "W", "current", "t0", "t6", "t6_value", "switch_1_changes", "div_title_value", "background", "path", "button", "button_disabled_value", "create_if_block", "tagTime", "toFixed", "dispatch", "playerState", "speedState", "progress", "finished", "onPauseHook", "percentage", "customEvents", "inactivePeriods", "showController", "autoPlay", "speedOption", "tags", "inactiveColor", "pauseAt", "loop", "stopTimer", "goto", "$$invalidate", "playRange", "endTimeOffset", "startLooping", "afterHook", "newSpeed", "needFreeze", "undefined", "I", "percent", "totalEvents", "customEvent", "tag", "periods", "lastActiveTime", "getWidth", "tagStart", "tagEnd", "period", "progressRect", "clientX", "$$value", "maxScale", "fullscreenListener", "controller", "playerStyle", "_width", "_height", "updateScale", "scale", "transform", "toggleFullscreen", "exitFullscreen", "mozExitFullscreen", "webkitExitFullscreen", "msExitFullscreen", "requestFullscreen", "mozRequestFullScreen", "webkitRequestFullscreen", "msRequestFullscreen", "offsetHeight", "triggerUpdateMeta", "toggleSkipInactive", "Player", "_Player"]
}
