!function(E,R){"object"==typeof exports&&"undefined"!=typeof module?module.exports=R(require("@heimdallr-sdk/utils")):"function"==typeof define&&define.amd?define(["@heimdallr-sdk/utils"],R):(E="undefined"!=typeof globalThis?globalThis:E||self).HEIMDALLR_VUE=R(E.utils)}(this,(function(E){"use strict";var R,e=((R=e||{}).NAME="@heimdallr-sdk",R);const O="[@heimdallr-sdk]:";var t=(E=>(E[E.FATAL=1]="FATAL",E[E.ERROR=2]="ERROR",E[E.WARN=3]="WARN",E[E.INFO=4]="INFO",E[E.DEBUG=5]="DEBUG",E))(t||{}),r=(E=>(E.SESSION_ID="HEIMDALLR_SDK_SESSION_ID",E.USER_ID="HEIMDALLR_SDK_USER_ID",E.APP="HEIMDALLR_SDK_APP_ID",E))(r||{}),o=(E=>(E.GET="GET",E.POST="POST",E.PUT="PUT",E.DELETE="DELETE",E))(o||{}),n=(E=>(E[E.LIFECYCLE=1]="LIFECYCLE",E[E.ERROR=2]="ERROR",E[E.PERFORMANCE=3]="PERFORMANCE",E[E.API=4]="API",E[E.DOM=5]="DOM",E[E.ROUTE=6]="ROUTE",E[E.CONSOLE=7]="CONSOLE",E[E.RECORD=8]="RECORD",E[E.VUE=9]="VUE",E[E.CUSTOMER=10]="CUSTOMER",E[E.EXTEND=11]="EXTEND",E))(n||{}),C=(E=>(E[E.CODEERROR=21]="CODEERROR",E[E.RESOURCEERROR=22]="RESOURCEERROR",E[E.UNHANDLEDREJECTION=23]="UNHANDLEDREJECTION",E[E.PAGECRASH=24]="PAGECRASH",E))(C||{}),i=(E=>(E[E.BEACON=1]="BEACON",E[E.IMG=2]="IMG",E[E.GET=3]="GET",E[E.POST=4]="POST",E))(i||{}),S=(E=>(E[E.CLICK=51]="CLICK",E))(S||{}),s=(E=>(E.LOG="log",E.INFO="info",E.WARN="warn",E.ERROR="error",E.ASSERT="assert",E))(s||{}),A=(E=>(E[E.XHR=41]="XHR",E[E.FETCH=42]="FETCH",E))(A||{}),l=(E=>(E[E.FMP=31]="FMP",E[E.FPS=32]="FPS",E[E.BASIC=33]="BASIC",E[E.VITALS=34]="VITALS",E[E.RESOURCE=35]="RESOURCE",E))(l||{}),L=(E=>(E[E.HASH=61]="HASH",E[E.HISTORY=62]="HISTORY",E))(L||{}),I=(E=>(E[E.CUSTOMER=111]="CUSTOMER",E))(I||{}),T=(E=>(E.LOCAL="local",E.SESSION="session",E.COOKIE="cookie",E.GLOBAL="global",E))(T||{}),a=(E=>(E[E.LOAD=11]="LOAD",E[E.UNLOAD=12]="UNLOAD",E))(a||{}),D=(E=>(E[E.MOBILE=1]="MOBILE",E[E.PC=2]="PC",E))(D||{}),N=(E=>(E[E.BROWSER=1]="BROWSER",E[E.WECHAT=2]="WECHAT",E[E.NODE=3]="NODE",E))(N||{}),U=(E=>(E[E.ROUTE=11]="ROUTE",E[E.CLICK=12]="CLICK",E[E.CONSOLE=13]="CONSOLE",E[E.XHR=14]="XHR",E[E.FETCH=15]="FETCH",E[E.UNHANDLEDREJECTION=16]="UNHANDLEDREJECTION",E[E.RESOURCE=17]="RESOURCE",E[E.CODE_ERROR=18]="CODE_ERROR",E[E.CUSTOMER=19]="CUSTOMER",E[E.FRAMEWORK=20]="FRAMEWORK",E[E.LIFECYCLE=21]="LIFECYCLE",E[E.CRASH=22]="CRASH",E))(U||{}),u=(E=>(E[E.API=21]="API",E[E.ROUTE=22]="ROUTE",E[E.CLICK=23]="CLICK",E[E.ERROR=24]="ERROR",E[E.LIFECYCLE=25]="LIFECYCLE",E[E.CUSTOMER=26]="CUSTOMER",E))(u||{}),c=(E=>(E[E.ERROR=91]="ERROR",E))(c||{});var H=Object.defineProperty,f=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,P=(E,R,e)=>R in E?H(E,R,{enumerable:!0,configurable:!0,writable:!0,value:e}):E[R]=e;const m="HEIMDALLR_SDK_VUE_ERROR_CACHE";return function(R={}){return{name:"vuePlugin",monitor(E){const{vue:e}=R,{debug:t}=this.getContext();if(!e)return void console.warn(O,"Missing Vue in options");const{errorHandler:r,silent:o}=e.config;e.config.errorHandler=(R,e,n)=>{const{name:C,message:i,stack:S=""}=R;E(((E,R)=>{for(var e in R||(R={}))d.call(R,e)&&P(E,e,R[e]);if(f)for(var e of f(R))M.call(R,e)&&P(E,e,R[e]);return E})({name:C,msg:i,hook:n,stk:S,st:c.ERROR},(E=>{if(!E)return{};const[,R]=E.split("\n"),[e=""]=/([a-z|0-9|-]*).js:[0-9]*:[0-9]*/.exec(R)||[],[O,t=""]=e.split(".js:"),[r,o]=t.split(":"),n=Number(r),C=Number(o);return O&&n==n&&C==C?{lineno:n,colno:C,filename:`${O}.js`}:{}})(S))),t&&("function"==typeof r?r.call(this.vm,R,e,n):o||console.error(O,`Error in ${n}: "${S&&S.toString()}"`))}},transform(R){const e=E.generateUUID(),{hook:O,msg:r}=R;this.breadcrumb.unshift({lid:e,bt:U.FRAMEWORK,l:t.FATAL,msg:`Error in Vue/${O}: "${r}"`,t:this.getTime()});let o=E.getStore(T.SESSION,m);Array.isArray(o)||(o=[]);const C=(i=R,window.btoa(encodeURIComponent(JSON.stringify(i))));var i;return o.includes(C)?null:(o.push(C),E.setStore(T.SESSION,m,o),{lid:e,t:this.getTime(),e:n.VUE,dat:R})}}}}));
