var HEIMDALLR_DOM=function(){"use strict";var E,R=((E=R||{}).NAME="@heimdallr-sdk",E),O=(E=>(E[E.FATAL=1]="FATAL",E[E.ERROR=2]="ERROR",E[E.WARN=3]="WARN",E[E.INFO=4]="INFO",E[E.DEBUG=5]="DEBUG",E))(O||{}),C=(E=>(E.SESSION_ID="HEIMDALLR_SDK_SESSION_ID",E.USER_ID="HEIMDALLR_SDK_USER_ID",E.APP="HEIMDALLR_SDK_APP_ID",E))(C||{}),S=(E=>(E.GET="GET",E.POST="POST",E.PUT="PUT",E.DELETE="DELETE",E))(S||{}),L=(E=>(E[E.LIFECYCLE=1]="LIFECYCLE",E[E.ERROR=2]="ERROR",E[E.PERFORMANCE=3]="PERFORMANCE",E[E.API=4]="API",E[E.DOM=5]="DOM",E[E.ROUTE=6]="ROUTE",E[E.CONSOLE=7]="CONSOLE",E[E.RECORD=8]="RECORD",E[E.VUE=9]="VUE",E[E.CUSTOMER=10]="CUSTOMER",E[E.EXTEND=11]="EXTEND",E))(L||{}),A=(E=>(E[E.CODEERROR=21]="CODEERROR",E[E.RESOURCEERROR=22]="RESOURCEERROR",E[E.UNHANDLEDREJECTION=23]="UNHANDLEDREJECTION",E[E.PAGECRASH=24]="PAGECRASH",E))(A||{}),T=(E=>(E[E.BEACON=1]="BEACON",E[E.IMG=2]="IMG",E[E.GET=3]="GET",E[E.POST=4]="POST",E))(T||{}),I=(E=>(E[E.CLICK=51]="CLICK",E))(I||{}),D=(E=>(E.LOG="log",E.INFO="info",E.WARN="warn",E.ERROR="error",E.ASSERT="assert",E))(D||{}),N=(E=>(E[E.XHR=41]="XHR",E[E.FETCH=42]="FETCH",E))(N||{}),e=(E=>(E[E.FMP=31]="FMP",E[E.FPS=32]="FPS",E[E.BASIC=33]="BASIC",E[E.VITALS=34]="VITALS",E[E.RESOURCE=35]="RESOURCE",E))(e||{}),U=(E=>(E[E.HASH=61]="HASH",E[E.HISTORY=62]="HISTORY",E))(U||{}),t=(E=>(E[E.CUSTOMER=111]="CUSTOMER",E))(t||{}),n=(E=>(E.LOCAL="local",E.SESSION="session",E.COOKIE="cookie",E.GLOBAL="global",E))(n||{}),H=(E=>(E[E.LOAD=11]="LOAD",E[E.UNLOAD=12]="UNLOAD",E))(H||{}),r=(E=>(E[E.MOBILE=1]="MOBILE",E[E.PC=2]="PC",E))(r||{}),s=(E=>(E[E.BROWSER=1]="BROWSER",E[E.WECHAT=2]="WECHAT",E[E.NODE=3]="NODE",E))(s||{}),i=(E=>(E[E.ROUTE=11]="ROUTE",E[E.CLICK=12]="CLICK",E[E.CONSOLE=13]="CONSOLE",E[E.XHR=14]="XHR",E[E.FETCH=15]="FETCH",E[E.UNHANDLEDREJECTION=16]="UNHANDLEDREJECTION",E[E.RESOURCE=17]="RESOURCE",E[E.CODE_ERROR=18]="CODE_ERROR",E[E.CUSTOMER=19]="CUSTOMER",E[E.FRAMEWORK=20]="FRAMEWORK",E[E.LIFECYCLE=21]="LIFECYCLE",E[E.CRASH=22]="CRASH",E))(i||{}),M=(E=>(E[E.API=21]="API",E[E.ROUTE=22]="ROUTE",E[E.CLICK=23]="CLICK",E[E.ERROR=24]="ERROR",E[E.LIFECYCLE=25]="LIFECYCLE",E[E.CUSTOMER=26]="CUSTOMER",E))(M||{});const o=(E,R)=>{let O=0;return function(...C){const S=Date.now();S-O>=R&&(O=S,E.apply(this,C))}};var P,l,F=((P=F||{}).NAME="@heimdallr-sdk",P),a=((l=a||{})[l.FATAL=1]="FATAL",l[l.ERROR=2]="ERROR",l[l.WARN=3]="WARN",l[l.INFO=4]="INFO",l[l.DEBUG=5]="DEBUG",l),c=(E=>(E.SESSION_ID="HEIMDALLR_SDK_SESSION_ID",E.USER_ID="HEIMDALLR_SDK_USER_ID",E.APP="HEIMDALLR_SDK_APP_ID",E))(c||{}),x=(E=>(E.GET="GET",E.POST="POST",E.PUT="PUT",E.DELETE="DELETE",E))(x||{}),u=(E=>(E[E.LIFECYCLE=1]="LIFECYCLE",E[E.ERROR=2]="ERROR",E[E.PERFORMANCE=3]="PERFORMANCE",E[E.API=4]="API",E[E.DOM=5]="DOM",E[E.ROUTE=6]="ROUTE",E[E.CONSOLE=7]="CONSOLE",E[E.RECORD=8]="RECORD",E[E.VUE=9]="VUE",E[E.CUSTOMER=10]="CUSTOMER",E[E.EXTEND=11]="EXTEND",E))(u||{}),_=(E=>(E[E.CODEERROR=21]="CODEERROR",E[E.RESOURCEERROR=22]="RESOURCEERROR",E[E.UNHANDLEDREJECTION=23]="UNHANDLEDREJECTION",E[E.PAGECRASH=24]="PAGECRASH",E))(_||{}),K=(E=>(E[E.BEACON=1]="BEACON",E[E.IMG=2]="IMG",E[E.GET=3]="GET",E[E.POST=4]="POST",E))(K||{}),G=(E=>(E[E.CLICK=51]="CLICK",E))(G||{}),d=(E=>(E.LOG="log",E.INFO="info",E.WARN="warn",E.ERROR="error",E.ASSERT="assert",E))(d||{}),B=(E=>(E[E.XHR=41]="XHR",E[E.FETCH=42]="FETCH",E))(B||{}),m=(E=>(E[E.FMP=31]="FMP",E[E.FPS=32]="FPS",E[E.BASIC=33]="BASIC",E[E.VITALS=34]="VITALS",E[E.RESOURCE=35]="RESOURCE",E))(m||{}),f=(E=>(E[E.HASH=61]="HASH",E[E.HISTORY=62]="HISTORY",E))(f||{}),W=(E=>(E[E.CUSTOMER=111]="CUSTOMER",E))(W||{}),Y=(E=>(E.LOCAL="local",E.SESSION="session",E.COOKIE="cookie",E.GLOBAL="global",E))(Y||{}),g=(E=>(E[E.LOAD=11]="LOAD",E[E.UNLOAD=12]="UNLOAD",E))(g||{}),X=(E=>(E[E.MOBILE=1]="MOBILE",E[E.PC=2]="PC",E))(X||{}),h=(E=>(E[E.BROWSER=1]="BROWSER",E[E.WECHAT=2]="WECHAT",E[E.NODE=3]="NODE",E))(h||{}),v=(E=>(E[E.ROUTE=11]="ROUTE",E[E.CLICK=12]="CLICK",E[E.CONSOLE=13]="CONSOLE",E[E.XHR=14]="XHR",E[E.FETCH=15]="FETCH",E[E.UNHANDLEDREJECTION=16]="UNHANDLEDREJECTION",E[E.RESOURCE=17]="RESOURCE",E[E.CODE_ERROR=18]="CODE_ERROR",E[E.CUSTOMER=19]="CUSTOMER",E[E.FRAMEWORK=20]="FRAMEWORK",E[E.LIFECYCLE=21]="LIFECYCLE",E[E.CRASH=22]="CRASH",E))(v||{}),b=(E=>(E[E.API=21]="API",E[E.ROUTE=22]="ROUTE",E[E.CLICK=23]="CLICK",E[E.ERROR=24]="ERROR",E[E.LIFECYCLE=25]="LIFECYCLE",E[E.CUSTOMER=26]="CUSTOMER",E))(b||{});return function(E={}){const{throttleDelayTime:R=300,sensitiveClasses:O,sensitiveTags:C=[]}=E;return{name:"domPlugin",monitor(E){const O=o(E,R);document.addEventListener("click",(function(E){O({doc:this,ev:E})}),!0)},transform(E){const{doc:R,ev:S}=E,A=R.activeElement;if(!A)return null;const T=function(E,R=[],O=[]){const{localName:C,classList:S,id:L,innerText:A}=E;if("body"===C)return null;const T=S.value;let I=!1;if(O.map((E=>E.trim())).includes(C)&&(I=!0),!I&&R.length){const O=R.map((E=>E.trim()));for(const R of O)if(R.includes(" ")){if(Array.from(document.querySelectorAll(R)).includes(E)){I=!0;break}}else if(T.includes(R)){I=!0;break}}return`<${C}${L?` id="${L}"`:""}${T?` class="${T}"`:""}>${I?"[敏感数据]":A}</${C}>`}(A,O,C),{pageX:D,pageY:N}=S,e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(E=>{const R=16*Math.random()|0;return("x"===E?R:3&R|8).toString(16)}));return this.breadcrumb.unshift({lid:e,bt:i.CLICK,msg:`Click ${T}`,t:this.getTime()}),{lid:e,t:this.getTime(),e:L.DOM,dat:{st:I.CLICK,ele:T,x:D,y:N}}}}}}();
